<?php
bolt_decrypt( __FILE__ , 'WVZnR9'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXE1vZGVsc1xIcjsKCnVzZSBBcHBcTW9kZWxzXEVtcGxveWVlOwp1c2UgREI7CnVzZSBJbGx1bWluYXRlXERhdGFiYXNlXEVsb3F1ZW50XE1vZGVsOwp1c2UgSWxsdW1pbmF0ZVxEYXRhYmFzZVxFbG9xdWVudFxTb2Z0RGVsZXRlczsKdXNlIFNwYXRpZVxBY3Rpdml0eWxvZ1xMb2dPcHRpb25zOwoKY2xhc3MgVW5pdCBleHRlbmRzIE1vZGVsCnsKCSAgdXNlIFNvZnREZWxldGVzOwoKCSAgcHJvdGVjdGVkICR0YWJsZSA9ICdocl91bml0JzsKCSAgcHJvdGVjdGVkICRwcmltYXJ5S2V5ID0gJ2hyX3VuaXRfaWQnOwogICAgcHJvdGVjdGVkICRndWFyZGVkID0gW107CiAgICBwcm90ZWN0ZWQgJGZpbGxhYmxlID0gWwogICAgICAnY29tcGFueV9pZCcsCiAgICAgICdocl91bml0X25hbWUnLAogICAgICAnaHJfdW5pdF9zaG9ydF9uYW1lJywKICAgICAgJ2hyX3VuaXRfbmFtZV9ibicsCiAgICAgICdocl91bml0X2FkZHJlc3MnLAogICAgICAnaHJfdW5pdF9hZGRyZXNzX2JuJywKICAgICAgJ2hyX3VuaXRfdGVsZXBob25lJywKICAgICAgJ2hyX3VuaXRfY29kZScsCiAgICAgICdocl91bml0X2xvZ28nLAogICAgICAnaHJfdW5pdF9zdGF0dXMnLAogICAgICAnaHJfdW5pdF9hdHRfdGFibGUnLAogICAgICAnaHJfdW5pdF9yZWZlcmVuY2VfaGVhZGluZycsCiAgICAgICdocl91bml0X2dyb3VwJywKICAgICAgJ2hyX3VuaXRfYXV0aG9yaXplZF9zaWduYXR1cmUnLAogICAgICAncGFkJywKICAgICAgJ2NyZWF0ZWRfYnknLAogICAgICAndXBkYXRlZF9ieScsCiAgICAgICdkZWxldGVkX2F0JywKICAgIF07CgogICAgcHJvdGVjdGVkICRkYXRlcyA9IFsKICAgICAgICAnY3JlYXRlZF9hdCcsICd1cGRhdGVkX2F0JywgJ2RlbGV0ZWRfYXQnCiAgICBdOwoKICAgIHB1YmxpYyBmdW5jdGlvbiBjb21wYW55KCl7CiAgICAgIHJldHVybiAkdGhpcy0+YmVsb25nc1RvKFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xDb21wYW55OjpjbGFzcyk7IAogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBkZXBhcnRtZW50cygpewogICAgICByZXR1cm4gJHRoaXMtPmhhc01hbmUoRGVwYXJ0bWVudDo6Y2xhc3MsICdocl91bml0X2lkJywgJ2hyX3VuaXRfaWQnKTsgCiAgICB9CgogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiB1bml0TGlzdCgpCiAgICB7CiAgICAgICAgcmV0dXJuIFVuaXQ6OnBsdWNrKCdocl91bml0X25hbWUnLCAnaHJfdW5pdF9pZCcpOyAKICAgICAgIAogICAgfQogICAgCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHVuaXRXaXRoU2VsZWN0ZWRJZCgkaWQpewogICAgICByZXR1cm4gVW5pdDo6d2hlcmUoJ2hyX3VuaXRfaWQnLCAkaWQpLT5nZXQoKTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHVuaXROYW1lKCRpZCkKICAgIHsKICAgICAgJHVuaXROYW1lPSBVbml0Ojp3aGVyZSgnaHJfdW5pdF9pZCcsJGlkKS0+Zmlyc3QoWydocl91bml0X25hbWUnXSk7IAogICAgICByZXR1cm4gJHVuaXROYW1lOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0VW5pdE5hbWVCYW5nbGEoJGlkKQogICAgewogICAgICAkdW5pdE5hbWU9IFVuaXQ6OndoZXJlKCdocl91bml0X2lkJywkaWQpLT5maXJzdChbJ2hyX3VuaXRfbmFtZV9ibiddKTsgCiAgICAgIHJldHVybiAkdW5pdE5hbWU7CiAgICB9CgoKICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRVbml0V2lzZUVtcCgkdW5pdElkKQogICAgewogICAgICAkd2hlcmUgPSBbCiAgICAgICAgJ2FzX3N0YXR1cycgPT4gMSwKICAgICAgICAnYXNfdW5pdF9pZCcgPT4gJHVuaXRJZAogICAgICBdOwogICAgICByZXR1cm4gRW1wbG95ZWU6OndoZXJlKCR3aGVyZSktPmdldCgpOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gdW5pdExpc3RBc09iamVjdCgpCiAgICB7CiAgICAgICR1bml0TGlzdCA9IFVuaXQ6OnNlbGVjdCgnaHJfdW5pdF9uYW1lJywgJ2hyX3VuaXRfaWQnKS0+Z2V0KCk7IAogICAgICByZXR1cm4gJHVuaXRMaXN0OwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QWN0aXZlVW5pdCgpCiAgICB7CiAgICAJcmV0dXJuIERCOjp0YWJsZSgnaHJfdW5pdCcpLT53aGVyZSgnaHJfdW5pdF9zdGF0dXMnLCAxKS0+b3JkZXJCeSgnaHJfdW5pdF9uYW1lJywgJ2Rlc2MnKS0+Z2V0KCk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGZpeGVkQXNzZXRMb2NhdGlvbnMoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+aGFzTWFueShcQXBwXE1vZGVsc1xGaXhlZEFzc2V0c1xGaXhlZEFzc2V0TG9jYXRpb246OmNsYXNzLCAndW5pdF9pZCcsICdocl91bml0X2lkJyk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHVzZXJzKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmhhc01hbnkoXEFwcFxVc2VyUHJpb3JpdHk6OmNsYXNzLCAnaHJfdW5pdF9pZCcsICdocl91bml0X2lkJyk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGdldEFjdGl2aXR5bG9nT3B0aW9ucygpOiBMb2dPcHRpb25zCiAgICB7CiAgICAgICAgcmV0dXJuIExvZ09wdGlvbnM6OmRlZmF1bHRzKCk7CiAgICB9Cn0K