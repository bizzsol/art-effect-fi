<?php
bolt_decrypt( __FILE__ , 'diRM2b'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcUG1zOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKdXNlIEFwcFxIdHRwXFJlcXVlc3RzOwp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcUHJvZHVjdDsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFN1cHBsaWVyczsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFJmcFxSZXF1ZXN0UHJvcG9zYWw7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xSZnBcUmVxdWVzdFByb3Bvc2FsRGV0YWlsczsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFJmcFxSZXF1ZXN0UHJvcG9zYWxEZWZpbmVTdXBwbGllcjsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFF1b3RhdGlvbnM7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xRdW90YXRpb25zSXRlbXM7CnVzZSBBcHAsREIsQXV0aDsKCmNsYXNzIE9ubGluZVF1b3RhdGlvbkNvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyCnsKICAgIHB1YmxpYyBmdW5jdGlvbiBzaG93T25saW5lUXVvdGF0aW9uRm9ybSgkcHJvcG9zYWxJZCwkc3VwcGxpZXJJZCl7CgoKICAgICAgICAkcHJvcG9zYWxJZD1kZWNyeXB0KCRwcm9wb3NhbElkKTsKICAgICAgICAkc3VwcGxpZXJJZD1kZWNyeXB0KCRzdXBwbGllcklkKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJHN1cHBsaWVyPVN1cHBsaWVyczo6ZmluZE9yRmFpbCgkc3VwcGxpZXJJZCk7CiAgICAgICAgICAgICR0aXRsZSA9ICdEZWFyICcuJHN1cHBsaWVyLT5uYW1lLicgUGxlYXNlIFN1Ym1pdCBZb3VyIFF1b3RhdGlvbiBIZXJlJzsKICAgICAgICAgICAgJHByZWZpeD0nUUctJy5kYXRlKCd5Jywgc3RydG90aW1lKGRhdGUoJ1ktbS1kJykpKS4nLU1CTS0nOwogICAgICAgICAgICAkcmVmTm89dW5pcXVlQ29kZSgxNCwkcHJlZml4LCdxdW90YXRpb25zJywnaWQnKTsKCiAgICAgICAgICAgICRtb2RhbD1RdW90YXRpb25zOjp3aGVyZShbCiAgICAgICAgICAgICAgICAnc3VwcGxpZXJfaWQnPT4kc3VwcGxpZXJJZCwKICAgICAgICAgICAgICAgICdyZXF1ZXN0X3Byb3Bvc2FsX2lkJz0+JHByb3Bvc2FsSWQsCiAgICAgICAgICAgICAgICAndHlwZSc9PidvbmxpbmUnCiAgICAgICAgICAgIF0pLT5maXJzdCgpOwoKICAgICAgICAgICAgaWYoY291bnQoKGFycmF5KSRtb2RhbCk+MCl7CiAgICAgICAgICAgICAgICByZXR1cm4gJ0FscmVhZHkgc3VibWl0dGVkIHlvdXIgcXVvdGF0aW9uISc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRyZXF1ZXN0UHJvcG9zYWw9UmVxdWVzdFByb3Bvc2FsOjp3aGVyZSgndHlwZScsJ29ubGluZScpLT53aXRoKCdyZXF1ZXN0UHJvcG9zYWxEZXRhaWxzJywncmVxdWVzdFByb3Bvc2FsRGV0YWlscy5wcm9kdWN0JywnY3JlYXRlZEJ5JyktPmZpbmRPckZhaWwoJHByb3Bvc2FsSWQpOwoKCiAgICAgICAgICAgICRzdWJtaXRRdW90YXRpb249UXVvdGF0aW9uczo6d2hlcmUoWydyZXF1ZXN0X3Byb3Bvc2FsX2lkJz0+JHByb3Bvc2FsSWQsICdzdXBwbGllcl9pZCc9PiRzdXBwbGllcklkLCd0eXBlJz0+J29ubGluZSddKS0+Z2V0KCk7CgogICAgICAgICAgICByZXR1cm4gdmlldygncG1zLmJhY2tlbmQucGFnZXMucXVvdGF0aW9uLm9ubGluZS1xdW90YXRpb24tZm9ybScsIGNvbXBhY3QoJ3RpdGxlJywnc3VwcGxpZXInLCdyZXF1ZXN0UHJvcG9zYWwnLCdyZWZObycsJ3N1Ym1pdFF1b3RhdGlvbicpKTsKCiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CgogICAgICAgICAgICByZXR1cm4kdGgtPmdldE1lc3NhZ2UoKTsKICAgICAgICB9CiAgICB9CgoKICAgIHB1YmxpYyBmdW5jdGlvbiBzdG9yZShSZXF1ZXN0c1xQbXNcUXVvdGF0aW9uUmVxdWVzdCAkcmVxdWVzdCl7CgogICAgICAgICR0eXBlPSRyZXF1ZXN0LT50eXBlOwogICAgICAgICRtb2RhbD1RdW90YXRpb25zOjp3aGVyZShbCiAgICAgICAgICAgICdzdXBwbGllcl9pZCc9PiRyZXF1ZXN0LT5zdXBwbGllcl9pZCwKICAgICAgICAgICAgJ3JlcXVlc3RfcHJvcG9zYWxfaWQnPT4kcmVxdWVzdC0+cmVxdWVzdF9wcm9wb3NhbF9pZCwKICAgICAgICAgICAgJ3R5cGUnPT4kdHlwZQogICAgICAgIF0pLT5maXJzdCgpOwoKICAgICAgICBpZihjb3VudCgoYXJyYXkpJG1vZGFsKT4wKXsKICAgICAgICAgICAgcmV0dXJuICdBbHJlYWR5IHN1Ym1pdHRlZCB5b3VyIHF1b3RhdGlvbiEnOwogICAgICAgIH0KCiAgICAgICAgREI6OmJlZ2luVHJhbnNhY3Rpb24oKTsKICAgICAgICB0cnkgewoKICAgICAgICAgICAgJHF1b3RhdGlvbkZpbGVQYXRoPScnOwogICAgICAgICAgICBpZiAoJHJlcXVlc3QtPmhhc0ZpbGUoJ3F1b3RhdGlvbl9maWxlJykpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRxdW90YXRpb25GaWxlUGF0aD0kdGhpcy0+ZmlsZVVwbG9hZCgkcmVxdWVzdC0+ZmlsZSgncXVvdGF0aW9uX2ZpbGUnKSwncXVvdGF0aW9uL3BkZi1maWxlJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRxdW90YXRpb249UXVvdGF0aW9uczo6Y3JlYXRlKFsKICAgICAgICAgICAgICAgICdzdXBwbGllcl9pZCc9PiRyZXF1ZXN0LT5zdXBwbGllcl9pZCwKICAgICAgICAgICAgICAgICdyZXF1ZXN0X3Byb3Bvc2FsX2lkJz0+JHJlcXVlc3QtPnJlcXVlc3RfcHJvcG9zYWxfaWQsCiAgICAgICAgICAgICAgICAncmVmZXJlbmNlX25vJz0+JHJlcXVlc3QtPnJlZmVyZW5jZV9ubywKICAgICAgICAgICAgICAgICdxdW90YXRpb25fZGF0ZSc9PmRhdGUoJ1ktbS1kJyxzdHJ0b3RpbWUoJHJlcXVlc3QtPnF1b3RhdGlvbl9kYXRlKSksCgogICAgICAgICAgICAgICAgJ3RvdGFsX3ByaWNlJz0+JHJlcXVlc3QtPnN1bV9vZl9zdWJ0b2FsLAogICAgICAgICAgICAgICAgJ2Rpc2NvdW50Jz0+JHJlcXVlc3QtPmRpc2NvdW50PT1udWxsPzA6JHJlcXVlc3QtPmRpc2NvdW50LAogICAgICAgICAgICAgICAgJ3ZhdCc9PiRyZXF1ZXN0LT52YXQ9PW51bGw/MDokcmVxdWVzdC0+dmF0LAogICAgICAgICAgICAgICAgJ2dyb3NzX3ByaWNlJz0+JHJlcXVlc3QtPmdyb3NzX3ByaWNlLAoKICAgICAgICAgICAgICAgICdzdGF0dXMnPT4nYWN0aXZlJywKICAgICAgICAgICAgICAgICd0eXBlJz0+JHR5cGUsCiAgICAgICAgICAgICAgICAnY3JlYXRlZF9ieSc9PiRyZXF1ZXN0LT5zdXBwbGllcl9pZCwKICAgICAgICAgICAgICAgICdxdW90YXRpb25fZmlsZSc9PiRxdW90YXRpb25GaWxlUGF0aAogICAgICAgICAgICBdKTsKCiAgICAgICAgICAgIGZvcmVhY2ggKCRyZXF1ZXN0LT5wcm9kdWN0X2lkIGFzICRpPT4kcHJvZHVjdF9pZCl7CiAgICAgICAgICAgICAgICAkcXVvdGF0aW9uSXRlbXNJbnB1dFtdPVsKICAgICAgICAgICAgICAgICAgICAncXVvdGF0aW9uX2lkJz0+JHF1b3RhdGlvbi0+aWQsCiAgICAgICAgICAgICAgICAgICAgJ3Byb2R1Y3RfaWQnPT4kcHJvZHVjdF9pZCwKICAgICAgICAgICAgICAgICAgICAndW5pdF9wcmljZSc9PiRyZXF1ZXN0LT51bml0X3ByaWNlWyRwcm9kdWN0X2lkXSwKICAgICAgICAgICAgICAgICAgICAncXR5Jz0+JHJlcXVlc3QtPnF0eVskcHJvZHVjdF9pZF0sCiAgICAgICAgICAgICAgICAgICAgJ3N1Yl90b3RhbF9wcmljZSc9PiRyZXF1ZXN0LT5zdWJfdG90YWxfcHJpY2VbJHByb2R1Y3RfaWRdLAogICAgICAgICAgICAgICAgICAgICdkaXNjb3VudCc9PiRyZXF1ZXN0LT5pdGVtX2Rpc2NvdW50X3BlcmNlbnRbJHByb2R1Y3RfaWRdLAogICAgICAgICAgICAgICAgICAgICdkaXNjb3VudF9hbW91bnQnPT4kcmVxdWVzdC0+aXRlbV9kaXNjb3VudF9hbW91bnRbJHByb2R1Y3RfaWRdLAogICAgICAgICAgICAgICAgICAgICd2YXQnPT4wLAogICAgICAgICAgICAgICAgICAgICd0b3RhbF9wcmljZSc9PiRyZXF1ZXN0LT5zdWJfdG90YWxfcHJpY2VbJHByb2R1Y3RfaWRdLSRyZXF1ZXN0LT5pdGVtX2Rpc2NvdW50X2Ftb3VudFskcHJvZHVjdF9pZF0sCgogICAgICAgICAgICAgICAgICAgICdjcmVhdGVkX2F0Jz0+ZGF0ZSgnWS1tLWQgaDppJyksCiAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBRdW90YXRpb25zSXRlbXM6Omluc2VydCgkcXVvdGF0aW9uSXRlbXNJbnB1dCk7CgogICAgICAgICAgICBEQjo6Y29tbWl0KCk7CgogICAgICAgICAgICByZXR1cm4gJ1lvdXIgcXVvdGF0aW9uIGlzIHN1Y2Nlc3NmdWxseSBzdWJtaXR0ZWQnOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIERCOjpyb2xsYmFjaygpOwogICAgICAgICAgICByZXR1cm4gJHRoLT5nZXRNZXNzYWdlKCk7CiAgICAgICAgfQogICAgfQoKfQo=