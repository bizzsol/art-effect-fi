<?php
bolt_decrypt( __FILE__ , 'qi18gV'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcUG1zOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xJbnZlbnRvcnlNb2RlbHNcSW52ZW50b3J5U3VtbWFyeTsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXEludmVudG9yeU1vZGVsc1xJbnZlbnRvcnlEZXRhaWxzOwp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcQ2F0ZWdvcnk7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xQcm9kdWN0Owp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcV2FyZWhvdXNlczsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXEF0dHJpYnV0ZTsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXEF0dHJpYnV0ZU9wdGlvbjsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFByb2R1Y3RBdHRyaWJ1dGU7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKdXNlIElsbHVtaW5hdGVcSHR0cFxSZXF1ZXN0czsKdXNlIEFwcCxBdXRoLERCOwoKY2xhc3MgSW52ZW50b3J5U3RvY2tDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICBwdWJsaWMgZnVuY3Rpb24gaW5kZXgoKQogICAgewogICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAndGl0bGUnID0+ICdJbnZlbnRvcnkgU3RvY2sgUmVwb3J0JywKICAgICAgICAgICAgJ2F0dHJpYnV0ZXMnID0+IEF0dHJpYnV0ZTo6aGFzKCdvcHRpb25zJyktPndoZXJlKCdzZWFyY2hhYmxlJywgJ3llcycpLT5nZXQoKSwKICAgICAgICBdOwoKICAgICAgICByZXR1cm4gdmlldygncG1zLmJhY2tlbmQucGFnZXMuaW52ZW50b3J5LmludmVudG9yeS1zdG9jay5pbmRleCcsJGRhdGEpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBzdG9yZShSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgICRhdHRyaWJ1dGVPcHRpb25zID0gYXJyYXlfdmFsdWVzKGFycmF5X2ZpbHRlcihhcnJheV9tYXAoZnVuY3Rpb24oJHZhbHVlKXsKICAgICAgICAgICAgcmV0dXJuICR2YWx1ZSA+IDAgPyAkdmFsdWUgOiAnJzsKICAgICAgICB9LCAkcmVxdWVzdC0+YXR0cmlidXRlc0RhdGEpKSk7CgogICAgICAgICRwcm9kdWN0cyA9IFByb2R1Y3Q6OndoZXJlKCdzdGF0dXMnLCAnYXBwcm92ZWQnKQogICAgICAgIC0+d2hlbihpc3NldChhdXRoKCktPnVzZXIoKS0+ZW1wbG95ZWUtPmFzX3VuaXRfaWQpLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygncmVsSW52ZW50b3J5RGV0YWlscycsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnaHJfdW5pdF9pZCcsYXV0aCgpLT51c2VyKCktPmVtcGxveWVlLT5hc191bml0X2lkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIGlmKGlzc2V0KCRhdHRyaWJ1dGVPcHRpb25zWzBdKSl7CiAgICAgICAgICAgIGZvcmVhY2goJGF0dHJpYnV0ZU9wdGlvbnMgYXMgJGtleSA9PiAkb3B0aW9uKXsKICAgICAgICAgICAgICAgICRwcm9kdWN0cyA9ICRwcm9kdWN0cy0+d2hlcmVIYXMoJ2F0dHJpYnV0ZXMnLCBmdW5jdGlvbigkcXVlcnkpIHVzZSgkb3B0aW9uKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnYXR0cmlidXRlX29wdGlvbl9pZCcsICRvcHRpb24pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICRwcm9kdWN0cyA9ICRwcm9kdWN0cy0+Z2V0KCk7CgogICAgICAgICRpbnZlbnRvcnlEZXRhaWxzID0gSW52ZW50b3J5RGV0YWlsczo6d2hlbihpc3NldChhdXRoKCktPnVzZXIoKS0+ZW1wbG95ZWUtPmFzX3VuaXRfaWQpLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnaHJfdW5pdF9pZCcsYXV0aCgpLT51c2VyKCktPmVtcGxveWVlLT5hc191bml0X2lkKTsKICAgICAgICB9KS0+d2hlcmVJbigncHJvZHVjdF9pZCcsICRwcm9kdWN0cy0+cGx1Y2soJ2lkJyktPnRvQXJyYXkoKSktPmdldCgpOwoKICAgICAgICByZXR1cm4gdmlldygncG1zLmJhY2tlbmQucGFnZXMuaW52ZW50b3J5LmludmVudG9yeS1zdG9jay5zdG9ja3MnLCBjb21wYWN0KCdwcm9kdWN0cycsICdpbnZlbnRvcnlEZXRhaWxzJywgJ2F0dHJpYnV0ZU9wdGlvbnMnKSk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHVwZGF0ZShSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgICRhdHRyaWJ1dGVPcHRpb25zID0gYXJyYXlfdmFsdWVzKGFycmF5X2ZpbHRlcihhcnJheV9tYXAoZnVuY3Rpb24oJHZhbHVlKXsKICAgICAgICAgICAgcmV0dXJuICR2YWx1ZSA+IDAgPyAkdmFsdWUgOiAnJzsKICAgICAgICB9LCAkcmVxdWVzdC0+YXR0cmlidXRlc0RhdGEpKSk7CgogICAgICAgICRwcm9kdWN0ID0gUHJvZHVjdDo6ZmluZChyZXF1ZXN0KCktPmdldCgncHJvZHVjdF9pZCcpKTsKICAgICAgICAkaW52ZW50b3J5RGV0YWlscyA9IEludmVudG9yeURldGFpbHM6OndoZW4oaXNzZXQoYXV0aCgpLT51c2VyKCktPmVtcGxveWVlLT5hc191bml0X2lkKSwgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2hyX3VuaXRfaWQnLGF1dGgoKS0+dXNlcigpLT5lbXBsb3llZS0+YXNfdW5pdF9pZCk7CiAgICAgICAgfSktPndoZXJlKCdwcm9kdWN0X2lkJywgJHByb2R1Y3QtPmlkKS0+Z2V0KCk7CgogICAgICAgIHJldHVybiB2aWV3KCdwbXMuYmFja2VuZC5wYWdlcy5pbnZlbnRvcnkuaW52ZW50b3J5LXN0b2NrLndhcmVob3VzZScsIGNvbXBhY3QoJ3Byb2R1Y3QnLCAnaW52ZW50b3J5RGV0YWlscycsICdhdHRyaWJ1dGVPcHRpb25zJykpOwoKICAgIH0KfQo=