<?php
bolt_decrypt( __FILE__ , 'E4IzrR'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ29tcGFueTsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xTdXBwbGllcnM7Cgp1c2UgQXBwLERCOwp1c2UgSWxsdW1pbmF0ZVxTdXBwb3J0XEZhY2FkZXNcQXV0aDsKdXNlIERhdGFUYWJsZXM7CgpjbGFzcyBTdXBwbGllckJhbGFuY2VDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CgogICAgLyoqCiAgICAgKiBTZXQgZ2xvYmFsIGRhdGEgdGFibGUgaGVhZGVycy4KICAgICAqCiAgICAgKiBAcmV0dXJuIGhlYWRlckNvbHVtbnMKICAgICAqLwogICAgIHB1YmxpYyBmdW5jdGlvbiBoZWFkZXJDb2x1bW5zKCR2YWx1ZT0nJykKICAgICB7CiAgICAgICAgcmV0dXJuIGFycmF5KAogICAgICAgICAgICBbJ1NMJywgJ1NMJ10sCiAgICAgICAgICAgIFsnY29kZScsICdjb2RlJywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsnbmFtZScsICduYW1lJywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsncGhvbmUnLCAncGhvbmUnLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWyd0b3RhbF9iaWxsJywgJ3RvdGFsX2JpbGwnLCAndGV4dC1yaWdodCddLAogICAgICAgICAgICBbJ2JpbGxfcGFpZCcsICdiaWxsX3BhaWQnLCAndGV4dC1yaWdodCddLAogICAgICAgICAgICBbJ25ldF9iaWxsJywgJ25ldF9iaWxsJywgJ3RleHQtcmlnaHQnXSwKICAgICAgICAgICAgWydhZHZhbmNlX3BhaWQnLCAnYWR2YW5jZV9wYWlkJywgJ3RleHQtcmlnaHQnXSwKICAgICAgICAgICAgWyduZXRfZHVlJywgJ25ldF9kdWUnLCAndGV4dC1yaWdodCddLAogICAgICAgICk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGluZGV4KCkKICAgIHsKICAgICAgICAkZGF0ZSA9IHJlcXVlc3QoKS0+aGFzKCdkYXRlJykgJiYgc3RydG90aW1lKHJlcXVlc3QoKS0+Z2V0KCdkYXRlJykpID4gMCA/IGRhdGUoJ1ktbS1kJywgc3RydG90aW1lKHJlcXVlc3QoKS0+Z2V0KCdkYXRlJykpKSA6IGRhdGUoJ1ktbS1kJyk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHJlcXVlc3QoKS0+YWpheCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YXRhYmxlczo6b2YoCiAgICAgICAgICAgICAgICAgICAgU3VwcGxpZXJzOjp3aXRoKFsKICAgICAgICAgICAgICAgICAgICAgICAgJ3JlbFF1b3RhdGlvbnMucmVsUHVyY2hhc2VPcmRlci5yZWxQb0F0dGFjaG1lbnQnLAogICAgICAgICAgICAgICAgICAgICAgICAncmVsUGF5bWVudHMnLAogICAgICAgICAgICAgICAgICAgICAgICAnc3VwcGxpZXJMZWRnZXJzJwogICAgICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAgICAgLT53aGVuKHJlcXVlc3QoKS0+Z2V0KCdjb21wYW55X2lkJykgPiAwLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygncmVsUGF5bWVudHMucmVsUHVyY2hhc2VPcmRlci5Vbml0JywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdjb21wYW55X2lkJywgcmVxdWVzdCgpLT5nZXQoJ2NvbXBhbnlfaWQnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLT53aGVuKCFkYXRhdGFibGVPcmRlcmluZygpLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT5vcmRlcmJ5KCdjb2RlJywgJ2FzYycpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAtPmFkZEluZGV4Q29sdW1uKCkKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCd0b3RhbF9iaWxsJywgZnVuY3Rpb24gKCRzdXBwbGllcikgdXNlKCRkYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgJHRvdGFsX2JpbGwgPSAkc3VwcGxpZXItPnJlbFBheW1lbnRzLT53aGVyZSgndHJhbnNlY3Rpb25fZGF0ZScsICc8PScsICRkYXRlLicgMjM6NTk6NTknKS0+d2hlcmUoJ2JpbGxfdHlwZScsICchPScsICdwby1hZHZhbmNlJyktPnN1bSgnYmlsbF9hbW91bnQnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3lzdGVtTW9uZXlGb3JtYXQoJHRvdGFsX2JpbGwpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdiaWxsX3BhaWQnLCBmdW5jdGlvbiAoJHN1cHBsaWVyKSB1c2UoJGRhdGUpIHsKICAgICAgICAgICAgICAgICAgICAkYmlsbF9wYWlkID0gMDsKICAgICAgICAgICAgICAgICAgICBpZigkc3VwcGxpZXItPnJlbFBheW1lbnRzLT53aGVyZSgndHJhbnNlY3Rpb25fZGF0ZScsICc8PScsICRkYXRlLicgMjM6NTk6NTknKS0+d2hlcmUoJ2JpbGxfdHlwZScsICchPScsICdwby1hZHZhbmNlJyktPmNvdW50KCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkc3VwcGxpZXItPnJlbFBheW1lbnRzLT53aGVyZSgndHJhbnNlY3Rpb25fZGF0ZScsICc8PScsICRkYXRlLicgMjM6NTk6NTknKS0+d2hlcmUoJ2JpbGxfdHlwZScsICchPScsICdwby1hZHZhbmNlJykgYXMgJGtleSA9PiAkcGF5bWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYmlsbF9wYWlkICs9ICRwYXltZW50LT5yZWxTdXBwbGllckxlZGdlcnMtPnN1bSgnZGViaXQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgJGFkdmFuY2VDbGVhcmVkID0gMDsKICAgICAgICAgICAgICAgICAgICBpZigkc3VwcGxpZXItPnB1cmNoYXNlT3JkZXJFbnRyaWVzLT53aGVyZSgndHlwZScsICdhZHZhbmNlLWNsZWFyaW5nJyktPmNvdW50KCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkc3VwcGxpZXItPnB1cmNoYXNlT3JkZXJFbnRyaWVzLT53aGVyZSgndHlwZScsICdhZHZhbmNlLWNsZWFyaW5nJykgYXMgJGtleSA9PiAkZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhZHZhbmNlQ2xlYXJlZCArPSAkZW50LT5lbnRyeS0+ZGViaXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN5c3RlbU1vbmV5Rm9ybWF0KCRiaWxsX3BhaWQrJGFkdmFuY2VDbGVhcmVkKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignbmV0X2JpbGwnLCBmdW5jdGlvbiAoJHN1cHBsaWVyKSB1c2UoJGRhdGUpIHsKICAgICAgICAgICAgICAgICAgICAkdG90YWxfYmlsbCA9ICRzdXBwbGllci0+cmVsUGF5bWVudHMtPndoZXJlKCd0cmFuc2VjdGlvbl9kYXRlJywgJzw9JywgJGRhdGUuJyAyMzo1OTo1OScpLT53aGVyZSgnYmlsbF90eXBlJywgJyE9JywgJ3BvLWFkdmFuY2UnKS0+c3VtKCdiaWxsX2Ftb3VudCcpOwogICAgICAgICAgICAgICAgICAgICRiaWxsX3BhaWQgPSAwOwogICAgICAgICAgICAgICAgICAgIGlmKCRzdXBwbGllci0+cmVsUGF5bWVudHMtPndoZXJlKCd0cmFuc2VjdGlvbl9kYXRlJywgJzw9JywgJGRhdGUuJyAyMzo1OTo1OScpLT53aGVyZSgnYmlsbF90eXBlJywgJyE9JywgJ3BvLWFkdmFuY2UnKS0+Y291bnQoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKCRzdXBwbGllci0+cmVsUGF5bWVudHMtPndoZXJlKCd0cmFuc2VjdGlvbl9kYXRlJywgJzw9JywgJGRhdGUuJyAyMzo1OTo1OScpLT53aGVyZSgnYmlsbF90eXBlJywgJyE9JywgJ3BvLWFkdmFuY2UnKSBhcyAka2V5ID0+ICRwYXltZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRiaWxsX3BhaWQgKz0gJHBheW1lbnQtPnJlbFN1cHBsaWVyTGVkZ2Vycy0+c3VtKCdkZWJpdCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAkYWR2YW5jZUNsZWFyZWQgPSAwOwogICAgICAgICAgICAgICAgICAgIGlmKCRzdXBwbGllci0+cHVyY2hhc2VPcmRlckVudHJpZXMtPndoZXJlKCd0eXBlJywgJ2FkdmFuY2UtY2xlYXJpbmcnKS0+Y291bnQoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKCRzdXBwbGllci0+cHVyY2hhc2VPcmRlckVudHJpZXMtPndoZXJlKCd0eXBlJywgJ2FkdmFuY2UtY2xlYXJpbmcnKSBhcyAka2V5ID0+ICRlbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFkdmFuY2VDbGVhcmVkICs9ICRlbnQtPmVudHJ5LT5kZWJpdDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3lzdGVtTW9uZXlGb3JtYXQoJHRvdGFsX2JpbGwtKCRiaWxsX3BhaWQrJGFkdmFuY2VDbGVhcmVkKSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ2FkdmFuY2VfcGFpZCcsIGZ1bmN0aW9uICgkc3VwcGxpZXIpIHVzZSgkZGF0ZSkgewogICAgICAgICAgICAgICAgICAgICRhZHZhbmNlX3BhaWQgPSAwOwogICAgICAgICAgICAgICAgICAgIGlmKCRzdXBwbGllci0+cmVsUGF5bWVudHMtPndoZXJlKCd0cmFuc2VjdGlvbl9kYXRlJywgJzw9JywgJGRhdGUuJyAyMzo1OTo1OScpLT53aGVyZSgnYmlsbF90eXBlJywgJ3BvLWFkdmFuY2UnKS0+Y291bnQoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKCRzdXBwbGllci0+cmVsUGF5bWVudHMtPndoZXJlKCd0cmFuc2VjdGlvbl9kYXRlJywgJzw9JywgJGRhdGUuJyAyMzo1OTo1OScpLT53aGVyZSgnYmlsbF90eXBlJywgJ3BvLWFkdmFuY2UnKSBhcyAka2V5ID0+ICRwYXltZW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhZHZhbmNlX3BhaWQgKz0gJHBheW1lbnQtPnJlbFN1cHBsaWVyTGVkZ2Vycy0+c3VtKCdkZWJpdCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAkYWR2YW5jZUNsZWFyZWQgPSAwOwogICAgICAgICAgICAgICAgICAgIGlmKCRzdXBwbGllci0+cHVyY2hhc2VPcmRlckVudHJpZXMtPndoZXJlKCd0eXBlJywgJ2FkdmFuY2UtY2xlYXJpbmcnKS0+Y291bnQoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKCRzdXBwbGllci0+cHVyY2hhc2VPcmRlckVudHJpZXMtPndoZXJlKCd0eXBlJywgJ2FkdmFuY2UtY2xlYXJpbmcnKSBhcyAka2V5ID0+ICRlbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFkdmFuY2VDbGVhcmVkICs9ICRlbnQtPmVudHJ5LT5kZWJpdDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3lzdGVtTW9uZXlGb3JtYXQoJGFkdmFuY2VfcGFpZC0kYWR2YW5jZUNsZWFyZWQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCduZXRfZHVlJywgZnVuY3Rpb24gKCRzdXBwbGllcikgdXNlKCRkYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgJHRvdGFsX2JpbGwgPSAkc3VwcGxpZXItPnJlbFBheW1lbnRzLT53aGVyZSgndHJhbnNlY3Rpb25fZGF0ZScsICc8PScsICRkYXRlLicgMjM6NTk6NTknKS0+d2hlcmUoJ2JpbGxfdHlwZScsICchPScsICdwby1hZHZhbmNlJyktPnN1bSgnYmlsbF9hbW91bnQnKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAkYmlsbF9wYWlkID0gMDsKICAgICAgICAgICAgICAgICAgICBpZigkc3VwcGxpZXItPnJlbFBheW1lbnRzLT53aGVyZSgndHJhbnNlY3Rpb25fZGF0ZScsICc8PScsICRkYXRlLicgMjM6NTk6NTknKS0+d2hlcmUoJ2JpbGxfdHlwZScsICchPScsICdwby1hZHZhbmNlJyktPmNvdW50KCkgPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkc3VwcGxpZXItPnJlbFBheW1lbnRzLT53aGVyZSgndHJhbnNlY3Rpb25fZGF0ZScsICc8PScsICRkYXRlLicgMjM6NTk6NTknKS0+d2hlcmUoJ2JpbGxfdHlwZScsICchPScsICdwby1hZHZhbmNlJykgYXMgJGtleSA9PiAkcGF5bWVudCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYmlsbF9wYWlkICs9ICRwYXltZW50LT5yZWxTdXBwbGllckxlZGdlcnMtPnN1bSgnZGViaXQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgJGFkdmFuY2VfcGFpZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgaWYoJHN1cHBsaWVyLT5yZWxQYXltZW50cy0+d2hlcmUoJ3RyYW5zZWN0aW9uX2RhdGUnLCAnPD0nLCAkZGF0ZS4nIDIzOjU5OjU5JyktPndoZXJlKCdiaWxsX3R5cGUnLCAncG8tYWR2YW5jZScpLT5jb3VudCgpID4gMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2goJHN1cHBsaWVyLT5yZWxQYXltZW50cy0+d2hlcmUoJ3RyYW5zZWN0aW9uX2RhdGUnLCAnPD0nLCAkZGF0ZS4nIDIzOjU5OjU5JyktPndoZXJlKCdiaWxsX3R5cGUnLCAncG8tYWR2YW5jZScpIGFzICRrZXkgPT4gJHBheW1lbnQpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFkdmFuY2VfcGFpZCArPSAkcGF5bWVudC0+cmVsU3VwcGxpZXJMZWRnZXJzLT5zdW0oJ2RlYml0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBzeXN0ZW1Nb25leUZvcm1hdCgoJHRvdGFsX2JpbGwtJGJpbGxfcGFpZCktJGFkdmFuY2VfcGFpZCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5yYXdDb2x1bW5zKFtdKQogICAgICAgICAgICAgICAgLT5tYWtlKHRydWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgICAgICd0aXRsZScgPT4gJ1N1cHBsaWVyIEJhbGFuY2VzJywKICAgICAgICAgICAgICAgICdkYXRlJyA9PiAkZGF0ZSwKICAgICAgICAgICAgICAgICdjb21wYW5pZXMnID0+IENvbXBhbnk6OmhhcygncHJvZml0Q2VudHJlcy5jb3N0Q2VudHJlcycpCiAgICAgICAgICAgICAgICAtPndoZXJlSGFzKCd1c2VycycsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3VzZXJfaWQnLCBhdXRoKCktPnVzZXIoKS0+aWQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+Z2V0KCksCiAgICAgICAgICAgICAgICAnaGVhZGVyQ29sdW1ucycgPT4gJHRoaXMtPmhlYWRlckNvbHVtbnMoKSwKICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5zdXBwbGllckJhbGFuY2UuaW5kZXgnLCAkZGF0YSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQp9Cg==