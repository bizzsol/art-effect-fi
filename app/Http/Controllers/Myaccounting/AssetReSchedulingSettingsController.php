<?php
bolt_decrypt( __FILE__ , 'gC7bVg'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ29tcGFueTsKdXNlIERCOwoKY2xhc3MgQXNzZXRSZVNjaGVkdWxpbmdTZXR0aW5nc0NvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyCnsKICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICAgICAndGl0bGUnID0+ICdBc3NldCBSZS1TY2hlZHVsaW5nIFNldHRpbmdzJywKICAgICAgICAgICAgICAgICdhbGwnID0+IGdldEFsbEdyb3VwQW5kTGVkZ2VycyhmYWxzZSwgdHJ1ZSksCiAgICAgICAgICAgICAgICAnY29tcGFuaWVzJyA9PiBDb21wYW55OjpoYXMoJ3Byb2ZpdENlbnRyZXMuY29zdENlbnRyZXMnKQogICAgICAgICAgICAgICAgLT53aGVyZUhhcygndXNlcnMnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCd1c2VyX2lkJywgYXV0aCgpLT51c2VyKCktPmlkKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmdldCgpLAogICAgICAgICAgICBdOwogICAgICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmZpeGVkQXNzZXRzLmFzc2V0UmVTY2hlZHVsaW5nLnNldHRpbmdzJywgJGRhdGEpOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gc3RvcmUoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkcmVxdWVzdC0+dmFsaWRhdGUoWwogICAgICAgICAgICAnb3ZlcmhvdWxpbmdfZXhwZW5zZV9sZWRnZXJfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdvdmVyaG91bGluZ19leHBlbnNlX2xlZGdlcl9pZC4qJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnYWNjaWRlbnRhbF9sb3NzX2xlZGdlcl9pZCcgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ2FjY2lkZW50YWxfbG9zc19sZWRnZXJfaWQuKicgPT4gJ3JlcXVpcmVkJywKICAgICAgICBdKTsKCiAgICAgICAgREI6OmJlZ2luVHJhbnNhY3Rpb24oKTsKICAgICAgICB0cnl7CiAgICAgICAgICAgICRjb21wYW5pZXMgPSBDb21wYW55OjpoYXMoJ3Byb2ZpdENlbnRyZXMuY29zdENlbnRyZXMnKQogICAgICAgICAgICAtPndoZXJlSGFzKCd1c2VycycsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgndXNlcl9pZCcsIGF1dGgoKS0+dXNlcigpLT5pZCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC0+Z2V0KCk7CiAgICAgICAgICAgIGlmKGlzc2V0KCRjb21wYW5pZXNbMF0pKXsKICAgICAgICAgICAgICAgIGZvcmVhY2goJGNvbXBhbmllcyBhcyAkY29tcGFueSl7CiAgICAgICAgICAgICAgICAgICAgJGNvbXBhbnktPm92ZXJob3VsaW5nX2V4cGVuc2VfbGVkZ2VyX2lkID0gJHJlcXVlc3QtPm92ZXJob3VsaW5nX2V4cGVuc2VfbGVkZ2VyX2lkWyRjb21wYW55LT5pZF07CiAgICAgICAgICAgICAgICAgICAgJGNvbXBhbnktPmFjY2lkZW50YWxfbG9zc19sZWRnZXJfaWQgPSAkcmVxdWVzdC0+YWNjaWRlbnRhbF9sb3NzX2xlZGdlcl9pZFskY29tcGFueS0+aWRdOwogICAgICAgICAgICAgICAgICAgICRjb21wYW55LT5zYXZlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aFN1Y2Nlc3MoIkFzc2V0IFJlLVNjaGVkdWxpbmcgU2V0dGluZ3MgaGF2ZSBiZWVuIFVwZGF0ZWQuIik7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIERCOjpyb2xsYmFjaygpOwogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KfQo=