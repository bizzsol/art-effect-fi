<?php
bolt_decrypt( __FILE__ , 'TiN1ca'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcU3VwcGxpZXJzOwp1c2UgXEFwcFxNb2RlbHNcUHVyY2hhc2VcUHVyY2hhc2VPcmRlcjsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xTdXBwbGllclBheW1lbnQ7Cgp1c2UgQXBwLERCOwp1c2UgSWxsdW1pbmF0ZVxTdXBwb3J0XEZhY2FkZXNcQXV0aDsKdXNlIERhdGFUYWJsZXM7CgpjbGFzcyBBZHZhbmNlQ2xlYXJpbmdDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CgogICAgLyoqCiAgICAgKiBTZXQgZ2xvYmFsIGRhdGEgdGFibGUgaGVhZGVycy4KICAgICAqCiAgICAgKiBAcmV0dXJuIGhlYWRlckNvbHVtbnMKICAgICAqLwogICAgIHB1YmxpYyBmdW5jdGlvbiBoZWFkZXJDb2x1bW5zKCR2YWx1ZT0nJykKICAgICB7CiAgICAgICAgcmV0dXJuIGFycmF5KAogICAgICAgICAgICBbJ1NMJywgJ1NMJ10sCiAgICAgICAgICAgIFsnY29tcGFueScsICdjb21wYW55JywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsncHVyY2hhc2Vfb3JkZXInLCAncHVyY2hhc2Vfb3JkZXInLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydzdXBwbGllcicsICdzdXBwbGllcicsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ3RyYW5zYWN0aW9uX2RhdGUnLCAndHJhbnNhY3Rpb25fZGF0ZScsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ3RyYW5zZWN0aW9uX3R5cGUnLCAndHJhbnNlY3Rpb25fdHlwZScsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ2N1cnJlbmN5JywgJ2N1cnJlbmN5JywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsnYmlsbF9hbW91bnQnLCAnYmlsbF9hbW91bnQnLCAndGV4dC1yaWdodCddLAogICAgICAgICAgICBbJ2FkdmFuY2VfYW1vdW50JywgJ2FkdmFuY2VfYW1vdW50JywgJ3RleHQtcmlnaHQnXSwKICAgICAgICAgICAgWydhY3Rpb25zJywgJ2FjdGlvbnMnLCAndGV4dC1jZW50ZXInXSwKICAgICAgICApOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHJlcXVlc3QoKS0+YWpheCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YXRhYmxlczo6b2YoCiAgICAgICAgICAgICAgICAgICAgU3VwcGxpZXJQYXltZW50OjpoYXMoJ3JlbFN1cHBsaWVyTGVkZ2VycycpCiAgICAgICAgICAgICAgICAgICAgLT53aXRoKFsKICAgICAgICAgICAgICAgICAgICAgICAgJ3JlbFB1cmNoYXNlT3JkZXIucmVsUXVvdGF0aW9uLnJlbFN1cHBsaWVycycsCiAgICAgICAgICAgICAgICAgICAgICAgICdyZWxQdXJjaGFzZU9yZGVyLnJlbFF1b3RhdGlvbi5leGNoYW5nZVJhdGUuY3VycmVuY3knLAogICAgICAgICAgICAgICAgICAgICAgICAncmVsU3VwcGxpZXJMZWRnZXJzJywKICAgICAgICAgICAgICAgICAgICAgICAgJ3JlbFB1cmNoYXNlT3JkZXIucmVsU3VwcGxpZXJQYXltZW50cy5yZWxTdXBwbGllckxlZGdlcnMnLAogICAgICAgICAgICAgICAgICAgICAgICAncmVsUHVyY2hhc2VPcmRlci5Vbml0LmNvbXBhbnknCiAgICAgICAgICAgICAgICAgICAgXSkKICAgICAgICAgICAgICAgICAgICAtPndoZXJlSGFzKCdyZWxQdXJjaGFzZU9yZGVyLlVuaXQuY29tcGFueS51c2VycycsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCd1c2VyX2lkJywgYXV0aCgpLT51c2VyKCktPmlkKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+d2hlcmUoJ2lzX2NsZWFyZWQnLCAwKQogICAgICAgICAgICAgICAgICAgIC0+d2hlbighZGF0YXRhYmxlT3JkZXJpbmcoKSwgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+b3JkZXJieSgndXBkYXRlZF9hdCcsICdkZXNjJyk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC0+YWRkSW5kZXhDb2x1bW4oKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignY29tcGFueScsIGZ1bmN0aW9uKCRhZHZhbmNlKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIChpc3NldCgkYWR2YW5jZS0+cmVsUHVyY2hhc2VPcmRlci0+VW5pdC0+Y29tcGFueS0+Y29kZSkgPyAkYWR2YW5jZS0+cmVsUHVyY2hhc2VPcmRlci0+VW5pdC0+Y29tcGFueS0+Y29kZSA6ICcnKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbignY29tcGFueScsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ3JlbFB1cmNoYXNlT3JkZXIuVW5pdC5jb21wYW55JywgZnVuY3Rpb24gKCRxdWVyeSkgdXNlKCRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRxdWVyeS0+d2hlcmUoJ2NvZGUnLCAnTElLRScsICclJy4ka2V5d29yZC4nJScpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbigncHVyY2hhc2Vfb3JkZXInLCBmdW5jdGlvbigkYWR2YW5jZSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICAoaXNzZXQoJGFkdmFuY2UtPnJlbFB1cmNoYXNlT3JkZXItPnJlZmVyZW5jZV9ubykgPyAkYWR2YW5jZS0+cmVsUHVyY2hhc2VPcmRlci0+cmVmZXJlbmNlX25vIDogJycpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdwdXJjaGFzZV9vcmRlcicsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ3JlbFB1cmNoYXNlT3JkZXInLCBmdW5jdGlvbiAoJHF1ZXJ5KSB1c2UoJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXJ5LT53aGVyZSgncmVmZXJlbmNlX25vJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPm9yZGVyQ29sdW1uKCdwdXJjaGFzZV9vcmRlcicsIGZ1bmN0aW9uICgkcXVlcnksICRvcmRlcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBwbGVhc2VTb3J0TWUoJHF1ZXJ5LCAkb3JkZXIsIFB1cmNoYXNlT3JkZXI6OnNlbGVjdCgncHVyY2hhc2Vfb3JkZXJzLnJlZmVyZW5jZV9ubycpCiAgICAgICAgICAgICAgICAgICAgICAgIC0+d2hlcmVDb2x1bW4oJ3B1cmNoYXNlX29yZGVycy5pZCcsICdzdXBwbGllcl9wYXltZW50cy5wdXJjaGFzZV9vcmRlcl9pZCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC0+dGFrZSgxKQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ3N1cHBsaWVyJywgZnVuY3Rpb24oJGFkdmFuY2UpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAgKGlzc2V0KCRhZHZhbmNlLT5yZWxQdXJjaGFzZU9yZGVyLT5yZWxRdW90YXRpb24tPnJlbFN1cHBsaWVycy0+bmFtZSkgPyAkYWR2YW5jZS0+cmVsUHVyY2hhc2VPcmRlci0+cmVsUXVvdGF0aW9uLT5yZWxTdXBwbGllcnMtPm5hbWUuJyAoJy4kYWR2YW5jZS0+cmVsUHVyY2hhc2VPcmRlci0+cmVsUXVvdGF0aW9uLT5yZWxTdXBwbGllcnMtPmNvZGUuJyknIDogJycpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdzdXBwbGllcicsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ3JlbFB1cmNoYXNlT3JkZXIucmVsUXVvdGF0aW9uLnJlbFN1cHBsaWVycycsIGZ1bmN0aW9uICgkcXVlcnkpIHVzZSgka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICAkcXVlcnktPndoZXJlKCduYW1lJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtPm9yV2hlcmUoJ2NvZGUnLCAnTElLRScsICclJy4ka2V5d29yZC4nJScpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+b3JkZXJDb2x1bW4oJ3N1cHBsaWVyJywgZnVuY3Rpb24gKCRxdWVyeSwgJG9yZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsZWFzZVNvcnRNZSgkcXVlcnksICRvcmRlciwgUHVyY2hhc2VPcmRlcjo6c2VsZWN0KCdzdXBwbGllcnMubmFtZScpCiAgICAgICAgICAgICAgICAgICAgICAgIC0+am9pbignc3VwcGxpZXJzJywgJ3N1cHBsaWVycy5pZCcsICc9JywgJ3F1b3RhdGlvbnMuc3VwcGxpZXJfaWQnKQogICAgICAgICAgICAgICAgICAgICAgICAtPmpvaW4oJ3F1b3RhdGlvbnMnLCAncXVvdGF0aW9ucy5pZCcsICc9JywgJ3B1cmNoYXNlX29yZGVycy5xdW90YXRpb25faWQnKQogICAgICAgICAgICAgICAgICAgICAgICAtPndoZXJlQ29sdW1uKCdwdXJjaGFzZV9vcmRlcnMuaWQnLCAnc3VwcGxpZXJfcGF5bWVudHMucHVyY2hhc2Vfb3JkZXJfaWQnKQogICAgICAgICAgICAgICAgICAgICAgICAtPnRha2UoMSkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCd0cmFuc2FjdGlvbl9kYXRlJywgZnVuY3Rpb24oJGFkdmFuY2UpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAgZGF0ZSgnWS1tLWQnLCBzdHJ0b3RpbWUoJGFkdmFuY2UtPnRyYW5zZWN0aW9uX2RhdGUpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbigndHJhbnNhY3Rpb25fZGF0ZScsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3RyYW5zZWN0aW9uX2RhdGUnLCAnTElLRScsICclJy4ka2V5d29yZC4nJScpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+b3JkZXJDb2x1bW4oJ3RyYW5zYWN0aW9uX2RhdGUnLCBmdW5jdGlvbiAoJHF1ZXJ5LCAkb3JkZXIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT5vcmRlckJ5KCd0cmFuc2VjdGlvbl9kYXRlJywgJG9yZGVyKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignY3VycmVuY3knLCBmdW5jdGlvbigkYWR2YW5jZSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICAoaXNzZXQoJGFkdmFuY2UtPnJlbFB1cmNoYXNlT3JkZXItPnJlbFF1b3RhdGlvbi0+ZXhjaGFuZ2VSYXRlLT5jdXJyZW5jeS0+Y29kZSkgPyAkYWR2YW5jZS0+cmVsUHVyY2hhc2VPcmRlci0+cmVsUXVvdGF0aW9uLT5leGNoYW5nZVJhdGUtPmN1cnJlbmN5LT5jb2RlIDogJycpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdjdXJyZW5jeScsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ3JlbFB1cmNoYXNlT3JkZXIucmVsUXVvdGF0aW9uLmV4Y2hhbmdlUmF0ZS5jdXJyZW5jeScsIGZ1bmN0aW9uICgkcXVlcnkpIHVzZSgka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICAkcXVlcnktPndoZXJlKCdjb2RlJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPm9yZGVyQ29sdW1uKCdjdXJyZW5jeScsIGZ1bmN0aW9uICgkcXVlcnksICRvcmRlcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBwbGVhc2VTb3J0TWUoJHF1ZXJ5LCAkb3JkZXIsIFB1cmNoYXNlT3JkZXI6OnNlbGVjdCgnY3VycmVuY2llcy5uYW1lJykKICAgICAgICAgICAgICAgICAgICAgICAgLT5qb2luKCdjdXJyZW5jaWVzJywgJ2N1cnJlbmNpZXMuaWQnLCAnPScsICdleGNoYW5nZV9yYXRlcy5jdXJyZW5jeV9pZCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC0+am9pbignZXhjaGFuZ2VfcmF0ZXMnLCAnZXhjaGFuZ2VfcmF0ZXMuaWQnLCAnPScsICdxdW90YXRpb25zLmV4Y2hhbmdlX3JhdGVfaWQnKQogICAgICAgICAgICAgICAgICAgICAgICAtPmpvaW4oJ3F1b3RhdGlvbnMnLCAncXVvdGF0aW9ucy5pZCcsICc9JywgJ3B1cmNoYXNlX29yZGVycy5xdW90YXRpb25faWQnKQogICAgICAgICAgICAgICAgICAgICAgICAtPndoZXJlQ29sdW1uKCdwdXJjaGFzZV9vcmRlcnMuaWQnLCAnc3VwcGxpZXJfcGF5bWVudHMucHVyY2hhc2Vfb3JkZXJfaWQnKQogICAgICAgICAgICAgICAgICAgICAgICAtPnRha2UoMSkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdiaWxsX2Ftb3VudCcsIGZ1bmN0aW9uKCRhZHZhbmNlKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3lzdGVtTW9uZXlGb3JtYXQoJGFkdmFuY2UtPnJlbFB1cmNoYXNlT3JkZXItPnJlbFN1cHBsaWVyUGF5bWVudHMtPndoZXJlSW4oJ2JpbGxfdHlwZScsIFsncG8nLCAnZ3JuJ10pLT5zdW0oJ2JpbGxfYW1vdW50JykpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdhZHZhbmNlX2Ftb3VudCcsIGZ1bmN0aW9uKCRhZHZhbmNlKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3lzdGVtTW9uZXlGb3JtYXQoJGFkdmFuY2UtPnBheV9hbW91bnQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdhZHZhbmNlX2Ftb3VudCcsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3BheV9hbW91bnQnLCAnTElLRScsICclJy4ka2V5d29yZC4nJScpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+b3JkZXJDb2x1bW4oJ2FkdmFuY2VfYW1vdW50JywgZnVuY3Rpb24gKCRxdWVyeSwgJG9yZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+b3JkZXJCeSgncGF5X2Ftb3VudCcsICRvcmRlcik7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ2FjdGlvbnMnLCBmdW5jdGlvbigkYWR2YW5jZSl7CiAgICAgICAgICAgICAgICAgICAgaWYoJGFkdmFuY2UtPnJlbFB1cmNoYXNlT3JkZXItPnJlbFN1cHBsaWVyUGF5bWVudHMtPndoZXJlSW4oJ2JpbGxfdHlwZScsIFsncG8nLCAnZ3JuJ10pLT5zdW0oJ2JpbGxfYW1vdW50JykgPj0gJGFkdmFuY2UtPmFkdmFuY2VfYW1vdW50KXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8YSBjbGFzcz0iYnRuIGJ0bi14cyBidG4tc3VjY2VzcyIgb25jbGljaz0icnVuQWR2YW5jZUNsZWFyUG9zdGluZ3MoJCh0aGlzKSkiIGRhdGEtYWR2YW5jZS1pZD0iJy4kYWR2YW5jZS0+aWQuJyI+PGkgY2xhc3M9ImxhIGxhLWNoZWNrIj48L2k+Jm5ic3A7UnVuIEFkdmFuY2UgQ2xlYXIgUG9zdGluZ3M8L2E+JzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5yYXdDb2x1bW5zKFsnYWN0aW9ucyddKQogICAgICAgICAgICAgICAgLT5tYWtlKHRydWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgICAgICd0aXRsZScgPT4gJ0FkdmFuY2UgQ2xlYXJpbmdzJywKICAgICAgICAgICAgICAgICdoZWFkZXJDb2x1bW5zJyA9PiAkdGhpcy0+aGVhZGVyQ29sdW1ucygpLAogICAgICAgICAgICBdOwogICAgICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmFkdmFuY2VDbGVhcmluZ3MuaW5kZXgnLCAkZGF0YSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBzdG9yZShSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgIERCOjpiZWdpblRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJ5ewogICAgICAgICAgICAkYWR2YW5jZSA9IFN1cHBsaWVyUGF5bWVudDo6ZmluZE9yRmFpbCgkcmVxdWVzdC0+aWQpOwogICAgICAgICAgICAkYWNjb3VudERlZmF1bHRTZXR0aW5ncyA9IGFjY291bnREZWZhdWx0U2V0dGluZ3MoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgICRpdGVtcyA9IGFycmF5KFsKICAgICAgICAgICAgICAgICdjb3N0X2NlbnRyZV9pZCcgPT4gJGFkdmFuY2UtPnJlbFB1cmNoYXNlT3JkZXItPmNvc3RfY2VudHJlX2lkLAogICAgICAgICAgICAgICAgJ2NoYXJ0X29mX2FjY291bnRfaWQnID0+IChpc3NldCgkYWR2YW5jZS0+cmVsU3VwcGxpZXItPnBheWFibGVfYWNjb3VudF9pZCkgJiYgJGFkdmFuY2UtPnJlbFN1cHBsaWVyLT5wYXlhYmxlX2FjY291bnRfaWQgPiAwID8gJGFkdmFuY2UtPnJlbFN1cHBsaWVyLT5wYXlhYmxlX2FjY291bnRfaWQgOiAkYWNjb3VudERlZmF1bHRTZXR0aW5nc1snc3VwcGxpZXJfcGF5YWJsZV9hY2NvdW50J10pLAogICAgICAgICAgICAgICAgJ2RlYml0JyA9PiAkYWR2YW5jZS0+cGF5X2Ftb3VudCwKICAgICAgICAgICAgICAgICdjcmVkaXQnID0+IDAsCiAgICAgICAgICAgICAgICAnbmFycmF0aW9uJyA9PiAnQWR2YW5jZSBDbGVhcmluZyA6OiBQYXlhYmxlIERlYml0JywKICAgICAgICAgICAgICAgICd0eXBlJyA9PiAnYWR2YW5jZS1jbGVhcmluZycsCiAgICAgICAgICAgICAgICAnc291cmNlJyA9PiAkYWR2YW5jZS0+aWQKICAgICAgICAgICAgXSxbCiAgICAgICAgICAgICAgICAnY29zdF9jZW50cmVfaWQnID0+ICRhZHZhbmNlLT5yZWxQdXJjaGFzZU9yZGVyLT5jb3N0X2NlbnRyZV9pZCwKICAgICAgICAgICAgICAgICdjaGFydF9vZl9hY2NvdW50X2lkJyA9PiAoaXNzZXQoJGFkdmFuY2UtPnJlbFN1cHBsaWVyLT5hZHZhbmNlX2FjY291bnRfaWQpICYmICRhZHZhbmNlLT5yZWxTdXBwbGllci0+YWR2YW5jZV9hY2NvdW50X2lkID4gMCA/ICRhZHZhbmNlLT5yZWxTdXBwbGllci0+YWR2YW5jZV9hY2NvdW50X2lkIDogJGFjY291bnREZWZhdWx0U2V0dGluZ3NbJ3N1cHBsaWVyX2FkdmFuY2VfYWNjb3VudCddKSwKICAgICAgICAgICAgICAgICdkZWJpdCcgPT4gMCwKICAgICAgICAgICAgICAgICdjcmVkaXQnID0+ICRhZHZhbmNlLT5wYXlfYW1vdW50LAogICAgICAgICAgICAgICAgJ25hcnJhdGlvbicgPT4gJ0FkdmFuY2UgQ2xlYXJpbmcgOjogQWR2YW5jZSBDcmVkaXQnLAogICAgICAgICAgICAgICAgJ3R5cGUnID0+ICdhZHZhbmNlLWNsZWFyaW5nJywKICAgICAgICAgICAgICAgICdzb3VyY2UnID0+ICRhZHZhbmNlLT5pZAogICAgICAgICAgICBdKTsKCiAgICAgICAgICAgICRlbnRyeSA9IHNhdmVMZWRnZXJFbnRyaWVzKDUsIGRhdGUoJ1ktbS1kIEg6aTpzJyksIDEsICcnLCAnQWR2YW5jZSBDbGVhcmluZycsICRpdGVtcywgICRhZHZhbmNlLT5yZWxQdXJjaGFzZU9yZGVyLT5yZWxRdW90YXRpb24tPmV4Y2hhbmdlX3JhdGVfaWQsIDAsIDAsIDAsIGdldENvc3RDZW50cmVDb21wYW55KCRhZHZhbmNlLT5yZWxQdXJjaGFzZU9yZGVyLT5jb3N0X2NlbnRyZV9pZCkpOwogICAgICAgICAgICBzYXZlUE9FbnRyeSgkZW50cnksICRhZHZhbmNlLT5zdXBwbGllcl9pZCwgJGFkdmFuY2UtPnB1cmNoYXNlX29yZGVyX2lkLCAnYWR2YW5jZS1jbGVhcmluZycpOwoKICAgICAgICAgICAgJGFkdmFuY2UtPmlzX2NsZWFyZWQgPSAxOwogICAgICAgICAgICAkYWR2YW5jZS0+c2F2ZSgpOwoKICAgICAgICAgICAgREI6OmNvbW1pdCgpOwogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiQWR2YW5jZSBDbGVhcmluZyBQb3N0aW5ncyBoYXMgYmVlbiBwb3N0ZWQgc3VjY2Vzc2Z1bGx5LiIKICAgICAgICAgICAgXSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIERCOjpyb2xsYmFjaygpOwogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgXSk7CiAgICAgICAgfQogICAgfQp9Cg==