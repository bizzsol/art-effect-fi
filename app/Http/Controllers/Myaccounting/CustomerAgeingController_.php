<?php
bolt_decrypt( __FILE__ , 'jmAKFW'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ29tcGFueTsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xQcm9maXRDZW50cmU7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ29zdENlbnRyZTsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xGaXNjYWxZZWFyOwp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEVudHJ5VHlwZTsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xUYWc7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ2hhcnRPZkFjY291bnQ7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcU3ViTGVkZ2VyOwp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEVudHJ5Owp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEVudHJ5SXRlbTsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xFbnRyeUxvZzsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ3VycmVuY3lUeXBlOwp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEN1cnJlbmN5Owp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEV4Y2hhbmdlUmF0ZTsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xGaXNjYWxZZWFyQ2xvc2luZzsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xGaXNjYWxZZWFyQ2xvc2luZ0xlZGdlcjsKCnVzZSBBcHAsREI7CnVzZSBJbGx1bWluYXRlXFN1cHBvcnRcRmFjYWRlc1xBdXRoOwoKY2xhc3MgQ3VzdG9tZXJBZ2VpbmdDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0Q29tcGFuaWVzKCRjb21wYW55X2lkLCAkcHJvZml0X2NlbnRyZV9pZCA9IDAsICRjb2RlID0gbnVsbCwgJHBhZ2luYXRpb24gPSBmYWxzZSwgJHBhZ2UgPSBmYWxzZSkKICAgIHsKICAgICAgICAkbG9ncyA9IEVudHJ5TG9nOjp3aGVyZUhhcygnZW50cnkuaXRlbXMuY29zdENlbnRyZS5wcm9maXRDZW50cmUnLCBmdW5jdGlvbigkcXVlcnkpIHVzZSgkY29tcGFueV9pZCl7CiAgICAgICAgICAgIHJldHVybiAgJHF1ZXJ5LT53aGVyZSgnY29tcGFueV9pZCcsICRjb21wYW55X2lkKTsKICAgICAgICB9KQogICAgICAgIC0+d2hlbigkcHJvZml0X2NlbnRyZV9pZCA+IDAsIGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCRwcm9maXRfY2VudHJlX2lkKXsKICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ2VudHJ5Lml0ZW1zLmNvc3RDZW50cmUnLCBmdW5jdGlvbigkcXVlcnkpIHVzZSgkcHJvZml0X2NlbnRyZV9pZCl7CiAgICAgICAgICAgICAgICByZXR1cm4gICRxdWVyeS0+d2hlcmUoJ3Byb2ZpdF9jZW50cmVfaWQnLCAkcHJvZml0X2NlbnRyZV9pZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pCiAgICAgICAgLT53aGVuKCFlbXB0eSgkY29kZSksIGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCRjb2RlKXsKICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVKc29uQ29udGFpbnMoJ3ZhbHVlJywgWydjb21wYW55X2NvZGUnID0+ICRjb2RlXSk7CiAgICAgICAgfSkKICAgICAgICAtPnNlbGVjdChEQjo6cmF3KCJKU09OX0VYVFJBQ1QodmFsdWUsICckWypdLmNvbXBhbnlfY29kZScpIGFzIGNvZGUsIEpTT05fRVhUUkFDVCh2YWx1ZSwgJyRbKl0uY29tcGFueV9uYW1lJykgYXMgbmFtZSIpKQogICAgICAgIC0+Z3JvdXBCeSgnY29kZScpOwoKICAgICAgICBpZigkcGFnaW5hdGlvbil7CiAgICAgICAgICAgICRudW1iZXIgPSA1MDsKICAgICAgICAgICAgJGxvZ3MgPSAkcGFnZSA/ICRsb2dzLT5wYWdpbmF0ZSgkbnVtYmVyLCBbJyonXSwgJ3BhZ2UnLCAkcGFnZSktPndpdGhRdWVyeVN0cmluZygpIDogJGxvZ3MtPnBhZ2luYXRlKCRudW1iZXIpLT53aXRoUXVlcnlTdHJpbmcoKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgJGxvZ3MgPSAkbG9ncy0+Z2V0KCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAnZGF0YScgPT4gYXJyYXlfdmFsdWVzKGFycmF5X2ZpbHRlcihhcnJheV9tYXAoZnVuY3Rpb24oJGFycmF5KXsKICAgICAgICAgICAgICAgIGlmKGlzc2V0KCRhcnJheVsnY29kZSddKSAmJiBpc3NldCgkYXJyYXlbJ25hbWUnXSkpewogICAgICAgICAgICAgICAgICAgICRkZWNvZGVkQ29kZSA9IGpzb25fZGVjb2RlKCRhcnJheVsnY29kZSddKTsKICAgICAgICAgICAgICAgICAgICAkZGVjb2RlZE5hbWUgPSBqc29uX2RlY29kZSgkYXJyYXlbJ25hbWUnXSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgICAgICAgICAgJ2NvZGUnID0+IGlzc2V0KCRkZWNvZGVkQ29kZVswXSkgPyAkZGVjb2RlZENvZGVbMF0gOiAnJywKICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnID0+IGlzc2V0KCRkZWNvZGVkTmFtZVswXSkgPyAkZGVjb2RlZE5hbWVbMF0gOiAnJwogICAgICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIGNvbGxlY3QoJHBhZ2luYXRpb24gPyAkbG9ncy0+aXRlbXMoKSA6ICRsb2dzKS0+dG9BcnJheSgpKSkpLAogICAgICAgICAgICAnbG9ncycgPT4gJGxvZ3MKICAgICAgICBdOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgaWYocmVxdWVzdCgpLT5oYXMoJ2dldC1jb21wYW5pZXMnKSl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+Z2V0Q29tcGFuaWVzKHJlcXVlc3QoKS0+Z2V0KCdjb21wYW55X2lkJyksIHJlcXVlc3QoKS0+Z2V0KCdwcm9maXRfY2VudHJlX2lkJykpOwogICAgICAgIH0KCiAgICAgICAgJHRpdGxlID0gJ1JlcG9ydCAtIEN1c3RvbWVyIEFnZWluZyc7CgogICAgICAgICRjb21wYW55X2lkID0gcmVxdWVzdCgpLT5oYXMoJ2NvbXBhbnlfaWQnKSA/IHJlcXVlc3QoKS0+Z2V0KCdjb21wYW55X2lkJykgOiAwOwogICAgICAgICRwcm9maXRfY2VudHJlX2lkID0gcmVxdWVzdCgpLT5oYXMoJ3Byb2ZpdF9jZW50cmVfaWQnKSA/IHJlcXVlc3QoKS0+Z2V0KCdwcm9maXRfY2VudHJlX2lkJykgOiAwOwogICAgICAgICRjdXN0b21lcl9jb2RlID0gcmVxdWVzdCgpLT5oYXMoJ2N1c3RvbWVyX2NvZGUnKSA/IHJlcXVlc3QoKS0+Z2V0KCdjdXN0b21lcl9jb2RlJykgOiAnJzsKICAgICAgICAKICAgICAgICAkY2hhcnRfb2ZfYWNjb3VudF9pZCA9IHJlcXVlc3QoKS0+aGFzKCdjaGFydF9vZl9hY2NvdW50X2lkJykgPyByZXF1ZXN0KCktPmdldCgnY2hhcnRfb2ZfYWNjb3VudF9pZCcpIDogW107CiAgICAgICAgJGNoYXJ0X29mX2FjY291bnRfaWQgPSBpc19hcnJheSgkY2hhcnRfb2ZfYWNjb3VudF9pZCkgJiYgaXNzZXQoJGNoYXJ0X29mX2FjY291bnRfaWRbMF0pID8gJGNoYXJ0X29mX2FjY291bnRfaWQgOiAoIWlzX2FycmF5KCRjaGFydF9vZl9hY2NvdW50X2lkKSAmJiAoaW50KSgkY2hhcnRfb2ZfYWNjb3VudF9pZCkgPiAwID8gWyRjaGFydF9vZl9hY2NvdW50X2lkXSA6IFtdKTsKICAgICAgICAkbmFycmF0aW9uID0gcmVxdWVzdCgpLT5oYXMoJ25hcnJhdGlvbicpID8gcmVxdWVzdCgpLT5nZXQoJ25hcnJhdGlvbicpIDogJyc7CgogICAgICAgICRjdXJyZW5jeV9pZCA9IHJlcXVlc3QoKS0+aGFzKCdjdXJyZW5jeV9pZCcpID8gcmVxdWVzdCgpLT5nZXQoJ2N1cnJlbmN5X2lkJykgOiAwOwogICAgICAgICRkYXRlID0gcmVxdWVzdCgpLT5oYXMoJ2RhdGUnKSA/IHJlcXVlc3QoKS0+Z2V0KCdkYXRlJykgOiBkYXRlKCdZLW0tZCcpOwoKICAgICAgICAkY3VzdG9tZXJzID0gJHRoaXMtPmdldENvbXBhbmllcygkY29tcGFueV9pZCwgJHByb2ZpdF9jZW50cmVfaWQsICRjdXN0b21lcl9jb2RlLCB0cnVlLCByZXF1ZXN0KCktPmhhcygncGFnZScpID8gcmVxdWVzdCgpLT5nZXQoJ3BhZ2UnKSA6IGZhbHNlKTsKCiAgICAgICAgJGl0ZW1zID0gREI6OnRhYmxlKCdlbnRyeV9pdGVtcycpCiAgICAgICAgCiAgICAgICAgLT5qb2luKCdlbnRyaWVzJywgJ2VudHJpZXMuaWQnLCAnPScsICdlbnRyeV9pdGVtcy5lbnRyeV9pZCcpCgogICAgICAgIC0+am9pbignZW50cnlfbG9ncycsICdlbnRyeV9sb2dzLmVudHJ5X2lkJywgJz0nLCAnZW50cmllcy5pZCcpCiAgICAgICAgCiAgICAgICAgLT5qb2luKCdleGNoYW5nZV9yYXRlcycsICdleGNoYW5nZV9yYXRlcy5pZCcsICc9JywgJ2VudHJpZXMuZXhjaGFuZ2VfcmF0ZV9pZCcpCiAgICAgICAgCiAgICAgICAgLT5qb2luKCdjb3N0X2NlbnRyZXMnLCAnY29zdF9jZW50cmVzLmlkJywgJz0nLCAnZW50cnlfaXRlbXMuY29zdF9jZW50cmVfaWQnKQogICAgICAgIC0+am9pbigncHJvZml0X2NlbnRyZXMnLCAncHJvZml0X2NlbnRyZXMuaWQnLCAnPScsICdjb3N0X2NlbnRyZXMucHJvZml0X2NlbnRyZV9pZCcpCgogICAgICAgIC0+d2hlcmUoJ2VudHJpZXMuaXNfYXBwcm92ZWQnLCAnYXBwcm92ZWQnKQogICAgICAgIC0+d2hlcmUoJ3Byb2ZpdF9jZW50cmVzLmNvbXBhbnlfaWQnLCAkY29tcGFueV9pZCkKICAgICAgICAtPndoZXJlKCdlbnRyaWVzLmRhdGUnLCAnPD0nLCAkZGF0ZSkKCiAgICAgICAgLT53aGVuKCFlbXB0eSgkbmFycmF0aW9uKSwgZnVuY3Rpb24oJHF1ZXJ5KSB1c2UoJG5hcnJhdGlvbil7CiAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCRuYXJyYXRpb24pewogICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2VudHJpZXMubm90ZXMnLCAnTElLRScsICclJy4kbmFycmF0aW9uLiclJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtPm9yV2hlcmUoJ2VudHJ5X2l0ZW1zLm5hcnJhdGlvbicsICdMSUtFJywgJyUnLiRuYXJyYXRpb24uJyUnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkKCiAgICAgICAgLT53aGVuKCRwcm9maXRfY2VudHJlX2lkID4gMCwgZnVuY3Rpb24oJHF1ZXJ5KSB1c2UoJHByb2ZpdF9jZW50cmVfaWQpewogICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnY29zdF9jZW50cmVzLnByb2ZpdF9jZW50cmVfaWQnLCAkcHJvZml0X2NlbnRyZV9pZCk7CiAgICAgICAgfSkKICAgICAgICAtPndoZW4oJGN1cnJlbmN5X2lkID4gMCwgZnVuY3Rpb24oJHF1ZXJ5KSB1c2UoJGN1cnJlbmN5X2lkKXsKICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2V4Y2hhbmdlX3JhdGVzLmN1cnJlbmN5X2lkJywgJGN1cnJlbmN5X2lkKTsKICAgICAgICB9KTsKCiAgICAgICAgJGN1c3RvbWVyQ29kZXMgPSBjb2xsZWN0KCRjdXN0b21lcnNbJ2RhdGEnXSktPnBsdWNrKCdjb2RlJyktPnRvQXJyYXkoKTsKICAgICAgICBmb3JlYWNoKCRjdXN0b21lckNvZGVzIGFzICRrZXkgPT4gJGNvZGUpewogICAgICAgICAgICBpZigka2V5ID09IDApewogICAgICAgICAgICAgICAgJGl0ZW1zID0gJGl0ZW1zLT53aGVyZUpzb25Db250YWlucygnZW50cnlfbG9ncy52YWx1ZScsIFsnY29tcGFueV9jb2RlJyA9PiAkY29kZV0pOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICRpdGVtcyA9ICRpdGVtcy0+b3JXaGVyZUpzb25Db250YWlucygnZW50cnlfbG9ncy52YWx1ZScsIFsnY29tcGFueV9jb2RlJyA9PiAkY29kZV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgICRpdGVtcyA9ICRpdGVtcy0+c2VsZWN0KFsKICAgICAgICAgICAgJ2VudHJ5X2l0ZW1zLmlkJywKICAgICAgICAgICAgREI6OnJhdygiSlNPTl9FWFRSQUNUKGVudHJ5X2xvZ3MudmFsdWUsICckWypdLmNvbXBhbnlfY29kZScpIGFzIGNvbXBhbnlfY29kZSIpLAogICAgICAgICAgICAnZW50cmllcy5kYXRlJywKICAgICAgICAgICAgJ2VudHJ5X2l0ZW1zLmNoYXJ0X29mX2FjY291bnRfaWQnLAogICAgICAgICAgICAnZW50cnlfaXRlbXMuZGViaXRfY3JlZGl0JywKICAgICAgICAgICAgJ2VudHJ5X2l0ZW1zLmFtb3VudCcsCiAgICAgICAgICAgICdjb3N0X2NlbnRyZXMucHJvZml0X2NlbnRyZV9pZCcKICAgICAgICBdKQogICAgICAgIC0+Z2V0KCk7CgogICAgICAgICRjb21wYW55RW50cmllcyA9IFtdOwogICAgICAgIGlmKHJlcXVlc3QoKS0+aGFzKCdyZXBvcnRfdHlwZScpKXsKICAgICAgICAgICAgaWYoaXNzZXQoJGN1c3RvbWVyc1snZGF0YSddKSAmJiBpc19hcnJheSgkY3VzdG9tZXJzWydkYXRhJ10pICYmIGlzX2FycmF5KCRjdXN0b21lcnNbJ2RhdGEnXSkpewogICAgICAgICAgICAgICAgZm9yZWFjaCAoJGN1c3RvbWVyc1snZGF0YSddIGFzICRrZXkgPT4gJGN1c3RvbWVyKSB7CiAgICAgICAgICAgICAgICAgICAgaWYoaXNzZXQoJGN1c3RvbWVyWydjb2RlJ10pKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGNvbXBhbnlFbnRyaWVzWyRjdXN0b21lclsnY29kZSddXSA9ICRpdGVtcy0+ZmlsdGVyKGZ1bmN0aW9uKCRpdGVtKSB1c2UgKCRjdXN0b21lcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmlwb3MoJGl0ZW0tPmNvbXBhbnlfY29kZSwgJGN1c3RvbWVyWydjb2RlJ10pICE9PSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSktPnZhbHVlcygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJGNvbXBhbmllcyA9IENvbXBhbnk6OmhhcygncHJvZml0Q2VudHJlcy5jb3N0Q2VudHJlcycpCiAgICAgICAgLT53aXRoKFsKICAgICAgICAgICAgJ3Byb2ZpdENlbnRyZXMnID0+IGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCRpdGVtcyl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUluKCdpZCcsICRpdGVtcy0+cGx1Y2soJ3Byb2ZpdF9jZW50cmVfaWQnKS0+dG9BcnJheSgpKTsKICAgICAgICAgICAgfQogICAgICAgIF0pCiAgICAgICAgLT53aGVyZUhhcygndXNlcnMnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgndXNlcl9pZCcsIGF1dGgoKS0+dXNlcigpLT5pZCk7CiAgICAgICAgfSkKICAgICAgICAtPmdldCgpOwoKICAgICAgICBpZihyZXF1ZXN0KCktPmhhcygncmVwb3J0X3R5cGUnKSl7CiAgICAgICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAgICAgJ3RpdGxlJyA9PiAkdGl0bGUsCiAgICAgICAgICAgICAgICAnZGF0ZScgPT4gJGRhdGUsCiAgICAgICAgICAgICAgICAncHJvZml0Q2VudHJlcycgPT4gUHJvZml0Q2VudHJlOjp3aGVyZSgnY29tcGFueV9pZCcsICRjb21wYW5pZXMtPmZpcnN0KCktPmlkKS0+b3JkZXJCeSgnY29kZScsICdhc2MnKS0+Z2V0KCksCiAgICAgICAgICAgICAgICAnY3VzdG9tZXJzJyA9PiBjb2xsZWN0KCRjdXN0b21lcnNbJ2RhdGEnXSksCiAgICAgICAgICAgICAgICAncGFnaW5hdGUnID0+ICRjdXN0b21lcnNbJ2xvZ3MnXSwKICAgICAgICAgICAgICAgICd0aGlzX2NvbXBhbnknID0+ICRjb21wYW5pZXMtPndoZXJlKCdpZCcsICRjb21wYW55X2lkKS0+Zmlyc3QoKSwKICAgICAgICAgICAgICAgICdjb21wYW55RW50cmllcycgPT4gJGNvbXBhbnlFbnRyaWVzLAogICAgICAgICAgICAgICAgJ3NlYXJjaEFjY291bnRzJyA9PiBDaGFydE9mQWNjb3VudDo6d2l0aChbCiAgICAgICAgICAgICAgICAgICAgJ2FjY291bnRHcm91cCcKICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAtPndoZXJlSW4oJ2lkJywgJGNoYXJ0X29mX2FjY291bnRfaWQpCiAgICAgICAgICAgICAgICAtPmdldCgpCiAgICAgICAgICAgIF07CgogICAgICAgICAgICBpZihyZXF1ZXN0KCktPmdldCgncmVwb3J0X3R5cGUnKSA9PSAncGRmJyl7CiAgICAgICAgICAgICAgICByZXR1cm4gdmlld01QREYoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5yZXBvcnRzLmN1c3RvbWVyQWdlaW5nLnBkZicsICRkYXRhLCAkdGl0bGUsICR0aXRsZSwgJ2E0JywgJ1AnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYocmVxdWVzdCgpLT5nZXQoJ3JlcG9ydF90eXBlJykgPT0gJ2V4Y2VsJyl7CiAgICAgICAgICAgICAgICByZXR1cm4gZG93bmxvYWRFeGNlbCgnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLnJlcG9ydHMuY3VzdG9tZXJBZ2VpbmcuZXhjZWwnLCAkZGF0YSwgJHRpdGxlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYocmVxdWVzdCgpLT5nZXQoJ3JlcG9ydF90eXBlJykgPT0gJ3JlcG9ydCcpewogICAgICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5yZXBvcnRzLmN1c3RvbWVyQWdlaW5nLnJlcG9ydCcsICRkYXRhKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGFsbCA9IGdldEFsbEdyb3VwQW5kTGVkZ2VycyhmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgICRnZXRBY3RpdmVGaXNjYWxZZWFyID0gZ2V0QWN0aXZlRmlzY2FsWWVhcigkY29tcGFueV9pZCk7CiAgICAgICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAgICAgJ3RpdGxlJyA9PiAkdGl0bGUsCiAgICAgICAgICAgICAgICAnZGF0ZScgPT4gJGRhdGUsCiAgICAgICAgICAgICAgICAnYWNjb3VudERlZmF1bHRTZXR0aW5ncycgPT4gYWNjb3VudERlZmF1bHRTZXR0aW5ncygpLAogICAgICAgICAgICAgICAgJ2N1cnJlbmN5JyA9PiBDdXJyZW5jeTo6ZmluZCgkY3VycmVuY3lfaWQpLAogICAgICAgICAgICAgICAgJ2N1cnJlbmN5VHlwZXMnID0+IEN1cnJlbmN5VHlwZTo6d2l0aChbJ2N1cnJlbmNpZXMnXSktPmdldCgpLAogICAgICAgICAgICAgICAgJ2NvbXBhbmllcycgPT4gJGNvbXBhbmllcywKICAgICAgICAgICAgICAgICdjaGFydE9mQWNjb3VudHNPcHRpb25zJyA9PiBjaGFydE9mQWNjb3VudHNPcHRpb25zKFtdLCAwLCAwLCAkYWxsLCBmYWxzZSwgJ3llcycsIGZhbHNlLCBbJGNvbXBhbnlfaWRdLCB0cnVlLCBnZXRMZWRnZXJCYWxhbmNlcygkYWxsLCAkY29tcGFueV9pZCwgJGdldEFjdGl2ZUZpc2NhbFllYXItPmlkKSksCiAgICAgICAgICAgIF07CgogICAgICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLnJlcG9ydHMuY3VzdG9tZXJBZ2VpbmcuaW5kZXgnLCAkZGF0YSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIGlmKHJlcXVlc3QoKS0+aGFzKCdyZXBvcnRfdHlwZScpICYmIHJlcXVlc3QoKS0+Z2V0KCdyZXBvcnRfdHlwZScpID09ICdyZXBvcnQnKXsKICAgICAgICAgICAgICAgIHJldHVybiAkdGgtPmdldE1lc3NhZ2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9Cn0K