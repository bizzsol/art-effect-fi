<?php
bolt_decrypt( __FILE__ , 'k0MZyE'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nXEZpeGVkQXNzZXRzOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBBcHBcTW9kZWxzXEZpeGVkQXNzZXRzXEZpeGVkQXNzZXRCYXRjaDsKdXNlIEFwcFxNb2RlbHNcRml4ZWRBc3NldHNcRml4ZWRBc3NldEJhdGNoSXRlbTsKdXNlIEFwcFxNb2RlbHNcRml4ZWRBc3NldHNcRml4ZWRBc3NldEJhdGNoSXRlbURlcHJlY2lhdGlvbjsKdXNlIEFwcFxNb2RlbHNcRml4ZWRBc3NldHNcRml4ZWRBc3NldEJhdGNoVXNlcjsKdXNlIEFwcFxVc2VyOwp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcQ2F0ZWdvcnk7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xQcm9kdWN0Owp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ29tcGFueTsKCnVzZSBBcHAsIERCLCBEYXRhVGFibGVzOwp1c2UgSWxsdW1pbmF0ZVxTdXBwb3J0XEZhY2FkZXNcQXV0aDsKCmNsYXNzIERlcHJlY2lhdGlvbkJvb2tDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICBwdWJsaWMgZnVuY3Rpb24gaGVhZGVyQ29sdW1ucygkdmFsdWU9JycpewogICAgICAgIHJldHVybiBhcnJheSgKICAgICAgICAgICAgWydTTCcsICdTTCddLAogICAgICAgICAgICBbJ2NvbXBhbnknLCAnY29tcGFueScsJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsnYXNzZXQnLCAnYXNzZXQnLCd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ0dSTicsICdHUk4nLCd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ2JhdGNoX2lkJywgJ2JhdGNoX2lkJywndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydhc3NldF9jb2RlJywgJ2Fzc2V0X2NvZGUnLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydkZXByZWNpYXRpb25fcmF0ZScsICdkZXByZWNpYXRpb25fcmF0ZScsICd0ZXh0LXJpZ2h0J10sIAogICAgICAgICAgICBbJ2N1cnJlbmN5JywgJ2N1cnJlbmN5JywgJ3RleHQtY2VudGVyJ10sIAogICAgICAgICAgICBbJ2Ftb3VudCcsICdhbW91bnQnLCAndGV4dC1yaWdodCddLCAKICAgICAgICApOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgJGZyb20gPSAocmVxdWVzdCgpLT5oYXMoJ3llYXInKSAmJiByZXF1ZXN0KCktPmdldCgneWVhcicpID4gMCA/IGRhdGUoJ1ktbS0wMScsIHN0cnRvdGltZShyZXF1ZXN0KCktPmdldCgneWVhcicpLictJy5yZXF1ZXN0KCktPmdldCgnbW9udGgnKSkpIDogJycpOwogICAgICAgICR0byA9IChyZXF1ZXN0KCktPmhhcygneWVhcicpICYmIHJlcXVlc3QoKS0+Z2V0KCd5ZWFyJykgPiAwID8gZGF0ZSgnWS1tLXQnLCBzdHJ0b3RpbWUocmVxdWVzdCgpLT5nZXQoJ3llYXInKS4nLScuIHJlcXVlc3QoKS0+Z2V0KCdtb250aCcpKSkgOiAnJyk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHJlcXVlc3QoKS0+YWpheCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVRhYmxlczo6b2YoCiAgICAgICAgICAgICAgICAgICAgRml4ZWRBc3NldEJhdGNoSXRlbTo6d2l0aChbCiAgICAgICAgICAgICAgICAgICAgICAgICdmaW5hbEFzc2V0LmF0dHJpYnV0ZXMuYXR0cmlidXRlT3B0aW9uLmF0dHJpYnV0ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICdiYXRjaC5nb29kc1JlY2VpdmVkSXRlbXNTdG9ja0luLnJlbEdvb2RzUmVjZWl2ZWRJdGVtcy5yZWxHb29kc1JlY2VpdmVkTm90ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICd1c2Vycy51c2VyJywgJ2N1cnJlbnRVc2VyLnVzZXInLAoKICAgICAgICAgICAgICAgICAgICAgICAgJ2JhdGNoLmdvb2RzUmVjZWl2ZWRJdGVtc1N0b2NrSW4ucmVsUHVyY2hhc2VPcmRlci5yZWxRdW90YXRpb24uZXhjaGFuZ2VSYXRlLmN1cnJlbmN5JywKICAgICAgICAgICAgICAgICAgICAgICAgJ2RlcHJlY2lhdGlvbnMnLAoKICAgICAgICAgICAgICAgICAgICAgICAgJ2JhdGNoLmNvc3RDZW50cmUucHJvZml0Q2VudHJlLmNvbXBhbnknCgogICAgICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAgICAgLT53aGVuKHJlcXVlc3QoKS0+Z2V0KCdjb21wYW55X2lkJykgPiAwLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygnYmF0Y2guY29zdENlbnRyZS5wcm9maXRDZW50cmUnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2NvbXBhbnlfaWQnLCByZXF1ZXN0KCktPmdldCgnY29tcGFueV9pZCcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAgICAgLT53aGVuKHJlcXVlc3QoKS0+Z2V0KCdjb21wYW55X2lkJykgPD0gMCwgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ2JhdGNoLmNvc3RDZW50cmUucHJvZml0Q2VudHJlJywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSW4oJ2NvbXBhbnlfaWQnLCBhdXRoKCktPnVzZXIoKS0+Y29tcGFuaWVzLT5wbHVjaygnY29tcGFueV9pZCcpLT50b0FycmF5KCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+d2hlbihzdHJ0b3RpbWUoJGZyb20pID4gMCAmJiBzdHJ0b3RpbWUoJHRvKSA+IDAsIGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCRmcm9tLCAkdG8pewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygnZGVwcmVjaWF0aW9ucycsIGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCRmcm9tLCAkdG8pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2Zyb20nLCAkZnJvbSktPndoZXJlKCd0bycsICR0byk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLT5ncm91cEJ5KCdhc3NldF9jb2RlJykKICAgICAgICAgICAgICAgICAgICAtPndoZW4oIWRhdGF0YWJsZU9yZGVyaW5nKCksIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPm9yZGVyYnkoJ2lkJywgJ2Rlc2MnKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLT5hZGRJbmRleENvbHVtbigpCgogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ2NvbXBhbnknLCBmdW5jdGlvbigkaXRlbSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzc2V0KCRpdGVtLT5iYXRjaC0+Y29zdENlbnRyZS0+cHJvZml0Q2VudHJlLT5jb21wYW55LT5jb2RlKSA/ICRpdGVtLT5iYXRjaC0+Y29zdENlbnRyZS0+cHJvZml0Q2VudHJlLT5jb21wYW55LT5jb2RlIDogJyc7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5maWx0ZXJDb2x1bW4oJ2NvbXBhbnknLCBmdW5jdGlvbiAoJHF1ZXJ5LCAka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSGFzKCdiYXRjaC5jb3N0Q2VudHJlLnByb2ZpdENlbnRyZS5jb21wYW55JywgZnVuY3Rpb24gKCRxdWVyeSkgdXNlKCRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRxdWVyeS0+d2hlcmUoJ2NvZGUnLCAnTElLRScsICclJy4ka2V5d29yZC4nJScpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignYXNzZXQnLCBmdW5jdGlvbigkaXRlbSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzc2V0KCRpdGVtLT5maW5hbEFzc2V0LT5uYW1lKSA/ICRpdGVtLT5maW5hbEFzc2V0LT5uYW1lLicgJy5nZXRQcm9kdWN0QXR0cmlidXRlc0Zhc3RlcigkaXRlbS0+ZmluYWxBc3NldCkgOiAnJzsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbignYXNzZXQnLCBmdW5jdGlvbiAoJHF1ZXJ5LCAka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSGFzKCdmaW5hbEFzc2V0JywgZnVuY3Rpb24gKCRxdWVyeSkgdXNlKCRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRxdWVyeS0+d2hlcmUoJ25hbWUnLCAnTElLRScsICclJy4ka2V5d29yZC4nJScpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdHUk4nLCBmdW5jdGlvbigkaXRlbSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzc2V0KCRpdGVtLT5iYXRjaC0+Z29vZHNSZWNlaXZlZEl0ZW1zU3RvY2tJbi0+cmVsR29vZHNSZWNlaXZlZEl0ZW1zLT5yZWxHb29kc1JlY2VpdmVkTm90ZS0+Z3JuX3JlZmVyZW5jZV9ubykgPyAkaXRlbS0+YmF0Y2gtPmdvb2RzUmVjZWl2ZWRJdGVtc1N0b2NrSW4tPnJlbEdvb2RzUmVjZWl2ZWRJdGVtcy0+cmVsR29vZHNSZWNlaXZlZE5vdGUtPmdybl9yZWZlcmVuY2Vfbm8gOiAnJzsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbignR1JOJywgZnVuY3Rpb24gKCRxdWVyeSwgJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygnYmF0Y2guZ29vZHNSZWNlaXZlZEl0ZW1zU3RvY2tJbi5yZWxHb29kc1JlY2VpdmVkSXRlbXMucmVsR29vZHNSZWNlaXZlZE5vdGUnLCBmdW5jdGlvbiAoJHF1ZXJ5KSB1c2UoJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXJ5LT53aGVyZSgnZ3JuX3JlZmVyZW5jZV9ubycsICdMSUtFJywgJyUnLiRrZXl3b3JkLiclJyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ2JhdGNoX2lkJywgZnVuY3Rpb24oJGl0ZW0pewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpc3NldCgkaXRlbS0+YmF0Y2gtPmJhdGNoKT8kaXRlbS0+YmF0Y2gtPmJhdGNoOicnOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdiYXRjaF9pZCcsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ2JhdGNoJywgZnVuY3Rpb24gKCRxdWVyeSkgdXNlKCRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRxdWVyeS0+d2hlcmUoJ2JhdGNoJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignYXNzZXRfY29kZScsIGZ1bmN0aW9uKCRpdGVtKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNzZXQoJGl0ZW0tPmFzc2V0X2NvZGUpPyRpdGVtLT5hc3NldF9jb2RlOicnOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdhc3NldF9jb2RlJywgZnVuY3Rpb24gKCRxdWVyeSwgJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnYXNzZXRfY29kZScsICdMSUtFJywgJyUnLiRrZXl3b3JkLiclJyk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ2RlcHJlY2lhdGlvbl9yYXRlJywgZnVuY3Rpb24oJGl0ZW0pewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkaXRlbS0+ZGVwcmVjaWF0aW9uX3JhdGUuJyUnOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdkZXByZWNpYXRpb25fcmF0ZScsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2RlcHJlY2lhdGlvbl9yYXRlJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignY3VycmVuY3knLCBmdW5jdGlvbigkaXRlbSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRpdGVtLT5iYXRjaC0+Z29vZHNSZWNlaXZlZEl0ZW1zU3RvY2tJbi0+cmVsUHVyY2hhc2VPcmRlci0+cmVsUXVvdGF0aW9uLT5leGNoYW5nZVJhdGUtPmN1cnJlbmN5LT5jb2RlOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdjdXJyZW5jeScsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ2JhdGNoLmdvb2RzUmVjZWl2ZWRJdGVtc1N0b2NrSW4ucmVsUHVyY2hhc2VPcmRlci5yZWxRdW90YXRpb24uZXhjaGFuZ2VSYXRlLmN1cnJlbmN5JywgZnVuY3Rpb24gKCRxdWVyeSkgdXNlKCRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRxdWVyeS0+d2hlcmUoJ2NvZGUnLCAnTElLRScsICclJy4ka2V5d29yZC4nJScpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdhbW91bnQnLCBmdW5jdGlvbigkaXRlbSkgdXNlKCRmcm9tLCAkdG8pewogICAgICAgICAgICAgICAgICAgICRhbW91bnQgPSBGaXhlZEFzc2V0QmF0Y2hJdGVtRGVwcmVjaWF0aW9uOjp3aGVyZUhhcygnYmF0Y2hJdGVtJywgZnVuY3Rpb24oJHF1ZXJ5KSB1c2UoJGl0ZW0pewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnYXNzZXRfY29kZScsICRpdGVtLT5hc3NldF9jb2RlKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+d2hlbihzdHJ0b3RpbWUoJGZyb20pID4gMCAmJiBzdHJ0b3RpbWUoJHRvKSA+IDAsIGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCRmcm9tLCAkdG8pewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnZnJvbScsICRmcm9tKS0+d2hlcmUoJ3RvJywgJHRvKTsKICAgICAgICAgICAgICAgICAgICB9KS0+c3VtKCdhbW91bnQnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3lzdGVtTW9uZXlGb3JtYXQoJGFtb3VudCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5yYXdDb2x1bW5zKFtdKQogICAgICAgICAgICAgICAgLT5tYWtlKHRydWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmZpeGVkQXNzZXRzLmRlcHJlY2lhdGlvbkJvb2suaW5kZXgnLCBbCiAgICAgICAgICAgICAgICAndGl0bGUnID0+ICdEZXByZWNpYXRpb24gYm9vaycsCiAgICAgICAgICAgICAgICAnY29tcGFuaWVzJyA9PiBDb21wYW55OjpoYXMoJ3Byb2ZpdENlbnRyZXMuY29zdENlbnRyZXMnKQogICAgICAgICAgICAgICAgLT53aGVyZUhhcygndXNlcnMnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCd1c2VyX2lkJywgYXV0aCgpLT51c2VyKCktPmlkKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmdldCgpLAogICAgICAgICAgICAgICAgJ2Zyb20nID0+ICRmcm9tLAogICAgICAgICAgICAgICAgJ3RvJyA9PiAkdG8sCiAgICAgICAgICAgICAgICAnaGVhZGVyQ29sdW1ucycgPT4gJHRoaXMtPmhlYWRlckNvbHVtbnMoKSwKICAgICAgICAgICAgICAgICd5ZWFycycgPT4gYXJyYXlfbWFwKGZ1bmN0aW9uKCRpdGVtKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZSgnWScsIHN0cnRvdGltZSgkaXRlbSkpOwogICAgICAgICAgICAgICAgfSwgRml4ZWRBc3NldEJhdGNoSXRlbURlcHJlY2lhdGlvbjo6Z3JvdXBCeShEQjo6cmF3KCdzdWJzdHIoYGZyb21gLCAxLCA0KScpKS0+cGx1Y2soJ2Zyb20nKS0+dG9BcnJheSgpKSwKICAgICAgICAgICAgXSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBjcmVhdGUoKQogICAgewogICAgICAgIGlmKHJlcXVlc3QoKS0+Z2V0KCdhY3Rpb24nKSA9PSAnYmF0Y2hlcycpewogICAgICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgICAgICdiYXRjaGVzJyA9PiBGaXhlZEFzc2V0QmF0Y2g6OmhhcygnaXRlbXMnKQogICAgICAgICAgICAgICAgLT53aGVuKHJlcXVlc3QoKS0+Z2V0KCdwcm9kdWN0X2lkJykgPiAwLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSGFzKCdyZXF1aXNpdGlvbkRlbGl2ZXJ5SXRlbScsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdwcm9kdWN0X2lkJywgcmVxdWVzdCgpLT5nZXQoJ3Byb2R1Y3RfaWQnKSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5nZXQoKSwKICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5maXhlZEFzc2V0cy5kZXByZWNpYXRpb25Cb29rLmJhdGNoZXMnLCAkZGF0YSk7CiAgICAgICAgfWVsc2VpZihyZXF1ZXN0KCktPmdldCgnYWN0aW9uJykgPT0gJ2l0ZW1zJyl7CiAgICAgICAgICAgICRmcm9tID0gMDsKICAgICAgICAgICAgJHRvID0gMDsKICAgICAgICAgICAgaWYocmVxdWVzdCgpLT5nZXQoJ3llYXInKSA+IDAgJiYgcmVxdWVzdCgpLT5nZXQoJ21vbnRoJykgPiAwKXsKICAgICAgICAgICAgICAgICRmcm9tID0gZGF0ZSgnWS1tLTAxJywgc3RydG90aW1lKHJlcXVlc3QoKS0+Z2V0KCd5ZWFyJykuJy0nLnJlcXVlc3QoKS0+Z2V0KCdtb250aCcpKSk7CiAgICAgICAgICAgICAgICAkdG8gPSBkYXRlKCdZLW0tdCcsIHN0cnRvdGltZShyZXF1ZXN0KCktPmdldCgneWVhcicpLictJy5yZXF1ZXN0KCktPmdldCgnbW9udGgnKSkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkaXRlbXMgPSBGaXhlZEFzc2V0QmF0Y2hJdGVtOjp3aXRoKFsnYmF0Y2gnLCdiYXRjaC5yZXF1aXNpdGlvbkRlbGl2ZXJ5SXRlbScsJ2JhdGNoLnJlcXVpc2l0aW9uRGVsaXZlcnlJdGVtLnByb2R1Y3QnLCdiYXRjaC5yZXF1aXNpdGlvbkRlbGl2ZXJ5SXRlbS5yZWxSZXF1aXNpdGlvbkRlbGl2ZXJ5LnJlbFJlcXVpc2l0aW9uLnB1cmNoYXNlT3JkZXJzLnB1cmNoYXNlT3JkZXIucmVsUXVvdGF0aW9uLmV4Y2hhbmdlUmF0ZS5jdXJyZW5jeSddKQogICAgICAgICAgICAtPndoZW4oc3RydG90aW1lKCRmcm9tKSA+IDAgJiYgc3RydG90aW1lKCR0bykgPiAwLCBmdW5jdGlvbigkcXVlcnkpIHVzZSgkZnJvbSwgJHRvKXsKICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSGFzKCdkZXByZWNpYXRpb25zJywgZnVuY3Rpb24oJHF1ZXJ5KSB1c2UoJGZyb20sICR0byl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2Zyb20nLCAkZnJvbSktPndoZXJlKCd0bycsICR0byk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLT53aGVuKHJlcXVlc3QoKS0+Z2V0KCdwcm9kdWN0X2lkJykgPiAwLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ2JhdGNoLnJlcXVpc2l0aW9uRGVsaXZlcnlJdGVtJywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgncHJvZHVjdF9pZCcsIHJlcXVlc3QoKS0+Z2V0KCdwcm9kdWN0X2lkJykpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC0+d2hlbihyZXF1ZXN0KCktPmdldCgnZml4ZWRfYXNzZXRfYmF0Y2hfaWQnKSA+IDAsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnZml4ZWRfYXNzZXRfYmF0Y2hfaWQnLCByZXF1ZXN0KCktPmdldCgnZml4ZWRfYXNzZXRfYmF0Y2hfaWQnKSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC0+d2hlbighZW1wdHkocmVxdWVzdCgpLT5nZXQoJ2Fzc2V0X2NvZGUnKSksIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnYXNzZXRfY29kZScsICdMSUtFJywgJyUnLnJlcXVlc3QoKS0+Z2V0KCdhc3NldF9jb2RlJykuJyUnKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLT5nZXQoKTsKCiAgICAgICAgICAgIGZvcmVhY2ggKCRpdGVtcyBhcyAka2V5PT4kaXRlbSl7CiAgICAgICAgICAgICAgJGl0ZW1bJ2RlcHJlY2lhdGVkJ10gPSBcQXBwXE1vZGVsc1xGaXhlZEFzc2V0c1xGaXhlZEFzc2V0QmF0Y2hJdGVtRGVwcmVjaWF0aW9uOjp3aGVyZSgnZml4ZWRfYXNzZXRfYmF0Y2hfaXRlbV9pZCcsICRpdGVtLT5pZCkKICAgICAgICAgICAgICAgICAgICAtPndoZW4oc3RydG90aW1lKCRmcm9tKSA+IDAgJiYgc3RydG90aW1lKCR0bykgPiAwLCBmdW5jdGlvbigkcXVlcnkpIHVzZSgkZnJvbSwgJHRvKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2Zyb20nLCAkZnJvbSktPndoZXJlKCd0bycsICR0byk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAtPnN1bSgnYW1vdW50Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAgICAgJ2Zyb20nID0+ICRmcm9tLAogICAgICAgICAgICAgICAgJ3RvJyA9PiAkdG8sCiAgICAgICAgICAgICAgICAnaXRlbXMnID0+ICRpdGVtcywKICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5maXhlZEFzc2V0cy5kZXByZWNpYXRpb25Cb29rLml0ZW1zJywgJGRhdGEpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gc3RvcmUoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gc2hvdygkaWQpCiAgICB7CgogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBlZGl0KCRpZCkKICAgIHsKICAgICAgICAKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlKFJlcXVlc3QgJHJlcXVlc3QsICRpZCkKICAgIHsKICAgICAgICAKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZGVzdHJveSgkaWQpCiAgICB7CiAgICAgICAgCiAgICB9Cn0K