<?php
bolt_decrypt( __FILE__ , 's1k8uD'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nXEZpeGVkQXNzZXRzOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xDb21wYW55Owp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcUHVyY2hhc2VcUHVyY2hhc2VPcmRlcjsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFB1cmNoYXNlXFB1cmNoYXNlT3JkZXJJdGVtOwp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcUHJvZHVjdDsKdXNlIEFwcFxNb2RlbHNcRml4ZWRBc3NldHNcQXNzZXRDb3N0aW5nRW50cnk7CnVzZSBBcHBcTW9kZWxzXEZpeGVkQXNzZXRzXEZpeGVkQXNzZXRCYXRjaDsKdXNlIEFwcFxNb2RlbHNcRml4ZWRBc3NldHNcRml4ZWRBc3NldEJhdGNoSXRlbTsKdXNlIEFwcFxNb2RlbHNcRml4ZWRBc3NldHNcRml4ZWRBc3NldEJhdGNoSXRlbVVzZXI7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xSZXF1aXNpdGlvbkRlbGl2ZXJ5Owp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcUmVxdWlzaXRpb25EZWxpdmVyeUl0ZW07CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xRdW90YXRpb25zSXRlbXM7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xDb3N0Q2VudHJlOwp1c2UgQXBwXE1vZGVsc1xGaXhlZEFzc2V0c1xGaXhlZEFzc2V0TG9jYXRpb247Cgp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcR3JuXEdvb2RzUmVjZWl2ZWRJdGVtU3RvY2tJbjsKCnVzZSBBcHAsIERCOwp1c2UgSWxsdW1pbmF0ZVxTdXBwb3J0XEZhY2FkZXNcQXV0aDsKCmNsYXNzIENXSVB0b0Fzc2V0Q29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIKewogICAgcHVibGljIGZ1bmN0aW9uIGluZGV4KCkKICAgIHsKICAgICAgICAkdGl0bGUgPSAnQ1dJUCB0byBBc3NldCc7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICAgICAndGl0bGUnID0+ICR0aXRsZSwKICAgICAgICAgICAgICAgICdjb21wYW5pZXMnID0+IENvbXBhbnk6OmhhcygncHJvZml0Q2VudHJlcy5jb3N0Q2VudHJlcycpCiAgICAgICAgICAgICAgICAtPndoZXJlSGFzKCd1c2VycycsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3VzZXJfaWQnLCBhdXRoKCktPnVzZXIoKS0+aWQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+Z2V0KCksCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMuZml4ZWRBc3NldHMuQ1dJUHRvQXNzZXQuaW5kZXgnLCAkZGF0YSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBjcmVhdGUoKQogICAgewogICAgICAgIGlmKHJlcXVlc3QoKS0+Z2V0KCdhY3Rpb24nKSA9PSAncG8nKXsKICAgICAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICAgICAncHVyY2hhc2VPcmRlcnMnID0+IFB1cmNoYXNlT3JkZXI6OndoZXJlKCdpc19jbG9zZWQnLCAwKQogICAgICAgICAgICAgICAgLT53aGVyZUhhcygnVW5pdCcsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2NvbXBhbnlfaWQnLCByZXF1ZXN0KCktPmdldCgnY29tcGFueV9pZCcpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPndoZXJlKGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ3JlbFB1cmNoYXNlT3JkZXJJdGVtcy5yZWxQcm9kdWN0JywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2lzX2N3aXAnLCAxKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+b3JXaGVyZUhhcygncHVyY2hhc2VPcmRlclJlcXVpc2l0aW9ucy5yZXF1aXNpdGlvbi5wcm9qZWN0VGFzaycpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+aGFzKCdyZWxHb29kc1JlY2VpdmVkSXRlbVN0b2NrSW4nKQogICAgICAgICAgICAgICAgLT5nZXQoKSwKICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5maXhlZEFzc2V0cy5DV0lQdG9Bc3NldC5wbycsICRkYXRhKTsKICAgICAgICB9ZWxzZWlmKHJlcXVlc3QoKS0+Z2V0KCdhY3Rpb24nKSA9PSAnc3RvY2tzJyl7CiAgICAgICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAgICAgJ3N0b2NrcycgPT4gR29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luOjp3aGVyZUhhcygncmVsUHVyY2hhc2VPcmRlci5Vbml0JywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnY29tcGFueV9pZCcsIHJlcXVlc3QoKS0+Z2V0KCdjb21wYW55X2lkJykpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+d2hlcmUoJ3B1cmNoYXNlX29yZGVyX2lkJywgcmVxdWVzdCgpLT5nZXQoJ3B1cmNoYXNlX29yZGVyX2lkJykpCiAgICAgICAgICAgICAgICAtPndoZXJlKGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ3JlbEdvb2RzUmVjZWl2ZWRJdGVtcy5yZWxQcm9kdWN0JywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2lzX2N3aXAnLCAxKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmRvZXNudEhhdmUoJ2JhdGNoZXMnKQogICAgICAgICAgICAgICAgLT5nZXQoKSwKICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5maXhlZEFzc2V0cy5DV0lQdG9Bc3NldC5zdG9ja3MnLCAkZGF0YSk7CiAgICAgICAgfWVsc2VpZihyZXF1ZXN0KCktPmdldCgnYWN0aW9uJykgPT0gJ2l0ZW1zJyl7CiAgICAgICAgICAgICRwdXJjaGFzZU9yZGVyID0gUHVyY2hhc2VPcmRlcjo6d2l0aChbCiAgICAgICAgICAgICAgICAncmVsUHVyY2hhc2VPcmRlckl0ZW1zJywKICAgICAgICAgICAgICAgICdyZWxRdW90YXRpb24uZXhjaGFuZ2VSYXRlLmN1cnJlbmN5JywKCiAgICAgICAgICAgICAgICAncHVyY2hhc2VPcmRlclJlcXVpc2l0aW9ucy5yZXF1aXNpdGlvbi5wcm9qZWN0VGFzay5zdWJEZWxpdmVyYWJsZS5kZWxpdmVyYWJsZS5wcm9qZWN0JwogICAgICAgICAgICBdKQogICAgICAgICAgICAtPmZpbmQocmVxdWVzdCgpLT5nZXQoJ3B1cmNoYXNlX29yZGVyX2lkJykpOwoKICAgICAgICAgICAgJGNhdGVnb3J5X2lkID0gMDsKICAgICAgICAgICAgJGZpbmFsX2Fzc2V0X2lkID0gMDsKICAgICAgICAgICAgaWYoJHB1cmNoYXNlT3JkZXItPnB1cmNoYXNlT3JkZXJSZXF1aXNpdGlvbnMtPmNvdW50KCkgPiAwKXsKICAgICAgICAgICAgICAgIGZvcmVhY2goJHB1cmNoYXNlT3JkZXItPnB1cmNoYXNlT3JkZXJSZXF1aXNpdGlvbnMgYXMgJGtleSA9PiAkcmVxdWlzaXRpb24pewogICAgICAgICAgICAgICAgICAgIGlmKGlzc2V0KCRyZXF1aXNpdGlvbi0+cmVxdWlzaXRpb24tPnByb2plY3RUYXNrLT5zdWJEZWxpdmVyYWJsZS0+ZGVsaXZlcmFibGUtPnByb2plY3QtPmZpbmFsX2Fzc2V0X2lkKSAmJiAkcmVxdWlzaXRpb24tPnJlcXVpc2l0aW9uLT5wcm9qZWN0VGFzay0+c3ViRGVsaXZlcmFibGUtPmRlbGl2ZXJhYmxlLT5wcm9qZWN0LT5maW5hbF9hc3NldF9pZCA+IDApewogICAgICAgICAgICAgICAgICAgICAgICAkZmluYWxfYXNzZXRfaWQgPSAkcmVxdWlzaXRpb24tPnJlcXVpc2l0aW9uLT5wcm9qZWN0VGFzay0+c3ViRGVsaXZlcmFibGUtPmRlbGl2ZXJhYmxlLT5wcm9qZWN0LT5maW5hbF9hc3NldF9pZDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICRjYXRlZ29yeV9pZCA9ICRyZXF1aXNpdGlvbi0+cmVxdWlzaXRpb24tPnJlcXVpc2l0aW9uSXRlbXMtPmZpcnN0KCktPnByb2R1Y3QtPmNhdGVnb3J5LT5wYXJlbnRfaWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAgICAgJ3B1cmNoYXNlX29yZGVyX2lkJyA9PiByZXF1ZXN0KCktPmdldCgncHVyY2hhc2Vfb3JkZXJfaWQnKSwKICAgICAgICAgICAgICAgICdwdXJjaGFzZU9yZGVyJyA9PiAkcHVyY2hhc2VPcmRlciwKICAgICAgICAgICAgICAgICdnb29kc19yZWNlaXZlZF9pdGVtc19zdG9ja19pbl9pZCcgPT4gcmVxdWVzdCgpLT5nZXQoJ2dvb2RzX3JlY2VpdmVkX2l0ZW1zX3N0b2NrX2luX2lkJyksCiAgICAgICAgICAgICAgICAndXNlcnMnID0+IFxBcHBcVXNlcjo6d2hlcmVIYXMoJ2NvbXBhbmllcycsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2NvbXBhbnlfaWQnLCByZXF1ZXN0KCktPmdldCgnY29tcGFueV9pZCcpKTsKICAgICAgICAgICAgICAgIH0pLT5nZXQoKSwKICAgICAgICAgICAgICAgICdmaW5hbEFzc2V0cycgPT4gUHJvZHVjdDo6d2l0aChbCiAgICAgICAgICAgICAgICAgICAgJ2F0dHJpYnV0ZXMuYXR0cmlidXRlT3B0aW9uLmF0dHJpYnV0ZScKICAgICAgICAgICAgICAgIF0pLT53aGVyZSgnaXNfZmluYWxfYXNzZXQnLCAxKS0+Z2V0KCksCiAgICAgICAgICAgICAgICAnZmluYWxfYXNzZXRfaWQnID0+ICRmaW5hbF9hc3NldF9pZCwKCiAgICAgICAgICAgICAgICAnaXRlbXMnID0+IEdvb2RzUmVjZWl2ZWRJdGVtU3RvY2tJbjo6d2l0aChbCiAgICAgICAgICAgICAgICAgICAgJ3JlbEdvb2RzUmVjZWl2ZWRJdGVtcy5yZWxQcm9kdWN0LnByb2R1Y3RVbml0JywKICAgICAgICAgICAgICAgICAgICAncmVsR29vZHNSZWNlaXZlZEl0ZW1zLnJlbFByb2R1Y3QuYXR0cmlidXRlcy5hdHRyaWJ1dGVPcHRpb24uYXR0cmlidXRlJwogICAgICAgICAgICAgICAgXSkKICAgICAgICAgICAgICAgIC0+d2hlcmVIYXMoJ3JlbFB1cmNoYXNlT3JkZXIuVW5pdCcsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2NvbXBhbnlfaWQnLCByZXF1ZXN0KCktPmdldCgnY29tcGFueV9pZCcpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPndoZXJlKGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ3JlbEdvb2RzUmVjZWl2ZWRJdGVtcy5yZWxQcm9kdWN0JywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2lzX2N3aXAnLCAxKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmRvZXNudEhhdmUoJ2JhdGNoZXMnKQogICAgICAgICAgICAgICAgLT53aGVyZUhhcygncmVsR29vZHNSZWNlaXZlZEl0ZW1zJywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnZ29vZHNfcmVjZWl2ZWRfbm90ZV9pZCcsIHJlcXVlc3QoKS0+Z2V0KCdnb29kc19yZWNlaXZlZF9pdGVtc19zdG9ja19pbl9pZCcpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPndoZXJlKGZ1bmN0aW9uKCRxdWVyeSkgdXNlKCRwdXJjaGFzZU9yZGVyKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygncmVsR29vZHNSZWNlaXZlZEl0ZW1zLnJlbFByb2R1Y3QnLCBmdW5jdGlvbigkcXVlcnkpIHVzZSgkcHVyY2hhc2VPcmRlcil7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSW4oJ2lkJywgaXNzZXQoJHB1cmNoYXNlT3JkZXItPmlkKSA/ICRwdXJjaGFzZU9yZGVyLT5yZWxQdXJjaGFzZU9yZGVySXRlbXMtPnBsdWNrKCdwcm9kdWN0X2lkJyktPnRvQXJyYXkoKSA6IFtdKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmdldCgpLAogICAgICAgICAgICAgICAgJ2Nvc3RDZW50cmVzJyA9PiBnZXRDb3N0Q2VudHJlcyh0cnVlLCByZXF1ZXN0KCktPmdldCgnY29tcGFueV9pZCcpKSwKICAgICAgICAgICAgICAgICdsb2NhdGlvbnMnID0+IEZpeGVkQXNzZXRMb2NhdGlvbjo6d2hlcmUoWwogICAgICAgICAgICAgICAgICAgICd1bml0X2lkJyAgICAgPT4gJHB1cmNoYXNlT3JkZXItPmhyX3VuaXRfaWQsCiAgICAgICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJyA9PiAkY2F0ZWdvcnlfaWQKICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAtPm9yZGVyQnkoJ2NvZGUnLCAnYXNjJykKICAgICAgICAgICAgICAgIC0+Z2V0KCksCiAgICAgICAgICAgIF07CgogICAgICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmZpeGVkQXNzZXRzLkNXSVB0b0Fzc2V0Lml0ZW1zJywgJGRhdGEpOwogICAgICAgIH1lbHNlaWYocmVxdWVzdCgpLT5nZXQoJ2FjdGlvbicpID09ICdjb3N0LWRldGFpbHMnKXsKICAgICAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICAgICAnY29zdHMnID0+IEFzc2V0Q29zdGluZ0VudHJ5Ojp3aXRoKFsKICAgICAgICAgICAgICAgICAgICAnY3JlYXRvcicKICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAtPndoZXJlKCdnb29kc19yZWNlaXZlZF9pdGVtc19zdG9ja19pbl9pZCcsIHJlcXVlc3QoKS0+Z2V0KCdpZCcpKQogICAgICAgICAgICAgICAgLT5nZXQoKSwKICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5maXhlZEFzc2V0cy5DV0lQdG9Bc3NldC5jb3N0LWRldGFpbHMnLCAkZGF0YSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBzdG9yZShSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgICRyZXF1ZXN0LT52YWxpZGF0ZShbCiAgICAgICAgICAgICdwdXJjaGFzZV9vcmRlcl9pZCcgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ3Byb2R1Y3RzJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAncHJvZHVjdHMuKicgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ2ZpbmFsX2Fzc2V0X2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnY29zdF9jZW50cmVfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdmaXhlZF9hc3NldF9sb2NhdGlvbl9pZCcgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ3VzZXJfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdkYXRlJyA9PiAncmVxdWlyZWQnLAogICAgICAgIF0pOwoKICAgICAgICBEQjo6YmVnaW5UcmFuc2FjdGlvbigpOwogICAgICAgIHRyeXsKICAgICAgICAgICAgJHB1cmNoYXNlT3JkZXIgPSBQdXJjaGFzZU9yZGVyOjpmaW5kKCRyZXF1ZXN0LT5wdXJjaGFzZV9vcmRlcl9pZCk7CgogICAgICAgICAgICAkZmluYWxfYXNzZXRfdmFsdWUgPSAwOwogICAgICAgICAgICAkZmluYWxfYXNzZXRfaWQgPSAkcmVxdWVzdC0+ZmluYWxfYXNzZXRfaWQ7CgogICAgICAgICAgICAkbGVkZ2VyRW50cmllcyA9IFtdOwogICAgICAgICAgICAkZGF0ZSA9ICRyZXF1ZXN0LT5kYXRlOwogICAgICAgICAgICBmb3JlYWNoKCRyZXF1ZXN0LT5wcm9kdWN0cyBhcyAka2V5ID0+ICRpdGVtX2lkKXsKICAgICAgICAgICAgICAgICRnb29kc1JlY2VpdmVkSXRlbVN0b2NrSW4gPSBHb29kc1JlY2VpdmVkSXRlbVN0b2NrSW46OmZpbmRPckZhaWwoJGl0ZW1faWQpOwogICAgICAgICAgICAgICAgJHB1cmNoYXNlT3JkZXJJdGVtID0gJHB1cmNoYXNlT3JkZXItPnJlbFB1cmNoYXNlT3JkZXJJdGVtcy0+d2hlcmUoJ3Byb2R1Y3RfaWQnLCAkZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luLT5yZWxHb29kc1JlY2VpdmVkSXRlbXMtPnByb2R1Y3RfaWQpLT5maXJzdCgpOwogICAgICAgICAgICAgICAgJHVuaXRfcHJpY2UgPSAwOwogICAgICAgICAgICAgICAgaWYoaXNzZXQoJHB1cmNoYXNlT3JkZXJJdGVtLT5pZCkpewogICAgICAgICAgICAgICAgICAgICR1bml0X3ByaWNlID0gJHB1cmNoYXNlT3JkZXJJdGVtLT51bml0X3ByaWNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRxdW90YXRpb25zSXRlbSA9ICRwdXJjaGFzZU9yZGVyLT5yZWxRdW90YXRpb24tPnJlbFF1b3RhdGlvbkl0ZW1zLT53aGVyZSgncHJvZHVjdF9pZCcsICRnb29kc1JlY2VpdmVkSXRlbVN0b2NrSW4tPnJlbEdvb2RzUmVjZWl2ZWRJdGVtcy0+cHJvZHVjdF9pZCktPmZpcnN0KCk7CiAgICAgICAgICAgICAgICAkdmF0X3BlcmNlbnRhZ2UgPSAwOwogICAgICAgICAgICAgICAgaWYoaXNzZXQoJHF1b3RhdGlvbnNJdGVtLT5pZCkpewogICAgICAgICAgICAgICAgICAgICR2YXRfcGVyY2VudGFnZSA9ICRxdW90YXRpb25zSXRlbS0+dmF0X3BlcmNlbnRhZ2U7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHRvdGFsID0gKCR1bml0X3ByaWNlKiRnb29kc1JlY2VpdmVkSXRlbVN0b2NrSW4tPnJlY2VpdmVkX3F0eSk7CiAgICAgICAgICAgICAgICAkdG90YWxfcHJpY2UgPSAoJHRvdGFsKygkdmF0X3BlcmNlbnRhZ2UgPiAwID8gJHRvdGFsKigkdmF0X3BlcmNlbnRhZ2UvMTAwKSA6IDApKTsKICAgICAgICAgICAgICAgICRjb3N0cyA9IEFzc2V0Q29zdGluZ0VudHJ5Ojp3aGVyZSgnZ29vZHNfcmVjZWl2ZWRfaXRlbXNfc3RvY2tfaW5faWQnLCAkZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luLT5pZCktPnN1bSgnY29zdCcpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZigkZmluYWxfYXNzZXRfaWQgPiAwKXsKICAgICAgICAgICAgICAgICAgICAkZmluYWxBc3NldCA9IFByb2R1Y3Q6OmZpbmRPckZhaWwoJGZpbmFsX2Fzc2V0X2lkKTsKICAgICAgICAgICAgICAgICAgICAkZmluYWxfYXNzZXRfdmFsdWUgKz0gKCR0b3RhbF9wcmljZSskY29zdHMpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgJGZpbmFsQXNzZXQgPSAkZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luLT5yZWxHb29kc1JlY2VpdmVkSXRlbXMtPnJlbFByb2R1Y3Q7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJGJhdGNoID0gRml4ZWRBc3NldEJhdGNoOjpjcmVhdGUoWwogICAgICAgICAgICAgICAgICAgICdnb29kc19yZWNlaXZlZF9pdGVtc19zdG9ja19pbl9pZCcgPT4gJGdvb2RzUmVjZWl2ZWRJdGVtU3RvY2tJbi0+aWQsCiAgICAgICAgICAgICAgICAgICAgJ2JhdGNoJyA9PiB1bmlxdWVDb2RlV2l0aG91dFByZWZpeCg4LCAnZml4ZWRfYXNzZXRfYmF0Y2hlcycsICdiYXRjaCcpLAoKICAgICAgICAgICAgICAgICAgICAnY29zdF9jZW50cmVfaWQnID0+ICRyZXF1ZXN0LT5jb3N0X2NlbnRyZV9pZCwKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAnZGVwcmVjaWF0aW9uX21ldGhvZF9pZCcgPT4gJGZpbmFsQXNzZXQtPmRlcHJlY2lhdGlvbl9tZXRob2RfaWQsCiAgICAgICAgICAgICAgICAgICAgJ2Jhc2VfcmF0ZScgPT4gJGZpbmFsQXNzZXQtPmJhc2VfcmF0ZSwKICAgICAgICAgICAgICAgICAgICAncmF0ZV9tdWx0aXBsaWVyJyA9PiAkZmluYWxBc3NldC0+cmF0ZV9tdWx0aXBsaWVyLAogICAgICAgICAgICAgICAgICAgICdkZXByZWNpYXRpb25fcmF0ZScgPT4gJGZpbmFsQXNzZXQtPmRlcHJlY2lhdGlvbl9yYXRlLAogICAgICAgICAgICAgICAgICAgICdpc195ZWFybHknID0+ICRmaW5hbEFzc2V0LT5pc195ZWFybHksCiAgICAgICAgICAgICAgICAgICAgJ3llYXJzJyA9PiAkZmluYWxBc3NldC0+eWVhcnMsCiAgICAgICAgICAgICAgICAgICAgJ2lzX29uZXRpbWUnID0+ICRmaW5hbEFzc2V0LT5pc19vbmV0aW1lLAogICAgICAgICAgICAgICAgICAgICdkZXByZWNpYXRpb25fc3RhcnRfZGF0ZScgPT4gZGF0ZSgnWS1tLWQnLCBzdHJ0b3RpbWUoJGdvb2RzUmVjZWl2ZWRJdGVtU3RvY2tJbi0+dXBkYXRlZF9hdCkpLAogICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICBpZigkYmF0Y2gpewogICAgICAgICAgICAgICAgICAgIGlmKCRmaW5hbF9hc3NldF9pZCA+IDApewogICAgICAgICAgICAgICAgICAgICAgICAkYmF0Y2hJdGVtID0gRml4ZWRBc3NldEJhdGNoSXRlbTo6Y3JlYXRlKFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmaXhlZF9hc3NldF9iYXRjaF9pZCcgPT4gJGJhdGNoLT5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmaW5hbF9hc3NldF9pZCcgPT4gJGZpbmFsX2Fzc2V0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Fzc2V0X2NvZGUnID0+IFByb2R1Y3Q6OmZpbmRPckZhaWwoJGZpbmFsX2Fzc2V0X2lkKS0+c2t1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Fzc2V0X3ZhbHVlJyA9PiAoJHRvdGFsX3ByaWNlKyRjb3N0cyksCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RlcHJlY2lhdGlvbl9tZXRob2RfaWQnID0+ICRmaW5hbEFzc2V0LT5kZXByZWNpYXRpb25fbWV0aG9kX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Jhc2VfcmF0ZScgPT4gJGZpbmFsQXNzZXQtPmJhc2VfcmF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyYXRlX211bHRpcGxpZXInID0+ICRmaW5hbEFzc2V0LT5yYXRlX211bHRpcGxpZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGVwcmVjaWF0aW9uX3JhdGUnID0+ICRmaW5hbEFzc2V0LT5kZXByZWNpYXRpb25fcmF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpc195ZWFybHknID0+ICRmaW5hbEFzc2V0LT5pc195ZWFybHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAneWVhcnMnID0+ICRmaW5hbEFzc2V0LT55ZWFycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpc19vbmV0aW1lJyA9PiAkZmluYWxBc3NldC0+aXNfb25ldGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkZXByZWNpYXRpb25fc3RhcnRfZGF0ZScgPT4gZGF0ZSgnWS1tLWQnLCBzdHJ0b3RpbWUoJGdvb2RzUmVjZWl2ZWRJdGVtU3RvY2tJbi0+dXBkYXRlZF9hdCkpLAogICAgICAgICAgICAgICAgICAgICAgICBdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIEZpeGVkQXNzZXRCYXRjaEl0ZW1Vc2VyOjpjcmVhdGUoWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpeGVkX2Fzc2V0X2JhdGNoX2l0ZW1faWQnID0+ICRiYXRjaEl0ZW0tPmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpeGVkX2Fzc2V0X2xvY2F0aW9uX2lkJyA9PiAkcmVxdWVzdC0+Zml4ZWRfYXNzZXRfbG9jYXRpb25faWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29zdF9jZW50cmVfaWQnID0+ICRyZXF1ZXN0LT5jb3N0X2NlbnRyZV9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1c2VyX2lkJyA9PiAkcmVxdWVzdC0+dXNlcl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmcm9tJyA9PiAkcmVxdWVzdC0+ZGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcigkaT0xOyRpPD0kZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luLT5yZWNlaXZlZF9xdHk7JGkrKyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYmF0Y2hJdGVtID0gRml4ZWRBc3NldEJhdGNoSXRlbTo6Y3JlYXRlKFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZml4ZWRfYXNzZXRfYmF0Y2hfaWQnID0+ICRiYXRjaC0+aWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpbmFsX2Fzc2V0X2lkJyA9PiAkZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luLT5yZWxHb29kc1JlY2VpdmVkSXRlbXMtPnByb2R1Y3RfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Fzc2V0X2NvZGUnID0+ICRiYXRjaC0+YmF0Y2guJy0nLiRpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhc3NldF92YWx1ZScgPT4gKCRnb29kc1JlY2VpdmVkSXRlbVN0b2NrSW4tPnJlY2VpdmVkX3F0eSA+IDAgJiYgKCR0b3RhbF9wcmljZSskY29zdHMpID4gMCA/ICgoJHRvdGFsX3ByaWNlKyRjb3N0cykvJGdvb2RzUmVjZWl2ZWRJdGVtU3RvY2tJbi0+cmVjZWl2ZWRfcXR5KSA6IDApLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGVwcmVjaWF0aW9uX21ldGhvZF9pZCcgPT4gJGZpbmFsQXNzZXQtPmRlcHJlY2lhdGlvbl9tZXRob2RfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Jhc2VfcmF0ZScgPT4gJGZpbmFsQXNzZXQtPmJhc2VfcmF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmF0ZV9tdWx0aXBsaWVyJyA9PiAkZmluYWxBc3NldC0+cmF0ZV9tdWx0aXBsaWVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkZXByZWNpYXRpb25fcmF0ZScgPT4gJGZpbmFsQXNzZXQtPmRlcHJlY2lhdGlvbl9yYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpc195ZWFybHknID0+ICRmaW5hbEFzc2V0LT5pc195ZWFybHksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3llYXJzJyA9PiAkZmluYWxBc3NldC0+eWVhcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lzX29uZXRpbWUnID0+ICRmaW5hbEFzc2V0LT5pc19vbmV0aW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkZXByZWNpYXRpb25fc3RhcnRfZGF0ZScgPT4gZGF0ZSgnWS1tLWQnLCBzdHJ0b3RpbWUoJGdvb2RzUmVjZWl2ZWRJdGVtU3RvY2tJbi0+dXBkYXRlZF9hdCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRml4ZWRBc3NldEJhdGNoSXRlbVVzZXI6OmNyZWF0ZShbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpeGVkX2Fzc2V0X2JhdGNoX2l0ZW1faWQnID0+ICRiYXRjaEl0ZW0tPmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1c2VyX2lkJyA9PiAkcmVxdWVzdC0+dXNlcl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZml4ZWRfYXNzZXRfbG9jYXRpb25faWQnID0+ICRyZXF1ZXN0LT5maXhlZF9hc3NldF9sb2NhdGlvbl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29zdF9jZW50cmVfaWQnID0+ICRyZXF1ZXN0LT5jb3N0X2NlbnRyZV9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZnJvbScgPT4gJHJlcXVlc3QtPmRhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkYWNjb3VudERlZmF1bHRTZXR0aW5ncyA9IGFjY291bnREZWZhdWx0U2V0dGluZ3MoKTsKICAgICAgICAgICAgICAgIGlmKCRmaW5hbF9hc3NldF9pZCA9PSAwKXsKICAgICAgICAgICAgICAgICAgICBhcnJheV9wdXNoKCRsZWRnZXJFbnRyaWVzLCBbCiAgICAgICAgICAgICAgICAgICAgICAgICdjb3N0X2NlbnRyZV9pZCcgPT4gJHJlcXVlc3QtPmNvc3RfY2VudHJlX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAnY2hhcnRfb2ZfYWNjb3VudF9pZCcgPT4gKGlzc2V0KCRnb29kc1JlY2VpdmVkSXRlbVN0b2NrSW4tPnJlbEdvb2RzUmVjZWl2ZWRJdGVtcy0+cmVsUHJvZHVjdC0+Y3dpcF9hc3NldF9hY2NvdW50X2lkKSAmJiAkZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luLT5yZWxHb29kc1JlY2VpdmVkSXRlbXMtPnJlbFByb2R1Y3QtPmN3aXBfYXNzZXRfYWNjb3VudF9pZCA+IDAgPyAkZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luLT5yZWxHb29kc1JlY2VpdmVkSXRlbXMtPnJlbFByb2R1Y3QtPmN3aXBfYXNzZXRfYWNjb3VudF9pZCA6ICRhY2NvdW50RGVmYXVsdFNldHRpbmdzWydjd2lwX2Fzc2V0X2FjY291bnQnXSksCiAgICAgICAgICAgICAgICAgICAgICAgICdkZWJpdCcgPT4gJHRvdGFsX3ByaWNlKyRjb3N0cywKICAgICAgICAgICAgICAgICAgICAgICAgJ2NyZWRpdCcgPT4gMCwKICAgICAgICAgICAgICAgICAgICAgICAgJ25hcnJhdGlvbicgPT4gJ0NhcGl0YWxpemF0aW9uIDo6IEFzc2V0IEludmVudG9yeSBEZWJpdCcsCiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJyA9PiAnY3dpcC10by1hc3NldCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdzb3VyY2UnID0+ICRiYXRjaC0+aWQKICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhcnJheV9wdXNoKCRsZWRnZXJFbnRyaWVzLCBbCiAgICAgICAgICAgICAgICAgICAgJ2Nvc3RfY2VudHJlX2lkJyA9PiAkcmVxdWVzdC0+Y29zdF9jZW50cmVfaWQsCiAgICAgICAgICAgICAgICAgICAgJ2NoYXJ0X29mX2FjY291bnRfaWQnID0+IChpc3NldCgkZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luLT5yZWxHb29kc1JlY2VpdmVkSXRlbXMtPnJlbFByb2R1Y3QtPmludmVudG9yeV9hY2NvdW50X2lkKSAmJiAkZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luLT5yZWxHb29kc1JlY2VpdmVkSXRlbXMtPnJlbFByb2R1Y3QtPmludmVudG9yeV9hY2NvdW50X2lkID4gMCA/ICRnb29kc1JlY2VpdmVkSXRlbVN0b2NrSW4tPnJlbEdvb2RzUmVjZWl2ZWRJdGVtcy0+cmVsUHJvZHVjdC0+aW52ZW50b3J5X2FjY291bnRfaWQgOiAkYWNjb3VudERlZmF1bHRTZXR0aW5nc1snaW52ZW50b3J5X2FjY291bnQnXSksCiAgICAgICAgICAgICAgICAgICAgJ2RlYml0JyA9PiAwLAogICAgICAgICAgICAgICAgICAgICdjcmVkaXQnID0+ICR0b3RhbF9wcmljZSskY29zdHMsCiAgICAgICAgICAgICAgICAgICAgJ25hcnJhdGlvbicgPT4gJ0NhcGl0YWxpemF0aW9uIDo6IENXSVAgQ3JlZGl0JywKICAgICAgICAgICAgICAgICAgICAndHlwZScgPT4gJ2N3aXAtdG8tYXNzZXQnLAogICAgICAgICAgICAgICAgICAgICdzb3VyY2UnID0+ICRiYXRjaC0+aWQKICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkZmluYWxfYXNzZXRfdmFsdWUgPiAwKXsKICAgICAgICAgICAgICAgICRmaW5hbEFzc2V0ID0gUHJvZHVjdDo6ZmluZE9yRmFpbCgkZmluYWxfYXNzZXRfaWQpOwogICAgICAgICAgICAgICAgYXJyYXlfcHVzaCgkbGVkZ2VyRW50cmllcywgWwogICAgICAgICAgICAgICAgICAgICdjb3N0X2NlbnRyZV9pZCcgPT4gJHJlcXVlc3QtPmNvc3RfY2VudHJlX2lkLAogICAgICAgICAgICAgICAgICAgICdjaGFydF9vZl9hY2NvdW50X2lkJyA9PiAoaXNzZXQoJGZpbmFsQXNzZXQtPmN3aXBfYXNzZXRfYWNjb3VudF9pZCkgJiYgJGZpbmFsQXNzZXQtPmN3aXBfYXNzZXRfYWNjb3VudF9pZCA+IDAgPyAkZmluYWxBc3NldC0+Y3dpcF9hc3NldF9hY2NvdW50X2lkIDogJGFjY291bnREZWZhdWx0U2V0dGluZ3NbJ2N3aXBfYXNzZXRfYWNjb3VudCddKSwKICAgICAgICAgICAgICAgICAgICAnZGViaXQnID0+ICRmaW5hbF9hc3NldF92YWx1ZSwKICAgICAgICAgICAgICAgICAgICAnY3JlZGl0JyA9PiAwLAogICAgICAgICAgICAgICAgICAgICduYXJyYXRpb24nID0+ICdDYXBpdGFsaXphdGlvbiA6OiBBc3NldCBJbnZlbnRvcnkgRGViaXQnLAogICAgICAgICAgICAgICAgICAgICd0eXBlJyA9PiAnZmluYWwtYXNzZXQnLAogICAgICAgICAgICAgICAgICAgICdzb3VyY2UnID0+ICRmaW5hbEFzc2V0LT5za3UKICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihpc3NldCgkbGVkZ2VyRW50cmllc1swXSkpewogICAgICAgICAgICAgICAgJGVudHJ5ID0gc2F2ZUxlZGdlckVudHJpZXMoNSwgZGF0ZSgnWS1tLWQgSDppOnMnLCBzdHJ0b3RpbWUoJGRhdGUuJyAnLmRhdGUoJ0g6aTpzJykpKSwgMSwgJycsICdDV0lQIHRvIEFzc2V0JywgJGxlZGdlckVudHJpZXMsICRwdXJjaGFzZU9yZGVyLT5yZWxRdW90YXRpb24tPmV4Y2hhbmdlUmF0ZS0+aWQsIDAsIDAsIDAsIGdldENvc3RDZW50cmVDb21wYW55KCRyZXF1ZXN0LT5jb3N0X2NlbnRyZV9pZCkpOwogICAgICAgICAgICAgICAgc2F2ZVBPRW50cnkoJGVudHJ5LCAkcHVyY2hhc2VPcmRlci0+cmVsUXVvdGF0aW9uLT5zdXBwbGllcl9pZCwgJHJlcXVlc3QtPnB1cmNoYXNlX29yZGVyX2lkLCAnY3dpcC10by1hc3NldCcpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBEQjo6Y29tbWl0KCk7CgogICAgICAgICAgICBzZXNzaW9uKCktPmZsYXNoKCdhbGVydC10eXBlJywgJ3N1Y2Nlc3MnKTsKICAgICAgICAgICAgc2Vzc2lvbigpLT5mbGFzaCgnbWVzc2FnZScsICJDV0lQIHRvIEFzc2V0IGhhcyBiZWVuIHNhdmVkIHN1Y2Nlc3NmdWxseS4iKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IHRydWUsCiAgICAgICAgICAgIF0pOwogICAgICAgIH1jYXRjaChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIERCOjpyb2xsYmFjaygpOwogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgXSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBzaG93KCRpZCkKICAgIHsKICAgICAgICAkZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luID0gR29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luOjpmaW5kT3JGYWlsKCRpZCk7CgogICAgICAgICRjb3N0cyA9IEFzc2V0Q29zdGluZ0VudHJ5Ojp3aXRoKFsKICAgICAgICAgICAgJ2NyZWF0b3InCiAgICAgICAgXSkKICAgICAgICAtPndoZXJlKCdnb29kc19yZWNlaXZlZF9pdGVtc19zdG9ja19pbl9pZCcsICRnb29kc1JlY2VpdmVkSXRlbVN0b2NrSW4tPmlkKQogICAgICAgIC0+Z2V0KCk7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAndGl0bGUnID0+ICdBc3NldCBDb3N0aW5nIERldGFpbHMgZm9yIEdSTiAjJy4kZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luLT5yZWxHb29kc1JlY2VpdmVkSXRlbXMtPnJlbEdvb2RzUmVjZWl2ZWROb3RlLT5ncm5fcmVmZXJlbmNlX25vLicsIEl0ZW0gIycuJGdvb2RzUmVjZWl2ZWRJdGVtU3RvY2tJbi0+cmVsR29vZHNSZWNlaXZlZEl0ZW1zLT5yZWxQcm9kdWN0LT5uYW1lLicgJy5nZXRQcm9kdWN0QXR0cmlidXRlc0Zhc3RlcigkZ29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luLT5yZWxHb29kc1JlY2VpdmVkSXRlbXMtPnJlbFByb2R1Y3QpLAogICAgICAgICAgICAnYm9keScgPT4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmZpeGVkQXNzZXRzLkNXSVB0b0Fzc2V0LmNvc3QtZGV0YWlscycsIGNvbXBhY3QoJ2Nvc3RzJykpLT5yZW5kZXIoKQogICAgICAgIF0pOwogICAgfQp9Cg==