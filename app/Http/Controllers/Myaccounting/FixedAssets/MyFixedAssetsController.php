<?php
bolt_decrypt( __FILE__ , 'a0fjUJ'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nXEZpeGVkQXNzZXRzOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBBcHBcTW9kZWxzXEZpeGVkQXNzZXRzXEZpeGVkQXNzZXRMb2NhdGlvbjsKdXNlIEFwcFxNb2RlbHNcRml4ZWRBc3NldHNcRml4ZWRBc3NldEJhdGNoOwp1c2UgQXBwXE1vZGVsc1xGaXhlZEFzc2V0c1xGaXhlZEFzc2V0QmF0Y2hJdGVtOwp1c2UgQXBwXE1vZGVsc1xGaXhlZEFzc2V0c1xGaXhlZEFzc2V0QmF0Y2hJdGVtVXNlcjsKdXNlIEFwcFxNb2RlbHNcRml4ZWRBc3NldHNcRml4ZWRBc3NldEl0ZW1Nb3ZlbWVudDsKdXNlIEFwcFxVc2VyOwp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcQ2F0ZWdvcnk7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xQcm9kdWN0OwoKdXNlIEFwcCwgREIsIERhdGFUYWJsZXM7CnVzZSBJbGx1bWluYXRlXFN1cHBvcnRcRmFjYWRlc1xBdXRoOwoKY2xhc3MgTXlGaXhlZEFzc2V0c0NvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyCnsKICAgIC8qKgogICAgICogU2V0IGdsb2JhbCBkYXRhIHRhYmxlIGhlYWRlcnMuCiAgICAgKgogICAgICogQHJldHVybiBoZWFkZXJDb2x1bW5zCiAgICAgKi8KICAgICBwdWJsaWMgZnVuY3Rpb24gaGVhZGVyQ29sdW1ucygkdmFsdWU9JycpCiAgICAgewogICAgICAgICRyb3dzID0gIGFycmF5KAogICAgICAgICAgICBbJ1NMJywgJ1NMJ10sCiAgICAgICAgICAgIFsnY29tcGFueScsICdjb21wYW55JywndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydhc3NldCcsICdhc3NldCcsJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsnYmF0Y2hfaWQnLCAnYmF0Y2hfaWQnLCd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ2Fzc2V0X2NvZGUnLCAnYXNzZXRfY29kZScsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ2xvY2F0aW9uJywgJ2xvY2F0aW9uJywgJ3RleHQtbGVmdCddLCAKICAgICAgICAgICAgWyd1c2luZ19kdXJhdGlvbicsICd1c2luZ19kdXJhdGlvbicsICd0ZXh0LWxlZnQnXSwgCiAgICAgICAgICAgIFsnZ2l2aW5nX3JlbWFya3MnLCAnZ2l2aW5nX3JlbWFya3MnLCAndGV4dC1sZWZ0J10sIAogICAgICAgICAgICBbJ3JlY2VpdmVkJywgJ3JlY2VpdmVkJywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsncmVjZWl2aW5nX3JlbWFya3MnLCAncmVjZWl2aW5nX3JlbWFya3MnLCAndGV4dC1sZWZ0J10sIAogICAgICAgICAgICBbJ3Rha2VuJywgJ3Rha2VuJywgJ3RleHQtY2VudGVyJ10sIAogICAgICAgICAgICBbJ3Rha2VuX3JlbWFya3MnLCAndGFrZW5fcmVtYXJrcycsICd0ZXh0LWxlZnQnXSwgCiAgICAgICAgICAgIFsnYWN0aW9ucycsICdhY3Rpb25zJywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gJHJvd3M7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGluZGV4KCkKICAgIHsKICAgICAgICB0cnkgewoKICAgICAgICAgICAgaWYgKHJlcXVlc3QoKS0+YWpheCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YXRhYmxlczo6b2YoCiAgICAgICAgICAgICAgICAgICAgRml4ZWRBc3NldEJhdGNoSXRlbVVzZXI6OndpdGgoWwogICAgICAgICAgICAgICAgICAgICAgICAnYmF0Y2hJdGVtLmZpbmFsQXNzZXQuYXR0cmlidXRlcy5hdHRyaWJ1dGVPcHRpb24uYXR0cmlidXRlJywKICAgICAgICAgICAgICAgICAgICAgICAgJ21vdmVtZW50cycsCiAgICAgICAgICAgICAgICAgICAgICAgICdiYXRjaEl0ZW0uYmF0Y2guY29zdENlbnRyZS5wcm9maXRDZW50cmUuY29tcGFueScsCiAgICAgICAgICAgICAgICAgICAgXSkKICAgICAgICAgICAgICAgICAgICAtPndoZXJlSGFzKCdiYXRjaEl0ZW0nLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnaXNfZGlzcG9zZWQnLCAwKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+d2hlcmUoJ3VzZXJfaWQnLCBhdXRoKCktPnVzZXIoKS0+aWQpCiAgICAgICAgICAgICAgICAgICAgLT53aGVuKCFkYXRhdGFibGVPcmRlcmluZygpLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT5vcmRlcmJ5KCdpZCcsICdkZXNjJyk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC0+YWRkSW5kZXhDb2x1bW4oKQoKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdjb21wYW55JywgZnVuY3Rpb24oJGFzc2V0KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNzZXQoJGFzc2V0LT5iYXRjaEl0ZW0tPmJhdGNoLT5jb3N0Q2VudHJlLT5wcm9maXRDZW50cmUtPmNvbXBhbnktPmNvZGUpID8gJGFzc2V0LT5iYXRjaEl0ZW0tPmJhdGNoLT5jb3N0Q2VudHJlLT5wcm9maXRDZW50cmUtPmNvbXBhbnktPmNvZGUgOiAnJzsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbignY29tcGFueScsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ2JhdGNoLmNvc3RDZW50cmUucHJvZml0Q2VudHJlLmNvbXBhbnknLCBmdW5jdGlvbiAoJHF1ZXJ5KSB1c2UoJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXJ5LT53aGVyZSgnY29kZScsICdMSUtFJywgJyUnLiRrZXl3b3JkLiclJyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdhc3NldCcsIGZ1bmN0aW9uKCRhc3NldCl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzc2V0KCRhc3NldC0+YmF0Y2hJdGVtLT5maW5hbEFzc2V0LT5uYW1lKT8kYXNzZXQtPmJhdGNoSXRlbS0+ZmluYWxBc3NldC0+bmFtZSAuJyAnLmdldFByb2R1Y3RBdHRyaWJ1dGVzRmFzdGVyKCRhc3NldC0+YmF0Y2hJdGVtLT5maW5hbEFzc2V0KTonJzsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbignYXNzZXQnLCBmdW5jdGlvbiAoJHF1ZXJ5LCAka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSGFzKCdiYXRjaEl0ZW0uZmluYWxBc3NldCcsIGZ1bmN0aW9uICgkcXVlcnkpIHVzZSgka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICAkcXVlcnktPndoZXJlKCduYW1lJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignYmF0Y2hfaWQnLCBmdW5jdGlvbigkYXNzZXQpewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpc3NldCgkYXNzZXQtPmJhdGNoSXRlbS0+YmF0Y2gtPmJhdGNoKT8kYXNzZXQtPmJhdGNoSXRlbS0+YmF0Y2gtPmJhdGNoOicnOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdiYXRjaF9pZCcsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ2JhdGNoSXRlbS5iYXRjaCcsIGZ1bmN0aW9uICgkcXVlcnkpIHVzZSgka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICAkcXVlcnktPndoZXJlKCdiYXRjaCcsICdMSUtFJywgJyUnLiRrZXl3b3JkLiclJyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ2Fzc2V0X2NvZGUnLCBmdW5jdGlvbigkYXNzZXQpewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpc3NldCgkYXNzZXQtPmJhdGNoSXRlbS0+YXNzZXRfY29kZSk/JGFzc2V0LT5iYXRjaEl0ZW0tPmFzc2V0X2NvZGU6Jyc7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5maWx0ZXJDb2x1bW4oJ2Fzc2V0X2NvZGUnLCBmdW5jdGlvbiAoJHF1ZXJ5LCAka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSGFzKCdiYXRjaEl0ZW0nLCBmdW5jdGlvbiAoJHF1ZXJ5KSB1c2UoJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXJ5LT53aGVyZSgnYXNzZXRfY29kZScsICdMSUtFJywgJyUnLiRrZXl3b3JkLiclJyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ2xvY2F0aW9uJywgZnVuY3Rpb24oJGFzc2V0KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gICRhc3NldC0+Zml4ZWRBc3NldExvY2F0aW9uLT5uYW1lOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZmlsdGVyQ29sdW1uKCdsb2NhdGlvbicsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ2ZpeGVkQXNzZXRMb2NhdGlvbicsIGZ1bmN0aW9uICgkcXVlcnkpIHVzZSgka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICAkcXVlcnktPndoZXJlKCduYW1lJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbigndXNpbmdfZHVyYXRpb24nLCBmdW5jdGlvbigkYXNzZXQpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAgJGFzc2V0LT5mcm9tIC4nIHRvICcgLihzdHJ0b3RpbWUoJGFzc2V0LT50bykgPiAwID8gJGFzc2V0LT50byA6ICdOb3cnKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbigndXNpbmdfZHVyYXRpb24nLCBmdW5jdGlvbiAoJHF1ZXJ5LCAka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdmcm9tJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtPm9yV2hlcmUoJ3RvJywgJ0xJS0UnLCAnJScuJGtleXdvcmQuJyUnKTsKICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdyZWNlaXZlZCcsIGZ1bmN0aW9uKCRhc3NldCl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICAkYXNzZXQtPmlzX3JlY2VpdmVkID09IDEgPyAnWWVzJyA6ICdObyc7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5maWx0ZXJDb2x1bW4oJ3JlY2VpdmVkJywgZnVuY3Rpb24gKCRxdWVyeSwgJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnaXNfcmVjZWl2ZWQnLCAnTElLRScsICclJy4ka2V5d29yZC4nJScpOwogICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ3Rha2VuJywgZnVuY3Rpb24oJGFzc2V0KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gICRhc3NldC0+aXNfdGFrZW4gPT0gMSA/ICdZZXMnIDogJ05vJzsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbigndGFrZW4nLCBmdW5jdGlvbiAoJHF1ZXJ5LCAka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdpc190YWtlbicsICdMSUtFJywgJyUnLiRrZXl3b3JkLiclJyk7CiAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignYWN0aW9ucycsIGZ1bmN0aW9uKCRhc3NldCl7CiAgICAgICAgICAgICAgICAgICAgJGFjdGlvbnM9Jyc7CgogICAgICAgICAgICAgICAgICAgIGlmKCRhc3NldC0+aXNfcmVjZWl2ZWQgPT0gMCl7CgogICAgICAgICAgICAgICAgICAgICAgICAkYWN0aW9ucy49JzxhIGNsYXNzPSJidG4gbWItMSBidG4teHMgYnRuLXN1Y2Nlc3MiIG9uY2xpY2s9InJlY2VpdmVBc3NldCgnLiRhc3NldC0+aWQuJywgJy4kYXNzZXQtPmJhdGNoSXRlbS0+YXNzZXRfY29kZS4nKSI+PGkgY2xhc3M9ImxhcyBsYS1maWxlLWFsdCI+PC9pPiZuYnNwO1JlY2VpdmU8L2E+JzsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICgkYXNzZXQtPm1vdmVtZW50cy0+d2hlcmVJbignc3RhdHVzJywgWydwZW5kaW5nJywgJ2FwcHJvdmVkJywgJ21vdmVkJ10pLT5jb3VudCgpID09IDApIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICRhY3Rpb25zIC49JzxhIGNsYXNzPSJidG4gbWItMSBidG4teHMgYnRuLXN1Y2Nlc3MiIG9uY2xpY2s9Im1vdmVtZW50UmVxdWlzaXRpb24oJy4gJGFzc2V0LT5pZCAuJywgJy4gJGFzc2V0LT5iYXRjaEl0ZW0tPmFzc2V0X2NvZGUgLicpIj48aSBjbGFzcz0ibGFzIGxhLXBlb3BsZS1jYXJyeSI+PC9pPiZuYnNwO01vdmVtZW50IFJlcXVpc2l0aW9uPC9hPic7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZigkYXNzZXQtPm1vdmVtZW50cy0+Y291bnQoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICAkYWN0aW9ucy49JzxhIGNsYXNzPSJidG4gbWItMSBidG4tZGFyayBidG4teHMiPk1vdmVtZW50IFJlcXVpc2l0aW9uICcudWN3b3Jkcyhjb2xsZWN0KCRhc3NldC0+bW92ZW1lbnRzKS0+c29ydEJ5RGVzYygnaWQnKS0+Zmlyc3QoKS0+c3RhdHVzKSAuJzwvYT4nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGFjdGlvbnM7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5yYXdDb2x1bW5zKFsndXNpbmdfZHVyYXRpb24nLCdyZWNlaXZlZCcsJ3Rha2VuJywnYWN0aW9ucyddKQogICAgICAgICAgICAgICAgLT5tYWtlKHRydWUpOwogICAgICAgICAgICB9CgoKICAgICAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICAgICAndGl0bGUnID0+ICdNeSBGaXhlZCBBc3NldHMnLAogICAgICAgICAgICAgICAgJ2hlYWRlckNvbHVtbnMnID0+ICR0aGlzLT5oZWFkZXJDb2x1bW5zKCksCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMuZml4ZWRBc3NldHMubXlBc3NldHMuaW5kZXgnLCAkZGF0YSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBzdG9yZShSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgIERCOjpiZWdpblRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJ5ewogICAgICAgICAgICAkdXNlciA9IEZpeGVkQXNzZXRCYXRjaEl0ZW1Vc2VyOjpmaW5kKCRyZXF1ZXN0LT5pZCk7CiAgICAgICAgICAgICR1c2VyLT5pc19yZWNlaXZlZCA9IDE7CiAgICAgICAgICAgICR1c2VyLT5yZWNlaXZpbmdfcmVtYXJrcyA9ICRyZXF1ZXN0LT5yZWNlaXZpbmdfcmVtYXJrczsKICAgICAgICAgICAgJHVzZXItPnNhdmUoKTsKCiAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IHRydWUsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gIkZpeGVkIEl0ZW1zIGhhcyBiZWVuIFJlY2VpdmVkIFN1Y2Nlc3NmdWxseS4iCiAgICAgICAgICAgIF0pOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICBEQjo6cm9sbGJhY2soKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IHRydWUsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgXSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBzaG93KCRpZCkKICAgIHsKICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgJ3VzZXInID0+IEZpeGVkQXNzZXRCYXRjaEl0ZW1Vc2VyOjpmaW5kKCRpZCkKICAgICAgICBdOwoKICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmZpeGVkQXNzZXRzLm15QXNzZXRzLnJlY2VpdmUnLCAkZGF0YSk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGVkaXQoJGlkKQogICAgewogICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAndXNlcicgPT4gRml4ZWRBc3NldEJhdGNoSXRlbVVzZXI6OmZpbmQoJGlkKSwKICAgICAgICAgICAgJ2ZpeGVkQXNzZXRMb2NhdGlvbnMnID0+IEZpeGVkQXNzZXRMb2NhdGlvbjo6YWxsKCksCiAgICAgICAgICAgICd1c2VycycgPT4gXEFwcFxVc2VyOjp3aGVyZU5vdEluKCdpZCcsIFthdXRoKCktPnVzZXIoKS0+aWRdKS0+Z2V0KCksCiAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5maXhlZEFzc2V0cy5teUFzc2V0cy5tb3ZlbWVudCcsICRkYXRhKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlKFJlcXVlc3QgJHJlcXVlc3QsICRpZCkKICAgIHsKICAgICAgICAkcmVxdWVzdC0+dmFsaWRhdGUoWwogICAgICAgICAgICAiZml4ZWRfYXNzZXRfbG9jYXRpb25faWQiID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICJ1c2VyX2lkIiA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAiZXhwZWN0ZWRfZGF0ZSIgPT4gJ3JlcXVpcmVkJywKICAgICAgICBdKTsKCiAgICAgICAgdHJ5ewogICAgICAgICAgICAkdXNlciA9IEZpeGVkQXNzZXRCYXRjaEl0ZW1Vc2VyOjpmaW5kKCRpZCk7CgogICAgICAgICAgICAkbW92ZW1lbnQgPSBGaXhlZEFzc2V0SXRlbU1vdmVtZW50OjpjcmVhdGUoWwogICAgICAgICAgICAgICAgJ2ZpeGVkX2Fzc2V0X2JhdGNoX2l0ZW1fdXNlcl9pZCcgPT4gJGlkLAogICAgICAgICAgICAgICAgJ2ZpeGVkX2Fzc2V0X2xvY2F0aW9uX2lkJyA9PiAkcmVxdWVzdC0+Zml4ZWRfYXNzZXRfbG9jYXRpb25faWQsCiAgICAgICAgICAgICAgICAndXNlcl9pZCcgPT4gJHJlcXVlc3QtPnVzZXJfaWQsCiAgICAgICAgICAgICAgICAnZXhwZWN0ZWRfZGF0ZScgPT4gJHJlcXVlc3QtPmV4cGVjdGVkX2RhdGUsCiAgICAgICAgICAgICAgICAncmVtYXJrcycgPT4gJHJlcXVlc3QtPnJlbWFya3MsCiAgICAgICAgICAgIF0pOwoKICAgICAgICAgICAgREI6OmNvbW1pdCgpOwogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiRml4ZWQgSXRlbSBtb3ZlbWVudCBSZXF1aXNpdGlvbiBoYXMgYmVlbiBzdWJtaXR0ZWQgU3VjY2Vzc2Z1bGx5LiIKICAgICAgICAgICAgXSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIERCOjpyb2xsYmFjaygpOwogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgXSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBkZXN0cm95KCRpZCkKICAgIHsKICAgICAgICAKICAgIH0KfQo=