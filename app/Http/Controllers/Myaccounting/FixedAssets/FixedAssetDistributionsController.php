<?php
bolt_decrypt( __FILE__ , 'ACNlaa'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nXEZpeGVkQXNzZXRzOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ29tcGFueTsKdXNlIEFwcFxNb2RlbHNcRml4ZWRBc3NldHNcRml4ZWRBc3NldExvY2F0aW9uOwp1c2UgQXBwXE1vZGVsc1xGaXhlZEFzc2V0c1xGaXhlZEFzc2V0QmF0Y2g7CnVzZSBBcHBcTW9kZWxzXEZpeGVkQXNzZXRzXEZpeGVkQXNzZXRCYXRjaEl0ZW07CnVzZSBBcHBcTW9kZWxzXEZpeGVkQXNzZXRzXEZpeGVkQXNzZXRCYXRjaEl0ZW1Vc2VyOwp1c2UgQXBwXFVzZXI7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xDYXRlZ29yeTsKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXFByb2R1Y3Q7Cgp1c2UgQXBwLERCOwp1c2UgSWxsdW1pbmF0ZVxTdXBwb3J0XEZhY2FkZXNcQXV0aDsKCmNsYXNzIEZpeGVkQXNzZXREaXN0cmlidXRpb25zQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIKewogICAgcHVibGljIGZ1bmN0aW9uIGluZGV4KCkKICAgIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgICAgICd0aXRsZScgPT4gJ0ZpeGVkIEFzc2V0IERpc3RyaWJ1dGlvbnMnLAogICAgICAgICAgICAgICAgJ2NvbXBhbmllcycgPT4gQ29tcGFueTo6aGFzKCdwcm9maXRDZW50cmVzLmNvc3RDZW50cmVzJykKICAgICAgICAgICAgICAgIC0+d2hlcmVIYXMoJ3VzZXJzJywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgndXNlcl9pZCcsIGF1dGgoKS0+dXNlcigpLT5pZCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5nZXQoKSwKICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5maXhlZEFzc2V0cy5maXhlZEFzc2V0RGlzdHJpYnV0aW9ucy5pbmRleCcsICRkYXRhKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZSgpCiAgICB7CiAgICAgICAgaWYocmVxdWVzdCgpLT5oYXMoJ2dldC1wcm9kdWN0cycpKXsKICAgICAgICAgICAgJGNhdGVnb3JpZXMgPSBDYXRlZ29yeTo6aGFzKCdwcm9kdWN0cy5maXhlZEFzc2V0QmF0Y2hJdGVtcycpLT5nZXQoKTsKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5maXhlZEFzc2V0cy5maXhlZEFzc2V0RGlzdHJpYnV0aW9ucy5wcm9kdWN0cycsIFsKICAgICAgICAgICAgICAgICdjYXRlZ29yaWVzJyA9PiAkY2F0ZWdvcmllcywKICAgICAgICAgICAgICAgICdwcm9kdWN0cycgPT4gUHJvZHVjdDo6d2l0aChbCiAgICAgICAgICAgICAgICAgICAgJ2F0dHJpYnV0ZXMuYXR0cmlidXRlT3B0aW9uLmF0dHJpYnV0ZScKICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAtPndoZXJlSW4oJ2NhdGVnb3J5X2lkJywgJGNhdGVnb3JpZXMtPnBsdWNrKCdpZCcpLT50b0FycmF5KCkpCiAgICAgICAgICAgICAgICAtPmhhcygnZml4ZWRBc3NldEJhdGNoSXRlbXMnKQogICAgICAgICAgICAgICAgLT53aGVyZUhhcygnZml4ZWRBc3NldEJhdGNoSXRlbXMuYmF0Y2guY29zdENlbnRyZS5wcm9maXRDZW50cmUnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdjb21wYW55X2lkJywgcmVxdWVzdCgpLT5nZXQoJ2NvbXBhbnlfaWQnKSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5nZXQoKQogICAgICAgICAgICBdKTsKICAgICAgICB9CgogICAgICAgIGlmKHJlcXVlc3QoKS0+Z2V0KCdhY3Rpb24nKSA9PSAnYmF0Y2hlcycpewogICAgICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgICAgICdiYXRjaGVzJyA9PiBGaXhlZEFzc2V0QmF0Y2g6OndpdGgoWwogICAgICAgICAgICAgICAgICAgICdnb29kc1JlY2VpdmVkSXRlbXNTdG9ja0luLnJlbEdvb2RzUmVjZWl2ZWRJdGVtcy5yZWxHb29kc1JlY2VpdmVkTm90ZS5yZWxQdXJjaGFzZU9yZGVyLnB1cmNoYXNlT3JkZXJSZXF1aXNpdGlvbnMnCiAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICAgLT53aGVyZUhhcygnaXRlbXMnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdpc19kaXNwb3NlZCcsIDApOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+d2hlcmVIYXMoJ2l0ZW1zJywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnZmluYWxfYXNzZXRfaWQnLCByZXF1ZXN0KCktPmdldCgncHJvZHVjdF9pZCcpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmdldCgpLAogICAgICAgICAgICBdOwogICAgICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmZpeGVkQXNzZXRzLmZpeGVkQXNzZXREaXN0cmlidXRpb25zLmJhdGNoZXMnLCAkZGF0YSk7CiAgICAgICAgfWVsc2VpZihyZXF1ZXN0KCktPmdldCgnYWN0aW9uJykgPT0gJ2l0ZW1zJyl7CgogICAgICAgICAgICAkaXRlbXMgPSBGaXhlZEFzc2V0QmF0Y2hJdGVtOjp3aXRoKFsKICAgICAgICAgICAgICAgICdiYXRjaC5nb29kc1JlY2VpdmVkSXRlbXNTdG9ja0luLnJlbEdvb2RzUmVjZWl2ZWRJdGVtcy5yZWxQcm9kdWN0LmF0dHJpYnV0ZXMuYXR0cmlidXRlT3B0aW9uLmF0dHJpYnV0ZScsCiAgICAgICAgICAgICAgICAndXNlcnMnLCAnY3VycmVudFVzZXInLAogICAgICAgICAgICAgICAgJ2ZpbmFsQXNzZXQuYXR0cmlidXRlcy5hdHRyaWJ1dGVPcHRpb24uYXR0cmlidXRlJwogICAgICAgICAgICBdKQogICAgICAgICAgICAtPndoZXJlSGFzKCdiYXRjaC5jb3N0Q2VudHJlLnByb2ZpdENlbnRyZScsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnY29tcGFueV9pZCcsIHJlcXVlc3QoKS0+Z2V0KCdjb21wYW55X2lkJykpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAtPndoZW4ocmVxdWVzdCgpLT5nZXQoJ3Byb2R1Y3RfaWQnKSA+IDAsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnZmluYWxfYXNzZXRfaWQnLCByZXF1ZXN0KCktPmdldCgncHJvZHVjdF9pZCcpKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLT53aGVuKCFlbXB0eShyZXF1ZXN0KCktPmdldCgnYXNzZXRfY29kZScpKSwgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdhc3NldF9jb2RlJywgcmVxdWVzdCgpLT5nZXQoJ2Fzc2V0X2NvZGUnKSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC0+Z3JvdXBCeSgnYXNzZXRfY29kZScpCiAgICAgICAgICAgIC0+d2hlcmUoJ2lzX2Rpc3Bvc2VkJywgMCkKICAgICAgICAgICAgLT5nZXQoKTsKCiAgICAgICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAgICAgJ3VzZXJzJyA9PiBVc2VyOjphbGwoKSwKICAgICAgICAgICAgICAgICdpdGVtcycgPT4gJGl0ZW1zLAogICAgICAgICAgICAgICAgJ2ZpeGVkQXNzZXRMb2NhdGlvbnMnID0+IEZpeGVkQXNzZXRMb2NhdGlvbjo6YWxsKCksCiAgICAgICAgICAgICAgICAncHJvZHVjdF9pZCcgPT4gcmVxdWVzdCgpLT5nZXQoJ3Byb2R1Y3RfaWQnKSwKICAgICAgICAgICAgICAgICdhc3NldF9jb2RlJyA9PiByZXF1ZXN0KCktPmdldCgnYXNzZXRfY29kZScpCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMuZml4ZWRBc3NldHMuZml4ZWRBc3NldERpc3RyaWJ1dGlvbnMuaXRlbXMnLCAkZGF0YSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBzdG9yZShSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgIERCOjpiZWdpblRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJ5ewogICAgICAgICAgICAkaXRlbXMgPSBGaXhlZEFzc2V0QmF0Y2hJdGVtOjp3aXRoKFsKICAgICAgICAgICAgICAgICdiYXRjaC5nb29kc1JlY2VpdmVkSXRlbXNTdG9ja0luLnJlbEdvb2RzUmVjZWl2ZWRJdGVtcy5yZWxQcm9kdWN0LmF0dHJpYnV0ZXMuYXR0cmlidXRlT3B0aW9uLmF0dHJpYnV0ZScsCiAgICAgICAgICAgICAgICAndXNlcnMnLCAnY3VycmVudFVzZXInLAogICAgICAgICAgICAgICAgJ2ZpbmFsQXNzZXQuYXR0cmlidXRlcy5hdHRyaWJ1dGVPcHRpb24uYXR0cmlidXRlJwogICAgICAgICAgICBdKQogICAgICAgICAgICAtPndoZW4oJHJlcXVlc3QtPnByb2R1Y3RfaWQgPiAwLCBmdW5jdGlvbigkcXVlcnkpIHVzZSgkcmVxdWVzdCl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnZmluYWxfYXNzZXRfaWQnLCAkcmVxdWVzdC0+cHJvZHVjdF9pZCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC0+d2hlbighZW1wdHkoJHJlcXVlc3QtPmFzc2V0X2NvZGUpLCBmdW5jdGlvbigkcXVlcnkpIHVzZSgkcmVxdWVzdCl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnYXNzZXRfY29kZScsICRyZXF1ZXN0LT5hc3NldF9jb2RlKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLT53aGVyZSgnaXNfZGlzcG9zZWQnLCAwKQogICAgICAgICAgICAtPmdldCgpOwoKCiAgICAgICAgICAgIGlmKGlzc2V0KCRpdGVtc1swXSkpewogICAgICAgICAgICAgICAgZm9yZWFjaCgkaXRlbXMgYXMgJGtleSA9PiAkaXRlbSl7CiAgICAgICAgICAgICAgICAgICAgaWYoJHJlcXVlc3QtPmZpeGVkX2Fzc2V0X2xvY2F0aW9uX2lkWyRpdGVtLT5hc3NldF9jb2RlXSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICAkY3VycmVudFVzZXIgPSBGaXhlZEFzc2V0QmF0Y2hJdGVtVXNlcjo6d2hlcmUoWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpeGVkX2Fzc2V0X2JhdGNoX2l0ZW1faWQnID0+ICRpdGVtLT5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpc190YWtlbicgPT4gMAogICAgICAgICAgICAgICAgICAgICAgICBdKS0+b3JkZXJCeSgnZnJvbScsICdkZXNjJyktPmZpcnN0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAkbmV3ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNzZXQoJGN1cnJlbnRVc2VyLT5pZCkpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGN1cnJlbnRVc2VyLT5maXhlZF9hc3NldF9sb2NhdGlvbl9pZCA9PSAkcmVxdWVzdC0+Zml4ZWRfYXNzZXRfbG9jYXRpb25faWRbJGl0ZW0tPmFzc2V0X2NvZGVdICYmICRjdXJyZW50VXNlci0+dXNlcl9pZCA9PSAkcmVxdWVzdC0+dXNlcl9pZFskaXRlbS0+YXNzZXRfY29kZV0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRuZXcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY3VycmVudFVzZXItPmdpdmluZ19yZW1hcmtzID0gJHJlcXVlc3QtPnJlbWFya3NbJGl0ZW0tPmFzc2V0X2NvZGVdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjdXJyZW50VXNlci0+c2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZigkbmV3KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGlzc2V0KCRjdXJyZW50VXNlci0+aWQpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY3VycmVudFVzZXItPnRvID0gZGF0ZSgnWS1tLWQnLCBzdHJ0b3RpbWUoZGF0ZSgnWS1tLWQnLCBzdHJ0b3RpbWUoJHJlcXVlc3QtPmZyb21bJGl0ZW0tPmFzc2V0X2NvZGVdKSkuJyAtMSBkYXlzJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjdXJyZW50VXNlci0+aXNfdGFrZW4gPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjdXJyZW50VXNlci0+dGFrZW5fcmVtYXJrcyA9ICRyZXF1ZXN0LT5yZW1hcmtzWyRpdGVtLT5hc3NldF9jb2RlXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY3VycmVudFVzZXItPnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaXhlZEFzc2V0QmF0Y2hJdGVtVXNlcjo6Y3JlYXRlKFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZml4ZWRfYXNzZXRfYmF0Y2hfaXRlbV9pZCcgPT4gJGl0ZW0tPmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmaXhlZF9hc3NldF9sb2NhdGlvbl9pZCcgPT4gJHJlcXVlc3QtPmZpeGVkX2Fzc2V0X2xvY2F0aW9uX2lkWyRpdGVtLT5hc3NldF9jb2RlXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXNlcl9pZCcgPT4gJHJlcXVlc3QtPnVzZXJfaWRbJGl0ZW0tPmFzc2V0X2NvZGVdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmcm9tJyA9PiAkcmVxdWVzdC0+ZnJvbVskaXRlbS0+YXNzZXRfY29kZV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2dpdmluZ19yZW1hcmtzJyA9PiAkcmVxdWVzdC0+cmVtYXJrc1skaXRlbS0+YXNzZXRfY29kZV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkcmVxdWVzdC0+dXNlcl9pZFskaXRlbS0+YXNzZXRfY29kZV0gPiAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZXMgPSAnPHNwYW4gY2xhc3M9Im5vdGlmaWNhdGlvbi1saW5rcyIgZGF0YS10aXRsZT0iRml4ZWQgQXNzZXQgRGlzdHJpYnV0aW9uIj5BIE5ldyBGaXhlZCBBc3NldCB3aXRoIEFzc2V0IGNvZGUgIycuJGl0ZW0tPmFzc2V0X2NvZGUuJyBoYXMgYmVlbiBnaXZlbiB0byB5b3UuPC9zcGFuPic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlT3JVcGRhdGVOb3RpZmljYXRpb24oJG1lc3NhZ2VzLCAndW5yZWFkJywgJycsIFskcmVxdWVzdC0+dXNlcl9pZFskaXRlbS0+YXNzZXRfY29kZV1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgREI6OmNvbW1pdCgpOwogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoU3VjY2VzcygiRml4ZWQgSXRlbXMgaGFzIGJlZW4gRGlzdHJpYnV0ZWQgU3VjY2Vzc2Z1bGx5LiIpOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICBEQjo6cm9sbGJhY2soKTsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHNob3coJGlkKQogICAgewogICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAndXNlcnMnID0+IEZpeGVkQXNzZXRCYXRjaEl0ZW1Vc2VyOjp3aXRoKFsKICAgICAgICAgICAgICAgICd1c2VyJywgJ2ZpeGVkQXNzZXRMb2NhdGlvbicKICAgICAgICAgICAgXSkKICAgICAgICAgICAgLT53aGVyZSgnZml4ZWRfYXNzZXRfYmF0Y2hfaXRlbV9pZCcsICRpZCktPmdldCgpCiAgICAgICAgXTsKICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmZpeGVkQXNzZXRzLmZpeGVkQXNzZXREaXN0cmlidXRpb25zLmhpc3RvcnknLCAkZGF0YSk7CiAgICB9Cgp9Cg==