<?php
bolt_decrypt( __FILE__ , 'Vd9Aci'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nXEZpeGVkQXNzZXRzOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xQdXJjaGFzZVxQdXJjaGFzZU9yZGVyOwp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcUmVxdWlzaXRpb25EZWxpdmVyeTsKdXNlIEFwcFxNb2RlbHNcRml4ZWRBc3NldHNcRml4ZWRBc3NldEJhdGNoOwp1c2UgQXBwXE1vZGVsc1xGaXhlZEFzc2V0c1xGaXhlZEFzc2V0QmF0Y2hJdGVtOwp1c2UgQXBwXE1vZGVsc1xGaXhlZEFzc2V0c1xGaXhlZEFzc2V0QmF0Y2hJdGVtRGVwcmVjaWF0aW9uOwp1c2UgQXBwXE1vZGVsc1xGaXhlZEFzc2V0c1xGaXhlZEFzc2V0QmF0Y2hJdGVtVXNlcjsKdXNlIEFwcFxVc2VyOwp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcQ2F0ZWdvcnk7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xQcm9kdWN0OwoKdXNlIEFwcFxNb2RlbHNcUG1zTW9kZWxzXEdyblxHb29kc1JlY2VpdmVkSXRlbVN0b2NrSW47Cgp1c2UgQXBwLERCOwp1c2UgSWxsdW1pbmF0ZVxTdXBwb3J0XEZhY2FkZXNcQXV0aDsKCmNsYXNzIEFzc2V0SGlzdG9yeVJlcG9ydENvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyCnsKICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgJHRpdGxlID0gJ0Fzc2V0IEhpc3RvcnkgUmVwb3J0JzsKICAgICAgICB0cnkgewogICAgICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgICAgICd0aXRsZScgPT4gJHRpdGxlLAogICAgICAgICAgICAgICAgJ3B1cmNoYXNlT3JkZXJzJyA9PiBQdXJjaGFzZU9yZGVyOjp3aGVyZSgnaXNfY2xvc2VkJywgMCkKICAgICAgICAgICAgICAgIC0+d2hlcmVIYXMoJ2Nvc3RDZW50cmUucHJvZml0Q2VudHJlJywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUluKCdjb21wYW55X2lkJywgYXV0aCgpLT51c2VyKCktPmNvbXBhbmllcy0+cGx1Y2soJ2NvbXBhbnlfaWQnKS0+dG9BcnJheSgpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPndoZXJlKGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmVIYXMoJ3JlbFB1cmNoYXNlT3JkZXJJdGVtcy5yZWxQcm9kdWN0JywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2lzX2N3aXAnLCAxKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+b3JXaGVyZUhhcygncHVyY2hhc2VPcmRlclJlcXVpc2l0aW9ucy5yZXF1aXNpdGlvbi5wcm9qZWN0VGFzaycpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+aGFzKCdyZWxHb29kc1JlY2VpdmVkSXRlbVN0b2NrSW4uYmF0Y2hlcycpCiAgICAgICAgICAgICAgICAtPmdldCgpLAogICAgICAgICAgICBdOwogICAgICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmZpeGVkQXNzZXRzLmFzc2V0SGlzdG9yeVJlcG9ydHMuaW5kZXgnLCAkZGF0YSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBjcmVhdGUoKQogICAgewogICAgICAgIGlmKHJlcXVlc3QoKS0+Z2V0KCdhY3Rpb24nKSA9PSAnc3RvY2tzJyl7CiAgICAgICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAgICAgJ3N0b2NrcycgPT4gR29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luOjp3aGVyZSgncHVyY2hhc2Vfb3JkZXJfaWQnLCByZXF1ZXN0KCktPmdldCgncHVyY2hhc2Vfb3JkZXJfaWQnKSkKICAgICAgICAgICAgICAgIC0+d2hlcmUoZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygncmVsR29vZHNSZWNlaXZlZEl0ZW1zLnJlbFByb2R1Y3QnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnaXNfY3dpcCcsIDEpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+aGFzKCdiYXRjaGVzJykKICAgICAgICAgICAgICAgIC0+Z2V0KCksCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMuZml4ZWRBc3NldHMuYXNzZXRIaXN0b3J5UmVwb3J0cy5zdG9ja3MnLCAkZGF0YSk7CiAgICAgICAgfWVsc2VpZihyZXF1ZXN0KCktPmdldCgnYWN0aW9uJykgPT0gJ2l0ZW1zJyl7CgogICAgICAgICAgICAkaXRlbXMgPSBGaXhlZEFzc2V0QmF0Y2hJdGVtOjp3aXRoKFsKICAgICAgICAgICAgICAgICdiYXRjaC5pdGVtcycsCiAgICAgICAgICAgICAgICAnYmF0Y2guZ29vZHNSZWNlaXZlZEl0ZW1zU3RvY2tJbi5yZWxHb29kc1JlY2VpdmVkSXRlbXMucmVsUHJvZHVjdC5hdHRyaWJ1dGVzLmF0dHJpYnV0ZU9wdGlvbi5hdHRyaWJ1dGUnLAogICAgICAgICAgICAgICAgJ2JhdGNoLmdvb2RzUmVjZWl2ZWRJdGVtc1N0b2NrSW4ucmVsR29vZHNSZWNlaXZlZEl0ZW1zLnJlbFByb2R1Y3QucHJvZHVjdFVuaXQnLAogICAgICAgICAgICAgICAgJ2JhdGNoLmdvb2RzUmVjZWl2ZWRJdGVtc1N0b2NrSW4ucmVsR29vZHNSZWNlaXZlZEl0ZW1zLnJlbFByb2R1Y3QuY2F0ZWdvcnkuY2F0ZWdvcnknLAoKICAgICAgICAgICAgICAgICdiYXRjaC5nb29kc1JlY2VpdmVkSXRlbXNTdG9ja0luLnJlbFB1cmNoYXNlT3JkZXIucmVsUHVyY2hhc2VPcmRlckl0ZW1zJywKICAgICAgICAgICAgICAgICdiYXRjaC5nb29kc1JlY2VpdmVkSXRlbXNTdG9ja0luLnJlbFB1cmNoYXNlT3JkZXIucmVsUXVvdGF0aW9uLnJlbFF1b3RhdGlvbkl0ZW1zJywKICAgICAgICAgICAgICAgICdiYXRjaC5nb29kc1JlY2VpdmVkSXRlbXNTdG9ja0luLmFzc2V0Q29zdGluZ0VudHJpZXMnLAoKICAgICAgICAgICAgICAgICdkZXByZWNpYXRpb25zJywKICAgICAgICAgICAgICAgICdjdXJyZW50VXNlci51c2VyJywKICAgICAgICAgICAgXSkKICAgICAgICAgICAgLT53aGVyZUhhcygnYmF0Y2gnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2dvb2RzX3JlY2VpdmVkX2l0ZW1zX3N0b2NrX2luX2lkJywgcmVxdWVzdCgpLT5nZXQoJ2dvb2RzX3JlY2VpdmVkX2l0ZW1zX3N0b2NrX2luX2lkJykpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAtPndoZXJlSGFzKCdiYXRjaC5nb29kc1JlY2VpdmVkSXRlbXNTdG9ja0luJywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdwdXJjaGFzZV9vcmRlcl9pZCcsIHJlcXVlc3QoKS0+Z2V0KCdwdXJjaGFzZV9vcmRlcl9pZCcpKTsKICAgICAgICAgICAgfSktPmdldCgpOwoKICAgICAgICAgICAgJGl0ZW1BcnJheSA9ICRpdGVtcy0+cGx1Y2soJ2lkJyktPnRvQXJyYXkoKTsKICAgICAgICAgICAgJHByb2R1Y3RBcnJheSA9IGFycmF5X3ZhbHVlcyhhcnJheV91bmlxdWUoJGl0ZW1zLT5wbHVjaygnYmF0Y2guZ29vZHNSZWNlaXZlZEl0ZW1zU3RvY2tJbi5yZWxHb29kc1JlY2VpdmVkSXRlbXMucHJvZHVjdF9pZCcpLT50b0FycmF5KCkpKTsKICAgICAgICAgICAgJHByb2R1Y3RzID0gUHJvZHVjdDo6d2hlcmVJbignaWQnLCAkcHJvZHVjdEFycmF5KQogICAgICAgICAgICAtPndoZXJlSGFzKCdjYXRlZ29yeScsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgnaXNfZml4ZWRfYXNzZXQnLCAxKS0+b3JXaGVyZSgnaXNfY3dpcCcsIDEpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAvLyAtPndoZXJlKCdwYXJlbnRfaWQnLCAwKQogICAgICAgICAgICAtPmdldCgpOwoKICAgICAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICAgICAnaXRlbXMnID0+ICRpdGVtcywKICAgICAgICAgICAgICAgICdpdGVtQXJyYXknID0+ICRpdGVtQXJyYXksCiAgICAgICAgICAgICAgICAncHJvZHVjdEFycmF5JyA9PiAkcHJvZHVjdEFycmF5LAogICAgICAgICAgICAgICAgJ3Byb2R1Y3RzJyA9PiAkcHJvZHVjdHMsCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMuZml4ZWRBc3NldHMuYXNzZXRIaXN0b3J5UmVwb3J0cy5pdGVtcycsICRkYXRhKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHN0b3JlKFJlcXVlc3QgJHJlcXVlc3QpCiAgICB7CgogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBzaG93KCRpZCkKICAgIHsKICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgJ3VzZXJzJyA9PiBGaXhlZEFzc2V0QmF0Y2hJdGVtVXNlcjo6d2hlcmUoJ2ZpeGVkX2Fzc2V0X2JhdGNoX2l0ZW1faWQnLCAkaWQpLT5nZXQoKQogICAgICAgIF07CiAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5maXhlZEFzc2V0cy5hc3NldEhpc3RvcnlSZXBvcnRzLmhpc3RvcnknLCAkZGF0YSk7CiAgICB9Cgp9Cg==