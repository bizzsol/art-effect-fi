<?php
bolt_decrypt( __FILE__ , 'kCGnNO'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xCYW5rOwp1c2UgQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQmFua0FjY291bnQ7CnVzZSBBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xCYW5rQnJhbmNoOwp1c2UgSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3Q7CnVzZSBJbGx1bWluYXRlXFN1cHBvcnRcRmFjYWRlc1xEQjsKdXNlIFlhanJhXERhdGFUYWJsZXNcRmFjYWRlc1xEYXRhVGFibGVzOwoKY2xhc3MgQmFua0JyYW5jaGVzQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIKewogICAgcHVibGljIGZ1bmN0aW9uIGhlYWRlckNvbHVtbnMoJHZhbHVlID0gJycpCiAgICB7CiAgICAgICAgcmV0dXJuIGFycmF5KAogICAgICAgICAgICBbJ1NMJywgJ1NMJ10sCiAgICAgICAgICAgIFsnYmFua19uYW1lJywgJ2JhbmtfbmFtZScsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ2NvZGUnLCAnY29kZScsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ3Nob3J0X25hbWUnLCAnc2hvcnRfbmFtZScsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ25hbWUnLCAnbmFtZScsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ3N3aWZ0X2NvZGUnLCAnc3dpZnRfY29kZScsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ3JvdXRpbmdfbm8nLCAncm91dGluZ19ubycsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ2FkZHJlc3MnLCAnYWRkcmVzcycsICd0ZXh0LWNlbnRlciddLAogICAgICAgICAgICBbJ2Rlc2NyaXB0aW9uJywgJ2Rlc2NyaXB0aW9uJywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsnYWN0aW9ucycsICdhY3Rpb25zJywgJ3RleHQtY2VudGVyJ10KICAgICAgICApOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHJlcXVlc3QoKS0+YWpheCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YVRhYmxlczo6b2YoQmFua0JyYW5jaDo6d2l0aChbCiAgICAgICAgICAgICAgICAgICAgJ2JhbmsnCiAgICAgICAgICAgICAgICBdKSkKICAgICAgICAgICAgICAgICAgICAtPmFkZEluZGV4Q29sdW1uKCkKICAgICAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignYmFua19uYW1lJywgZnVuY3Rpb24gKCRiYW5rQnJhbmNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc3NldCgkYmFua0JyYW5jaC0+YmFuay0+bmFtZSkgPyAkYmFua0JyYW5jaC0+YmFuay0+bmFtZSAuICcoJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLiAkYmFua0JyYW5jaC0+YmFuay0+Y29kZSAuICcpJyA6ICcnOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLT5maWx0ZXJDb2x1bW4oJ2JhbmtfbmFtZScsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSGFzKCdiYW5rJywgZnVuY3Rpb24gKCRxdWVyeSkgdXNlICgka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXJ5LT53aGVyZSgnbmFtZScsICdMSUtFJywgJyUnIC4gJGtleXdvcmQgLiAnJScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLT5vcldoZXJlKCdjb2RlJywgJ0xJS0UnLCAnJScgLiAka2V5d29yZCAuICclJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLT5vcmRlckNvbHVtbignYmFua19uYW1lJywgZnVuY3Rpb24gKCRxdWVyeSwgJG9yZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwbGVhc2VTb3J0TWUoJHF1ZXJ5LCAkb3JkZXIsIEJhbms6OnNlbGVjdCgnYmFua3MubmFtZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtPndoZXJlQ29sdW1uKCdiYW5rcy5pZCcsICdiYW5rX2JyYW5jaGVzLmJhbmtfaWQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLT50YWtlKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignYWN0aW9ucycsIGZ1bmN0aW9uICgkYmFua0JyYW5jaCkgewogICAgICAgICAgICAgICAgICAgICAgICAkYWN0aW9ucyA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aCgpLT51c2VyKCktPmhhc1Blcm1pc3Npb25UbygnYmFuay1icmFuY2gtZWRpdCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYWN0aW9ucyAuPSAnPGEgY2xhc3M9ImJ0biBidG4teHMgYnRuLXByaW1hcnkiIGhyZWY9IicgLiB1cmwoJ2FjY291bnRpbmcvYmFuay1icmFuY2hlcy8nIC4gJGJhbmtCcmFuY2gtPmlkIC4gJy9lZGl0JykgLiAnIj48aSBjbGFzcz0ibGEgbGEtZWRpdCI+PC9pPjwvYT4mbmJzcDsnOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aCgpLT51c2VyKCktPmhhc1Blcm1pc3Npb25UbygnYmFuay1icmFuY2gtZGVsZXRlJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhY3Rpb25zIC49ICc8YSBjbGFzcz0iYnRuIGJ0bi14cyBidG4tZGFuZ2VyIiBvbmNsaWNrPSJkZWxldGVGcm9tQ1JVRCgkKHRoaXMpKSIgZGF0YS1zcmM9IicgLiByb3V0ZSgnYWNjb3VudGluZy5iYW5rLWJyYW5jaGVzLmRlc3Ryb3knLCAkYmFua0JyYW5jaC0+aWQpIC4gJyI+PGkgY2xhc3M9ImxhIGxhLXRyYXNoIj48L2k+PC9hPiZuYnNwOyc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkYWN0aW9uczsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC0+cmF3Q29sdW1ucyhbJ2FjdGlvbnMnXSkKICAgICAgICAgICAgICAgICAgICAtPnRvSnNvbigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmJhbmtCcmFuY2hlcy5pbmRleCcsIFsKICAgICAgICAgICAgICAgICd0aXRsZScgPT4gJ0JhbmsgQnJhbmNoZXMnLAogICAgICAgICAgICAgICAgJ2hlYWRlckNvbHVtbnMnID0+ICR0aGlzLT5oZWFkZXJDb2x1bW5zKCkKICAgICAgICAgICAgXSk7CiAgICAgICAgfSBjYXRjaCAoXFRocm93YWJsZSAkdGgpIHsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZSgpCiAgICB7CiAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICd0aXRsZScgPT4gJ05ldyBCYW5rIEJyYW5jaCcsCiAgICAgICAgICAgICdjb2RlJyA9PiB1bmlxdWVDb2RlV2l0aG91dFByZWZpeCgyLCAnYmFua19icmFuY2hlcycsICdjb2RlJyksCiAgICAgICAgICAgICdiYW5rcycgPT4gQmFuazo6YWxsKCksCiAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5iYW5rQnJhbmNoZXMuY3JlYXRlJywgJGRhdGEpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBzdG9yZShSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgICRyZXF1ZXN0LT52YWxpZGF0ZShbCiAgICAgICAgICAgICdiYW5rX2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnY29kZScgPT4gJ3JlcXVpcmVkfHVuaXF1ZTpiYW5rX2JyYW5jaGVzJywKICAgICAgICAgICAgJ3Nob3J0X25hbWUnID0+ICdyZXF1aXJlZHx1bmlxdWU6YmFua19icmFuY2hlcycsCiAgICAgICAgICAgICduYW1lJyA9PiAncmVxdWlyZWR8dW5pcXVlOmJhbmtfYnJhbmNoZXMnLAogICAgICAgICAgICAnc3dpZnRfY29kZScgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ3JvdXRpbmdfbm8nID0+ICdyZXF1aXJlZCcKICAgICAgICBdKTsKCiAgICAgICAgREI6OmJlZ2luVHJhbnNhY3Rpb24oKTsKICAgICAgICB0cnkgewogICAgICAgICAgICAkYmFua0JyYW5jaCA9IEJhbmtCcmFuY2g6OmNyZWF0ZSgkcmVxdWVzdC0+YWxsKCkpOwoKICAgICAgICAgICAgREI6OmNvbW1pdCgpOwogICAgICAgICAgICByZXR1cm4gJHRoaXMtPnJlZGlyZWN0QmFja1dpdGhTdWNjZXNzKCJCYW5rIEJyYW5jaCBoYXMgYmVlbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSIsICdhY2NvdW50aW5nLmJhbmstYnJhbmNoZXMuaW5kZXgnKTsKICAgICAgICB9IGNhdGNoIChcVGhyb3dhYmxlICR0aCkgewogICAgICAgICAgICBEQjo6cm9sbEJhY2soKTsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHNob3coJGlkKQogICAgewoKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZWRpdCgkaWQpCiAgICB7CiAgICAgICAgJGJhbmtCcmFuY2ggPSBCYW5rQnJhbmNoOjp3aXRoKFsnYmFuayddKS0+ZmluZE9yRmFpbCgkaWQpOwoKICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgJ3RpdGxlJyA9PiAnRWRpdCBCYW5rIEJyYW5jaCcsCiAgICAgICAgICAgICdiYW5rQnJhbmNoJyA9PiAkYmFua0JyYW5jaCwKICAgICAgICAgICAgJ2JhbmtzJyA9PiBCYW5rOjphbGwoKSwKICAgICAgICBdOwoKICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmJhbmtCcmFuY2hlcy5lZGl0JywgJGRhdGEpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiB1cGRhdGUoUmVxdWVzdCAkcmVxdWVzdCwgJGlkKQogICAgewogICAgICAgICRyZXF1ZXN0LT52YWxpZGF0ZShbCiAgICAgICAgICAgICdjb2RlJyA9PiAncmVxdWlyZWR8dW5pcXVlOmJhbmtfYnJhbmNoZXMsY29kZSwnIC4gJGlkLAogICAgICAgICAgICAnc2hvcnRfbmFtZScgPT4gJ3JlcXVpcmVkfHVuaXF1ZTpiYW5rX2JyYW5jaGVzLHNob3J0X25hbWUsJyAuICRpZCwKICAgICAgICAgICAgJ25hbWUnID0+ICdyZXF1aXJlZHx1bmlxdWU6YmFua19icmFuY2hlcyxuYW1lLCcgLiAkaWQsCiAgICAgICAgICAgICdiYW5rX2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnc3dpZnRfY29kZScgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ3JvdXRpbmdfbm8nID0+ICdyZXF1aXJlZCcKICAgICAgICBdKTsKCiAgICAgICAgREI6OmJlZ2luVHJhbnNhY3Rpb24oKTsKICAgICAgICB0cnkgewogICAgICAgICAgICAkYmFua0JyYW5jaCA9IEJhbmtCcmFuY2g6OmZpbmQoJGlkKTsKICAgICAgICAgICAgJGJhbmtCcmFuY2gtPmZpbGwoJHJlcXVlc3QtPmFsbCgpKTsKICAgICAgICAgICAgJGJhbmtCcmFuY2gtPnNhdmUoKTsKCiAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdEJhY2tXaXRoU3VjY2VzcygiQmFuayBBY2NvdW50IGhhcyBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IiwgJ2FjY291bnRpbmcuYmFuay1icmFuY2hlcy5pbmRleCcpOwogICAgICAgIH0gY2F0Y2ggKFxUaHJvd2FibGUgJHRoKSB7CiAgICAgICAgICAgIERCOjpyb2xsQmFjaygpOwogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZGVzdHJveSgkaWQpCiAgICB7CiAgICAgICAgREI6OmJlZ2luVHJhbnNhY3Rpb24oKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBCYW5rQnJhbmNoOjpmaW5kKCRpZCktPmRlbGV0ZSgpOwogICAgICAgICAgICBEQjo6Y29tbWl0KCk7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICJCYW5rIEJyYW5jaCBoYXMgYmVlbiBEZWxldGVkISIKICAgICAgICAgICAgXSk7CiAgICAgICAgfSBjYXRjaCAoXFRocm93YWJsZSAkdGgpIHsKICAgICAgICAgICAgREI6OnJvbGxCYWNrKCk7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkdGgtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICBdKTsKICAgICAgICB9CiAgICB9Cn0K