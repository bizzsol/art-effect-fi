<?php
bolt_decrypt( __FILE__ , 'py3Hl0'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKdXNlIEFwcCwgREIsIERhdGFUYWJsZXM7CnVzZSBJbGx1bWluYXRlXFN1cHBvcnRcRmFjYWRlc1xBdXRoOwoKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xDb21wYW55Owp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEFjY291bnRHcm91cDsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xGaXNjYWxZZWFyOwp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEVudHJ5VHlwZTsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xUYWc7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ2hhcnRPZkFjY291bnQ7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcRW50cnk7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcRW50cnlJdGVtOwoKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xDdXJyZW5jeVR5cGU7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ3VycmVuY3k7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcRXhjaGFuZ2VSYXRlOwoKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xGaXNjYWxZZWFyQ2xvc2luZ0xlZGdlcjsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xDbGVhcmluZzsKCnVzZSBcQXBwXFVzZXI7CgpjbGFzcyBSZWNlaXZhYmxlQ2xlYXJpbmdDYW5jZWxsYXRpb25Db250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICBwdWJsaWMgZnVuY3Rpb24gaGVhZGVyQ29sdW1ucygkdmFsdWUgPSAnJykKICAgIHsKICAgICAgICByZXR1cm4gYXJyYXkoCiAgICAgICAgICAgIFsnU0wnLCAnU0wnXSwKICAgICAgICAgICAgWydyZWZlcmVuY2UnLCAncmVmZXJlbmNlJywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsnbGVkZ2VycycsICdsZWRnZXJzJywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsnZW50cnknLCAnZW50cnknLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydjcmVhdGVkX2J5JywgJ2NyZWF0ZWRfYnknLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydjcmVhdGVkX2F0JywgJ2NyZWF0ZWRfYXQnLCAndGV4dC1jZW50ZXInXSwKICAgICAgICAgICAgWydhY3Rpb25zJywgJ2FjdGlvbnMnLCAndGV4dC1jZW50ZXInXQogICAgICAgICk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGluZGV4KCkKICAgIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAocmVxdWVzdCgpLT5hamF4KCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBEYXRhVGFibGVzOjpvZigKICAgICAgICAgICAgICAgICAgICBDbGVhcmluZzo6d2l0aChbCiAgICAgICAgICAgICAgICAgICAgICAgICdlbnRyeS5lbnRyeVR5cGUnLAogICAgICAgICAgICAgICAgICAgICAgICAnZW50cnkuaXRlbXMuY2hhcnRPZkFjY291bnQnLAogICAgICAgICAgICAgICAgICAgICAgICAnY3JlYXRvcicKICAgICAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICAgICAgIC0+d2hlcmUoJ3R5cGUnLCAncmVjZWl2YWJsZScpCiAgICAgICAgICAgICAgICAgICAgLT53aGVyZSgnaXNfY2FuY2VsbGVkJywgMCkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC0+YWRkSW5kZXhDb2x1bW4oKQoKICAgICAgICAgICAgICAgIC0+ZWRpdENvbHVtbignbGVkZ2VycycsIGZ1bmN0aW9uICgkY2xlYXJpbmcpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ2hhcnRPZkFjY291bnQ6OndoZXJlSW4oJ2lkJywganNvbl9kZWNvZGUoJGNsZWFyaW5nLT5sZWRnZXJzLCB0cnVlKSktPnBsdWNrKCduYW1lJyktPmltcGxvZGUoJywgJyk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignZW50cnknLCBmdW5jdGlvbiAoJGNsZWFyaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgaWYoYXV0aCgpLT51c2VyKCktPmhhc1Blcm1pc3Npb25UbygnZW50cnktdmlldycpKXsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICAnPGEgY2xhc3M9InRleHQtcHJpbWFyeSIgb25jbGljaz0iZ2V0U2hvcnREZXRhaWxzKCQodGhpcykpIiBkYXRhLWlkPSInLihpc3NldCgkY2xlYXJpbmctPmVudHJ5LT5pZCkgPyAkY2xlYXJpbmctPmVudHJ5LT5pZCA6ICcnKS4nIiBkYXRhLWVudHJ5LXR5cGU9IicuKGlzc2V0KCRjbGVhcmluZy0+ZW50cnktPmVudHJ5VHlwZS0+bmFtZSkgPyAkY2xlYXJpbmctPmVudHJ5LT5lbnRyeVR5cGUtPm5hbWUgOiAnJykuJyIgZGF0YS1jb2RlPSInLihpc3NldCgkY2xlYXJpbmctPmVudHJ5LT5jb2RlKSA/ICRjbGVhcmluZy0+ZW50cnktPmNvZGUgOiAnJykuJyI+Jy4oaXNzZXQoJGNsZWFyaW5nLT5lbnRyeS0+bnVtYmVyKSA/ICRjbGVhcmluZy0+ZW50cnktPm51bWJlciA6ICcnKS4nPC9hPic7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBpc3NldCgkY2xlYXJpbmctPmVudHJ5LT5udW1iZXIpID8gJGNsZWFyaW5nLT5lbnRyeS0+bnVtYmVyIDogJyc7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5maWx0ZXJDb2x1bW4oJ2VudHJ5JywgZnVuY3Rpb24gKCRxdWVyeSwgJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygnZW50cnknLCBmdW5jdGlvbiAoJHF1ZXJ5KSB1c2UgKCRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRxdWVyeS0+d2hlcmUoJ251bWJlcicsICdMSUtFJywgJyUnIC4gJGtleXdvcmQgLiAnJScpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+b3JkZXJDb2x1bW4oJ2VudHJ5JywgZnVuY3Rpb24gKCRxdWVyeSwgJG9yZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsZWFzZVNvcnRNZSgkcXVlcnksICRvcmRlciwgRW50cnk6OnNlbGVjdCgnZW50cmllcy5udW1iZXInKQogICAgICAgICAgICAgICAgICAgICAgICAtPndoZXJlQ29sdW1uKCdlbnRyaWVzLmlkJywgJ2NsZWFyaW5ncy5lbnRyeV9pZCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC0+dGFrZSgxKQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgIC0+ZWRpdENvbHVtbignY3JlYXRlZF9ieScsIGZ1bmN0aW9uICgkY2xlYXJpbmcpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGNsZWFyaW5nLT5jcmVhdG9yID8gJGNsZWFyaW5nLT5jcmVhdG9yLT5uYW1lIDogJyc7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5maWx0ZXJDb2x1bW4oJ2NyZWF0ZWRfYnknLCBmdW5jdGlvbiAoJHF1ZXJ5LCAka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlSGFzKCdjcmVhdG9yJywgZnVuY3Rpb24gKCRxdWVyeSkgdXNlICgka2V5d29yZCkgewogICAgICAgICAgICAgICAgICAgICAgICAkcXVlcnktPndoZXJlKCduYW1lJywgJ0xJS0UnLCAnJScgLiAka2V5d29yZCAuICclJyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5vcmRlckNvbHVtbignY3JlYXRlZF9ieScsIGZ1bmN0aW9uICgkcXVlcnksICRvcmRlcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBwbGVhc2VTb3J0TWUoJHF1ZXJ5LCAkb3JkZXIsIFVzZXI6OnNlbGVjdCgndXNlcnMubmFtZScpCiAgICAgICAgICAgICAgICAgICAgICAgIC0+d2hlcmVDb2x1bW4oJ3VzZXJzLmlkJywgJ2NsZWFyaW5ncy5jcmVhdGVkX2J5JykKICAgICAgICAgICAgICAgICAgICAgICAgLT50YWtlKDEpCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgICAgLT5lZGl0Q29sdW1uKCdjcmVhdGVkX2F0JywgZnVuY3Rpb24gKCRjbGVhcmluZykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRlKCdZLW0tZCBnOmkgYScsIHN0cnRvdGltZSgkY2xlYXJpbmctPmNyZWF0ZWRfYXQpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbignY3JlYXRlZF9hdCcsIGZ1bmN0aW9uICgkcXVlcnksICRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ2NyZWF0ZWRfYXQnLCAnTElLRScsICclJyAuICRrZXl3b3JkIC4gJyUnKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPm9yZGVyQ29sdW1uKCdjcmVhdGVkX2F0JywgZnVuY3Rpb24gKCRxdWVyeSwgJG9yZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+b3JkZXJCeSgnY3JlYXRlZF9hdCcsICRvcmRlcik7CiAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgIC0+YWRkQ29sdW1uKCdhY3Rpb25zJywgZnVuY3Rpb24gKCRjbGVhcmluZykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAgJzxhIGNsYXNzPSJidG4gYnRuLXhzIGJ0bi1kYW5nZXIiIG9uY2xpY2s9ImNhbmNlbENsZWFyaW5nKCcuKCRjbGVhcmluZy0+aWQpLicpIj48aSBjbGFzcz0ibGFzIGxhLXdpbmRvdy1jbG9zZSI+PC9pPiZuYnNwO0NhbmNlbDwvYT4nOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+cmF3Q29sdW1ucyhbJ2VudHJ5JywgJ2FjdGlvbnMnXSkKICAgICAgICAgICAgICAgIC0+dG9Kc29uKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMuY2xlYXJpbmdzLnJlY2VpdmFibGUuY2FuY2VsJywgWwogICAgICAgICAgICAgICAgJ3RpdGxlJyA9PiAnUmVjZWl2YWJsZSBDbGVhcmluZyBDYW5jZWxsYXRpb24nLAogICAgICAgICAgICAgICAgJ2hlYWRlckNvbHVtbnMnID0+ICR0aGlzLT5oZWFkZXJDb2x1bW5zKCkKICAgICAgICAgICAgXSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiB1cGRhdGUoUmVxdWVzdCAkcmVxdWVzdCwgJGlkKQogICAgewogICAgICAgIERCOjpiZWdpblRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJ5ewogICAgICAgICAgICAkY2xlYXJpbmcgPSBDbGVhcmluZzo6ZmluZE9yRmFpbCgkaWQpOwoKICAgICAgICAgICAgJGFycmF5ID0gW107CiAgICAgICAgICAgIGlmKCRjbGVhcmluZy0+ZW50cnktPml0ZW1zLT5jb3VudCgpID4gMCl7CiAgICAgICAgICAgICAgICBmb3JlYWNoKCRjbGVhcmluZy0+ZW50cnktPml0ZW1zIGFzICRrZXkgPT4gJGl0ZW0pewogICAgICAgICAgICAgICAgICAgIGFycmF5X3B1c2goJGFycmF5LCBbCiAgICAgICAgICAgICAgICAgICAgICAgICdjb3N0X2NlbnRyZV9pZCcgPT4gJGl0ZW0tPmNvc3RfY2VudHJlX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAnY2hhcnRfb2ZfYWNjb3VudF9pZCcgPT4gJGl0ZW0tPmNoYXJ0X29mX2FjY291bnRfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICdkZWJpdCcgPT4gJGl0ZW0tPmRlYml0X2NyZWRpdCA9PSAnQycgPyAkaXRlbS0+YW1vdW50IDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgJ2NyZWRpdCcgPT4gJGl0ZW0tPmRlYml0X2NyZWRpdCA9PSAnRCcgPyAkaXRlbS0+YW1vdW50IDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgJ25hcnJhdGlvbicgPT4gJ1JlYWxpemVkIEdhaW4gR2Fpbi9Mb3NzIENyZWRpdCA6OiBDYW5jZWxsZWQnLAogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAkZW50cnkgPSBzYXZlTGVkZ2VyRW50cmllcyg1LCAkY2xlYXJpbmctPmVudHJ5LT5kYXRlLicgJy4kY2xlYXJpbmctPmVudHJ5LT50aW1lLCAkY2xlYXJpbmctPmVudHJ5LT50YWdfaWQsICRjbGVhcmluZy0+ZW50cnktPm51bWJlciwgJGNsZWFyaW5nLT5lbnRyeS0+bm90ZXMuJyA6OiBDYW5jZWxsZWQnLCAkYXJyYXksICRjbGVhcmluZy0+ZW50cnktPmV4Y2hhbmdlX3JhdGVfaWQsIDAsIDAsIDAsIGdldENvc3RDZW50cmVDb21wYW55KGF1dGgoKS0+dXNlcigpLT5jb3N0Q2VudHJlLT5pZCkpOwoKICAgICAgICAgICAgRW50cnlJdGVtOjp3aGVyZSgnZW50cnlfaWQnLCAkZW50cnlbJ2VudHJ5J10tPmlkKQogICAgICAgICAgICAtPnVwZGF0ZShbCiAgICAgICAgICAgICAgICAncmVhbGl6ZWQnID0+IDEKICAgICAgICAgICAgXSk7CgogICAgICAgICAgICBFbnRyeUl0ZW06OndoZXJlSW4oJ2lkJywganNvbl9kZWNvZGUoJGNsZWFyaW5nLT5lbnRyeV9pdGVtcywgdHJ1ZSkpLT53aGVyZSgncmVhbGl6ZWQnLCAxKQogICAgICAgICAgICAtPnVwZGF0ZShbCiAgICAgICAgICAgICAgICAncmVhbGl6ZWQnID0+IDAKICAgICAgICAgICAgXSk7CgogICAgICAgICAgICAkY2xlYXJpbmctPmlzX2NhbmNlbGxlZCA9IDE7CiAgICAgICAgICAgICRjbGVhcmluZy0+c2F2ZSgpOwogICAgICAgICAgICBEQjo6Y29tbWl0KCk7CgogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiQ2xlYXJpbmcgaGFzIGJlbm4gY2FuY2VsbGVkIHN1Y2Nlc3NmdWxseS4iCiAgICAgICAgICAgIF0pOyAKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgREI6OnJvbGxiYWNrKCk7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkdGgtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICBdKTsKICAgICAgICB9CiAgICB9Cn0K