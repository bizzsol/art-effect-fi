<?php
bolt_decrypt( __FILE__ , 'kNgF3g'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBBcHBcSW1wb3J0c1xFbnRyaWVzSW1wb3J0Owp1c2UgSWxsdW1pbmF0ZVxIdHRwXFJlcXVlc3Q7Cgp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXENvbXBhbnk7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcUHJvZml0Q2VudHJlOwp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXENvc3RDZW50cmU7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcRmlzY2FsWWVhcjsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xFbnRyeVR5cGU7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcVGFnOwp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXENoYXJ0T2ZBY2NvdW50Owp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEVudHJ5Owp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEVudHJ5SXRlbTsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xTdXBwbGllcnM7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcUHVyY2hhc2VcUHVyY2hhc2VPcmRlcjsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xHcm5cR29vZHNSZWNlaXZlZEl0ZW1TdG9ja0luOwp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXFN1cHBsaWVyUGF5bWVudDsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xTdXBwbGllckxlZGdlcnM7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQmFua0FjY291bnQ7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQWR2YW5jZUNhdGVnb3J5Owp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXFB1cmNoYXNlXFB1cmNoYXNlT3JkZXJFbnRyeTsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ3VycmVuY3lUeXBlOwp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEN1cnJlbmN5Owp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEV4Y2hhbmdlUmF0ZTsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcRmlzY2FsWWVhck9wZW5pbmdFbnRyeTsKCnVzZSBBcHAsIERCLCBEYXRhVGFibGVzOwp1c2UgSWxsdW1pbmF0ZVxTdXBwb3J0XEZhY2FkZXNcQXV0aDsKdXNlIE1hYXR3ZWJzaXRlXEV4Y2VsXEZhY2FkZXNcRXhjZWw7CgpjbGFzcyBNdWx0aUN1cnJlbmN5VHJhbnNhY3Rpb25Db250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICBwdWJsaWMgZnVuY3Rpb24gaW5kZXgoKQogICAgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRjb21wYW55ID0gQ29tcGFueTo6aGFzKCdwcm9maXRDZW50cmVzLmNvc3RDZW50cmVzJykKICAgICAgICAgICAgLT53aGVyZSgnaWQnLCByZXF1ZXN0KCktPmdldCgnY29tcGFueV9pZCcpKQogICAgICAgICAgICAtPndoZXJlSGFzKCd1c2VycycsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZSgndXNlcl9pZCcsIGF1dGgoKS0+dXNlcigpLT5pZCk7CiAgICAgICAgICAgIH0pLT5maXJzdCgpOwoKICAgICAgICAgICAgJGVudHJ5VHlwZSA9IEVudHJ5VHlwZTo6d2hlcmUoJ2lkJywgcmVxdWVzdCgpLT5nZXQoJ2VudHJ5X3R5cGVfaWQnKSkKICAgICAgICAgICAgLT53aGVyZUhhcygnY29tcGFuaWVzLmNvbXBhbnkudXNlcnMnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3VzZXJfaWQnLCBhdXRoKCktPnVzZXIoKS0+aWQpOwogICAgICAgICAgICB9KS0+Zmlyc3QoKTsKCiAgICAgICAgICAgICRhY2NvdW50RGVmYXVsdFNldHRpbmdzID0gYWNjb3VudERlZmF1bHRTZXR0aW5ncygpOwoKICAgICAgICAgICAgJGNUeXBlcyA9IEN1cnJlbmN5VHlwZTo6d2l0aChbJ2N1cnJlbmNpZXMnXSktPmdldCgpOwogICAgICAgICAgICAkY3VycmVuY3lUeXBlcyA9ICcnOwogICAgICAgICAgICBpZihpc3NldCgkY1R5cGVzWzBdKSl7CiAgICAgICAgICAgICAgICBmb3JlYWNoKCRjVHlwZXMgYXMgJGtleSA9PiAkY3VycmVuY3lUeXBlKXsKICAgICAgICAgICAgICAgICAgICAkY3VycmVuY3lUeXBlcyAuPSAnPG9wdGdyb3VwIGxhYmVsPSInLiRjdXJyZW5jeVR5cGUtPm5hbWUuJyI+JzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGN1cnJlbmN5VHlwZS0+Y3VycmVuY2llcy0+Y291bnQoKSA+IDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkY3VycmVuY3lUeXBlLT5jdXJyZW5jaWVzIGFzICRrZXkgPT4gJGN1cnJlbmN5KXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY3VycmVuY3lUeXBlcyAuPSAnPG9wdGlvbiB2YWx1ZT0iJy4kY3VycmVuY3ktPmlkLiciICcuKCRhY2NvdW50RGVmYXVsdFNldHRpbmdzWydjdXJyZW5jeV9pZCddID09ICRjdXJyZW5jeS0+aWQgPyAnc2VsZWN0ZWQnIDogJycpLic+Jm5ic3A7Jm5ic3A7Jy4kY3VycmVuY3ktPmNvZGUuJzwvb3B0aW9uPic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkY3VycmVuY3lUeXBlcyAuPSAnPC9vcHRncm91cD4nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgICAgICd0aXRsZScgPT4gJ011bHRpcGxlIEN1cnJlbmN5IFRyYW5zYWN0aW9uJy4oaXNzZXQoJGVudHJ5VHlwZS0+bmFtZSkgPyAnIDo6ICcuJGVudHJ5VHlwZS0+bmFtZSA6ICcnKSwKICAgICAgICAgICAgICAgICdhY2NvdW50RGVmYXVsdFNldHRpbmdzJyA9PiAkYWNjb3VudERlZmF1bHRTZXR0aW5ncywKICAgICAgICAgICAgICAgICdzeXN0ZW1DdXJyZW5jeScgPT4gc3lzdGVtQ3VycmVuY3koJGFjY291bnREZWZhdWx0U2V0dGluZ3NbJ2N1cnJlbmN5X2lkJ10sICRhY2NvdW50RGVmYXVsdFNldHRpbmdzKSwKICAgICAgICAgICAgICAgICdjb21wYW5pZXMnID0+IENvbXBhbnk6OmhhcygncHJvZml0Q2VudHJlcy5jb3N0Q2VudHJlcycpCiAgICAgICAgICAgICAgICAtPndoZXJlSGFzKCd1c2VycycsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3VzZXJfaWQnLCBhdXRoKCktPnVzZXIoKS0+aWQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+Z2V0KCksCiAgICAgICAgICAgICAgICAnZW50cnlUeXBlcycgPT4gRW50cnlUeXBlOjp3aGVyZUhhcygnY29tcGFuaWVzLmNvbXBhbnkudXNlcnMnLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCd1c2VyX2lkJywgYXV0aCgpLT51c2VyKCktPmlkKTsKICAgICAgICAgICAgICAgIH0pLT5nZXQoKSwKICAgICAgICAgICAgICAgICdjb21wYW55JyA9PiAkY29tcGFueSwKICAgICAgICAgICAgICAgICdlbnRyeVR5cGUnID0+ICRlbnRyeVR5cGUsCiAgICAgICAgICAgICAgICAnZmlzY2FsWWVhcicgPT4gaXNzZXQoJGNvbXBhbnktPmlkKSA/IGdldEFjdGl2ZUZpc2NhbFllYXIoJGNvbXBhbnktPmlkKSA6IGZhbHNlLAogICAgICAgICAgICAgICAgJ2Zpc2NhbFllYXJzJyA9PiBGaXNjYWxZZWFyOjp3aGVyZUhhcygnZmlzY2FsWWVhck9wZW5pbmdzJywgZnVuY3Rpb24oJHF1ZXJ5KSB1c2UoJGNvbXBhbnkpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdzdGF0dXMnLCAnb3BlbmVkJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLT53aGVyZSgnaXNfYXBwcm92ZWQnLCAnYXBwcm92ZWQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtPndoZXJlKCdjb21wYW55X2lkJywgaXNzZXQoJGNvbXBhbnktPmlkKSA/ICRjb21wYW55LT5pZCA6IDApOwogICAgICAgICAgICAgICAgfSktPmdldCgpLAogICAgICAgICAgICAgICAgJ2N1cnJlbmN5VHlwZXMnID0+ICRjdXJyZW5jeVR5cGVzLAogICAgICAgICAgICAgICAgJ2Nvc3RDZW50cmVzJyA9PiBpc3NldCgkY29tcGFueS0+aWQpID8gZ2V0Q29zdENlbnRyZXModHJ1ZSwgJGNvbXBhbnktPmlkKSA6ICcnLAogICAgICAgICAgICAgICAgJ2NoYXJ0T2ZBY2NvdW50c09wdGlvbnMnID0+IGNoYXJ0T2ZBY2NvdW50c09wdGlvbnMoW10sIDAsIDAsIGdldEFsbEdyb3VwQW5kTGVkZ2Vycyhpc3NldCgkZW50cnlUeXBlLT5pZCkgPyAkZW50cnlUeXBlLT5pZCA6IGZhbHNlLCB0cnVlKSwgZmFsc2UsICd5ZXMnKSwKICAgICAgICAgICAgXTsKCiAgICAgICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMubXVsdGktY3VycmVuY3ktdHJhbnNhY3Rpb24uaW5kZXgnLCAkZGF0YSk7CiAgICAgICAgfSBjYXRjaCAoXFRocm93YWJsZSAkdGgpIHsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHN0b3JlKFJlcXVlc3QgJHJlcXVlc3QpCiAgICB7CiAgICAgICAgJHJlcXVlc3QtPnZhbGlkYXRlKFsKICAgICAgICAgICAgJ2NvbXBhbnlfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdlbnRyeV90eXBlX2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnZmlzY2FsX3llYXJfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdjb3N0X2NlbnRyZV9pZCcgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ2Nvc3RfY2VudHJlX2lkLionID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdjaGFydF9vZl9hY2NvdW50X2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnY2hhcnRfb2ZfYWNjb3VudF9pZC4qJyA9PiAncmVxdWlyZWQnLAogICAgICAgIF0pOwoKICAgICAgICBpZiAoYXJyYXlfc3VtKCRyZXF1ZXN0LT5kZWJpdCkgPD0gMCB8fCBhcnJheV9zdW0oJHJlcXVlc3QtPmNyZWRpdCkgPD0gMCkgewogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gIlBsZWFzZSBhZGQgc29tZSBEZWJpdCBvciBDcmVkaXQgYW1vdW50IgogICAgICAgICAgICBdKTsKICAgICAgICB9CgogICAgICAgICRkZWJpdHMgPSBbXTsKICAgICAgICAkY3JlZGl0cyA9IFtdOwogICAgICAgICRjdXJyZW5jaWVzID0gQ3VycmVuY3k6OndoZXJlSW4oJ2lkJywgJHJlcXVlc3QtPmN1cnJlbmN5X2lkKS0+Z2V0KCk7CiAgICAgICAgaWYoaXNzZXQoJHJlcXVlc3QtPmN1cnJlbmN5X2lkWzBdKSl7CiAgICAgICAgICAgIGZvcmVhY2ggKCRyZXF1ZXN0LT5jdXJyZW5jeV9pZCBhcyAka2V5ID0+ICR2YWx1ZSkgewogICAgICAgICAgICAgICAgJGRlYml0c1skdmFsdWVdW10gPSAkcmVxdWVzdC0+ZGViaXRbJGtleV07CiAgICAgICAgICAgICAgICAkY3JlZGl0c1skdmFsdWVdW10gPSAkcmVxdWVzdC0+Y3JlZGl0WyRrZXldOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3JlYWNoICgkcmVxdWVzdC0+Y3VycmVuY3lfaWQgYXMgJGtleSA9PiAkdmFsdWUpIHsKICAgICAgICAgICAgICAgIGlmKGFycmF5X3N1bSgkZGViaXRzWyR2YWx1ZV0pICE9IGFycmF5X3N1bSgkY3JlZGl0c1skdmFsdWVdKSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiRGViaXQgJiBjcmVkaXQgQW1vdW50IG9mICIuJGN1cnJlbmNpZXMtPndoZXJlKCdpZCcsICR2YWx1ZSktPmZpcnN0KCktPm5hbWUuIiBkb2Vzbm90IG1hdGNoZWQhIgogICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBEQjo6YmVnaW5UcmFuc2FjdGlvbigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRmaXNjYWxZZWFyID0gRmlzY2FsWWVhcjo6d2l0aChbCiAgICAgICAgICAgICAgICAnZmlzY2FsWWVhck9wZW5pbmdzJwogICAgICAgICAgICBdKS0+ZmluZE9yRmFpbCgkcmVxdWVzdC0+ZmlzY2FsX3llYXJfaWQpOwogICAgICAgICAgICBpZigoc3RydG90aW1lKGRhdGUoJ1ktbS1kJywgc3RydG90aW1lKCRyZXF1ZXN0LT5kYXRldGltZSkpKSA8IHN0cnRvdGltZSgkZmlzY2FsWWVhci0+c3RhcnQpKSB8fCAoc3RydG90aW1lKGRhdGUoJ1ktbS1kJywgc3RydG90aW1lKCRyZXF1ZXN0LT5kYXRldGltZSkpKSA+IHN0cnRvdGltZSgkZmlzY2FsWWVhci0+ZW5kKSkpewogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gIkRhdGV0aW1lIGlzIG5vdCBpbiB0aGUgcmFuZ2Ugb2YgdGhlIGZpc2NhbCB5ZWFyIHBlcmlvZC4iCiAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGVudHJ5VHlwZSA9IEVudHJ5VHlwZTo6ZmluZE9yRmFpbCgkcmVxdWVzdC0+ZW50cnlfdHlwZV9pZCk7CiAgICAgICAgICAgICRjb21wYW55ID0gQ29tcGFueTo6ZmluZE9yRmFpbCgkcmVxdWVzdC0+Y29tcGFueV9pZCk7CgogICAgICAgICAgICAkbnVtYmVyID0gJHJlcXVlc3QtPm51bWJlcjsKICAgICAgICAgICAgJGVudHJpZXMgPSBbXTsKICAgICAgICAgICAgaWYoaXNzZXQoJGN1cnJlbmNpZXNbMF0pKXsKICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRjdXJyZW5jaWVzIGFzICRrZXkgPT4gJGN1cnJlbmN5KSB7CiAgICAgICAgICAgICAgICAgICAgJGl0ZW1zID0gW107CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzc2V0KCRyZXF1ZXN0LT5jaGFydF9vZl9hY2NvdW50X2lkWzBdKSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkcmVxdWVzdC0+Y2hhcnRfb2ZfYWNjb3VudF9pZCBhcyAka2V5ID0+ICRjaGFydF9vZl9hY2NvdW50X2lkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkcmVxdWVzdC0+Y3VycmVuY3lfaWRbJGtleV0gPT0gJGN1cnJlbmN5LT5pZCl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlfcHVzaCgkaXRlbXMsIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Nvc3RfY2VudHJlX2lkJyA9PiAkcmVxdWVzdC0+Y29zdF9jZW50cmVfaWRbJGtleV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjaGFydF9vZl9hY2NvdW50X2lkJyA9PiAkcmVxdWVzdC0+Y2hhcnRfb2ZfYWNjb3VudF9pZFska2V5XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RlYml0JyA9PiAkcmVxdWVzdC0+ZGViaXRbJGtleV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjcmVkaXQnID0+ICRyZXF1ZXN0LT5jcmVkaXRbJGtleV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhbW91bnQnID0+ICgkcmVxdWVzdC0+ZGViaXRbJGtleV0gPiAwID8gJHJlcXVlc3QtPmRlYml0WyRrZXldIDogJHJlcXVlc3QtPmNyZWRpdFska2V5XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkZWJpdF9jcmVkaXQnID0+ICgkcmVxdWVzdC0+ZGViaXRbJGtleV0gPiAwID8gJ0QnIDogJ0MnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hcnJhdGlvbicgPT4gJHJlcXVlc3QtPm5hcnJhdGlvblska2V5XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAkZW50cnkgPSBzYXZlTGVkZ2VyRW50cmllcygkZW50cnlUeXBlLT5pZCwgJHJlcXVlc3QtPmRhdGV0aW1lLCAxLCAkbnVtYmVyLCAkcmVxdWVzdC0+bm90ZXMsICRpdGVtcywgZ2V0RXhjaGFuZ2VSYXRlcygkY3VycmVuY3ktPmlkLCBkYXRlKCdZLW0tZCcsIHN0cnRvdGltZSgkcmVxdWVzdC0+ZGF0ZXRpbWUpKSwgZGF0ZSgnSDppOnMnLCBzdHJ0b3RpbWUoJHJlcXVlc3QtPmRhdGV0aW1lKSkpWydyYXRlJ10tPmlkLCAxLCAwLCAxLCAkY29tcGFueS0+aWQsICRmaXNjYWxZZWFyKTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNzZXQoJGVudHJ5WydlbnRyeSddLT5pZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlfcHVzaCgkZW50cmllcywgJGVudHJ5WydlbnRyeSddLT5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICRudW1iZXIgPSAkZW50cnlbJ2VudHJ5J10tPm51bWJlcjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpc3NldCgkZW50cmllc1swXSkpIHsKICAgICAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiVHJhbnNhY3Rpb24gaGFzIGJlZW4gcG9zdGVkIHN1Y2Nlc3NmdWxseS4iLAogICAgICAgICAgICAgICAgICAgICdlbnRyaWVzJyA9PiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMubXVsdGktY3VycmVuY3ktdHJhbnNhY3Rpb24udHJhbnNhY3Rpb25zJywgWwogICAgICAgICAgICAgICAgICAgICAgICAnZW50cmllcycgPT4gRW50cnk6OndpdGgoWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2VudHJ5VHlwZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXhjaGFuZ2VSYXRlLmN1cnJlbmN5JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmaXNjYWxZZWFyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpdGVtcy5jaGFydE9mQWNjb3VudC5hY2NvdW50R3JvdXAnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2l0ZW1zLmNvc3RDZW50cmUucHJvZml0Q2VudHJlLmNvbXBhbnknLAogICAgICAgICAgICAgICAgICAgICAgICBdKS0+d2hlcmVJbignaWQnLCAkZW50cmllcyktPmdldCgpLAogICAgICAgICAgICAgICAgICAgIF0pLT5yZW5kZXIoKSwKICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgREI6OnJvbGxiYWNrKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiU29tZXRoaW5nIHdlbnQgd3JvbmchIgogICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChcVGhyb3dhYmxlICR0aCkgewogICAgICAgICAgICBEQjo6cm9sbGJhY2soKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICR0aC0+Z2V0TWVzc2FnZSgpCiAgICAgICAgICAgIF0pOwogICAgICAgIH0KICAgIH0KfQo=