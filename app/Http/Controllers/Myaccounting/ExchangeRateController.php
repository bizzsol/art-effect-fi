<?php
bolt_decrypt( __FILE__ , 'fP8HQy'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ3VycmVuY3lUeXBlOwp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEN1cnJlbmN5Owp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEV4Y2hhbmdlUmF0ZTsKCnVzZSBBcHAsREI7CnVzZSBJbGx1bWluYXRlXFN1cHBvcnRcRmFjYWRlc1xBdXRoOwoKY2xhc3MgRXhjaGFuZ2VSYXRlQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIKewogICAgcHVibGljIGZ1bmN0aW9uIGluZGV4KCkKICAgIHsKICAgICAgICAkdGl0bGUgPSAnRXhjaGFuZ2UgUmF0ZXMnOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAgICAgJ3RpdGxlJyA9PiAkdGl0bGUsCiAgICAgICAgICAgICAgICAnY3VycmVuY3lUeXBlcycgPT4gQ3VycmVuY3lUeXBlOjphbGwoKSwKICAgICAgICAgICAgICAgICdleGNoYW5nZVJhdGVzJyA9PiBFeGNoYW5nZVJhdGU6OndoZW4ocmVxdWVzdCgpLT5oYXMoJ2N1cnJlbmN5X2lkJykgJiYgcmVxdWVzdCgpLT5nZXQoJ2N1cnJlbmN5X2lkJykgPiAwLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCdjdXJyZW5jeV9pZCcsIHJlcXVlc3QoKS0+Z2V0KCdjdXJyZW5jeV9pZCcpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPndoZW4ocmVxdWVzdCgpLT5oYXMoJ2Zyb20nKSAmJiAhZW1wdHkocmVxdWVzdCgpLT5nZXQoJ2Zyb20nKSksIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoREI6OnJhdygnc3Vic3RyKGBkYXRldGltZWAsIDEsIDEwKScpLCAnPj0nLCByZXF1ZXN0KCktPmdldCgnZnJvbScpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPndoZW4ocmVxdWVzdCgpLT5oYXMoJ3RvJykgJiYgIWVtcHR5KHJlcXVlc3QoKS0+Z2V0KCd0bycpKSwgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZShEQjo6cmF3KCdzdWJzdHIoYGRhdGV0aW1lYCwgMSwgMTApJyksICc8PScsIHJlcXVlc3QoKS0+Z2V0KCd0bycpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPm9yZGVyQnkoJ2RhdGV0aW1lJywgJ2Rlc2MnKQogICAgICAgICAgICAgICAgLT5nZXQoKSwKICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5jdXJyZW5jeS5leGNoYW5nZVJhdGVzLmluZGV4JywgJGRhdGEpOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gY3JlYXRlKCkKICAgIHsKICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgJ3RpdGxlJyA9PiAnTmV3IEV4Y2hhbmdlIFJhdGUnLAogICAgICAgICAgICAncmVmZXJlbmNlJyA9PiBzdHJ0b3VwcGVyKFxTdHI6OnJhbmRvbSg4KSksCiAgICAgICAgICAgICdjdXJyZW5jeVR5cGVzJyA9PiBDdXJyZW5jeVR5cGU6OmFsbCgpLAogICAgICAgIF07CgogICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMuY3VycmVuY3kuZXhjaGFuZ2VSYXRlcy5jcmVhdGUnLCAkZGF0YSk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHN0b3JlKFJlcXVlc3QgJHJlcXVlc3QpCiAgICB7CiAgICAgICAgJHJlcXVlc3QtPnZhbGlkYXRlKFsKICAgICAgICAgICAgJ2N1cnJlbmN5X2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAncmVmZXJlbmNlJyA9PiAncmVxdWlyZWR8dW5pcXVlOmV4Y2hhbmdlX3JhdGVzJywKICAgICAgICAgICAgJ2RhdGUnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICd0aW1lJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnZXhjaGFuZ2VfcmF0ZXMnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdleGNoYW5nZV9yYXRlcy4qJyA9PiAncmVxdWlyZWQnLAogICAgICAgIF0pOwoKICAgICAgICBEQjo6YmVnaW5UcmFuc2FjdGlvbigpOwogICAgICAgIHRyeXsKICAgICAgICAgICAgJHJhdGUgPSBFeGNoYW5nZVJhdGU6OndoZXJlKFsKICAgICAgICAgICAgICAgICdjdXJyZW5jeV9pZCcgPT4gJHJlcXVlc3QtPmN1cnJlbmN5X2lkLAogICAgICAgICAgICAgICAgJ2RhdGV0aW1lJyA9PiAkcmVxdWVzdC0+ZGF0ZS4nICcuJHJlcXVlc3QtPnRpbWUsCiAgICAgICAgICAgIF0pLT5maXJzdCgpOwoKICAgICAgICAgICAgaWYoaXNzZXQoJHJhdGUtPmlkKSl7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiQW4gRXhjaGFuZ2UgcmF0ZSBBbHJlYWR5IHN0b3JlZCB3aXRoaW4gdGhpcyB0aW1lbGluZS4iCiAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHJhdGUgPSBuZXcgRXhjaGFuZ2VSYXRlKCk7CiAgICAgICAgICAgICRyYXRlLT5maWxsKCRyZXF1ZXN0LT5hbGwoKSk7CiAgICAgICAgICAgICRyYXRlLT5kYXRldGltZSA9ICRyZXF1ZXN0LT5kYXRlLicgJy4kcmVxdWVzdC0+dGltZTsKICAgICAgICAgICAgJHJhdGUtPnJhdGVzID0ganNvbl9lbmNvZGUoJHJlcXVlc3QtPmV4Y2hhbmdlX3JhdGVzKTsKICAgICAgICAgICAgJHJhdGUtPnNhdmUoKTsKCiAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgc2Vzc2lvbigpLT5mbGFzaCgnbWVzc2FnZScsICJFeGNoYW5nZSBSYXRlIGhhcyBiZWVuIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgIHNlc3Npb24oKS0+Zmxhc2goJ2FsZXJ0LXR5cGUnLCAnc3VjY2VzcycpOwogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gdHJ1ZQogICAgICAgICAgICBdKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgREI6OnJvbGxiYWNrKCk7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkdGgtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICBdKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHNob3coJGlkKQogICAgewogICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAnY3VycmVuY3lUeXBlcycgPT4gQ3VycmVuY3lUeXBlOjphbGwoKSwKICAgICAgICAgICAgJ2N1cnJlbmN5X2lkJyA9PiAkaWQsCiAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5jdXJyZW5jeS5leGNoYW5nZVJhdGVzLnJhdGVzJywgJGRhdGEpOwogICAgfQp9Cg==