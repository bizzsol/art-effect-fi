<?php
bolt_decrypt( __FILE__ , 'PUO7jk'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ2hhcnRPZkFjY291bnQ7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQWR2YW5jZUNhdGVnb3J5OwoKdXNlIEFwcCxEQjsKdXNlIElsbHVtaW5hdGVcU3VwcG9ydFxGYWNhZGVzXEF1dGg7CnVzZSBEYXRhVGFibGVzOwoKY2xhc3MgQWR2YW5jZUNhdGVnb3J5Q29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIKewoKICAgIHB1YmxpYyBmdW5jdGlvbiBoZWFkZXJDb2x1bW5zKCR2YWx1ZT0nJykKICAgIHsKICAgICAgICAkcm93cyA9ICBhcnJheSgKICAgICAgICAgICAgWydTTCcsICdTTCddLAogICAgICAgICAgICBbJ2NvZGUnLCAnY29kZScsJ3RleHQtbGVmdCddLAogICAgICAgICAgICBbJ25hbWUnLCAnbmFtZScsJ3RleHQtbGVmdCddLAogICAgICAgICAgICBbJ2dyb3VwJywgJ2dyb3VwJywgJ3RleHQtbGVmdCddLAogICAgICAgICAgICBbJ2xlZGdlcicsICdsZWRnZXInLCAndGV4dC1sZWZ0J10sIAogICAgICAgICAgICBbJ2Rlc2NyaXB0aW9uJywgJ2Rlc2NyaXB0aW9uJywgJ3RleHQtbGVmdCddLAogICAgICAgICAgICBbJ2FjdGlvbnMnLCAnYWN0aW9ucycsICd0ZXh0LWNlbnRlciddCiAgICAgICAgKTsKCiAgICAgICAgcmV0dXJuICRyb3dzOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgJHRpdGxlID0gJ0FkdmFuY2UgQ2F0ZWdvcmllcyc7CiAgICAgICAgdHJ5IHsKCiAgICAgICAgICAgICRhZHZhbmNlQ2F0ZWdvcmllcyA9IEFkdmFuY2VDYXRlZ29yeTo6d2l0aChbJ2NoYXJ0T2ZBY2NvdW50LmFjY291bnRHcm91cCddKQogICAgICAgICAgICAtPndoZW4oIWRhdGF0YWJsZU9yZGVyaW5nKCksIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT5vcmRlcmJ5KCdpZCcsICdkZXNjJyk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgJG9wdGlvbnMgPSBbCiAgICAgICAgICAgICAgICAnYWR2YW5jZS1jYXRlZ29yeS1lZGl0JyA9PiBhdXRoKCktPnVzZXIoKS0+aGFzUGVybWlzc2lvblRvKCdhZHZhbmNlLWNhdGVnb3J5LWVkaXQnKSwKICAgICAgICAgICAgICAgICdhZHZhbmNlLWNhdGVnb3J5LWRlbGV0ZScgPT4gYXV0aCgpLT51c2VyKCktPmhhc1Blcm1pc3Npb25UbygnYWR2YW5jZS1jYXRlZ29yeS1kZWxldGUnKQogICAgICAgICAgICBdOwoKICAgICAgICAgICAgaWYgKHJlcXVlc3QoKS0+YWpheCgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gRGF0YXRhYmxlczo6b2YoJGFkdmFuY2VDYXRlZ29yaWVzKQogICAgICAgICAgICAgICAgLT5hZGRJbmRleENvbHVtbigpCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignZ3JvdXAnLCBmdW5jdGlvbigkYWR2YW5jZUNhdGVnb3J5KSB7CiAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNzZXQoJGFkdmFuY2VDYXRlZ29yeS0+Y2hhcnRPZkFjY291bnQpID8gJ1snLiRhZHZhbmNlQ2F0ZWdvcnktPmNoYXJ0T2ZBY2NvdW50LT5hY2NvdW50R3JvdXAtPmNvZGUuJ10gJy4kYWR2YW5jZUNhdGVnb3J5LT5jaGFydE9mQWNjb3VudC0+YWNjb3VudEdyb3VwLT5uYW1lIDogJyc7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5maWx0ZXJDb2x1bW4oJ2dyb3VwJywgZnVuY3Rpb24gKCRxdWVyeSwgJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygnY2hhcnRPZkFjY291bnQuYWNjb3VudEdyb3VwJywgZnVuY3Rpb24gKCRxdWVyeSkgdXNlKCRrZXl3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRxdWVyeS0+d2hlcmUoJ25hbWUnLCAnTElLRScsICclJy4ka2V5d29yZC4nJScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0+b3J3aGVyZSgnY29kZScsICdMSUtFJywgJyUnLiRrZXl3b3JkLiclJyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ2xlZGdlcicsIGZ1bmN0aW9uKCRhZHZhbmNlQ2F0ZWdvcnkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNzZXQoJGFkdmFuY2VDYXRlZ29yeS0+Y2hhcnRPZkFjY291bnQpID8gJ1snLiRhZHZhbmNlQ2F0ZWdvcnktPmNoYXJ0T2ZBY2NvdW50LT5jb2RlLiddICcuJGFkdmFuY2VDYXRlZ29yeS0+Y2hhcnRPZkFjY291bnQtPm5hbWUgOiAnJzsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmZpbHRlckNvbHVtbignbGVkZ2VyJywgZnVuY3Rpb24gKCRxdWVyeSwgJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHF1ZXJ5LT53aGVyZUhhcygnY2hhcnRPZkFjY291bnQnLCBmdW5jdGlvbiAoJHF1ZXJ5KSB1c2UoJGtleXdvcmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHF1ZXJ5LT53aGVyZSgnbmFtZScsICdMSUtFJywgJyUnLiRrZXl3b3JkLiclJyktPm9yd2hlcmUoJ2NvZGUnLCAnTElLRScsICclJy4ka2V5d29yZC4nJScpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ2FjdGlvbnMnLCBmdW5jdGlvbigkYWR2YW5jZUNhdGVnb3J5KSB1c2UoJG9wdGlvbnMpewogICAgICAgICAgICAgICAgICAgICRhY3Rpb25zID0gJyc7CgogICAgICAgICAgICAgICAgICAgIGlmKCRvcHRpb25zWydhZHZhbmNlLWNhdGVnb3J5LWVkaXQnXSl7CiAgICAgICAgICAgICAgICAgICAgICAgICRhY3Rpb25zIC49ICc8YSBjbGFzcz0iYnRuIGJ0bi14cyBidG4tcHJpbWFyeSByb3VuZGVkLWNpcmNsZSBtLTEiIGhyZWY9IicuIHVybCgnYWNjb3VudGluZy9hZHZhbmNlLWNhdGVnb3JpZXMvJy4kYWR2YW5jZUNhdGVnb3J5LT5pZC4nL2VkaXQnKS4nIj48aSBjbGFzcz0ibGFzIGxhLWVkaXQiPjwvaT48L2E+JzsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmKCRvcHRpb25zWydhZHZhbmNlLWNhdGVnb3J5LWRlbGV0ZSddKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGFjdGlvbnMgLj0gJzxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgY2xhc3M9ImJ0biBidG4teHMgYnRuLWRhbmdlciBtLTEiIGRhdGEtc3JjPSInLnJvdXRlKCdhY2NvdW50aW5nLmFkdmFuY2UtY2F0ZWdvcmllcy5kZXN0cm95JywgJGFkdmFuY2VDYXRlZ29yeS0+aWQpLiciIG9uY2xpY2s9ImRlbGV0ZUZyb21DUlVEKCQodGhpcykpIj48aSBjbGFzcz0ibGEgbGEtdHJhc2giPjwvaT48L2E+JzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRhY3Rpb25zOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+cmF3Q29sdW1ucyhbJ2dyb3VwJywnbGVkZ2VyJywnYWN0aW9ucyddKQogICAgICAgICAgICAgICAgLT5tYWtlKHRydWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgICAgICd0aXRsZScgPT4gJHRpdGxlLAogICAgICAgICAgICAgICAgJ2hlYWRlckNvbHVtbnMnPT4gJHRoaXMtPmhlYWRlckNvbHVtbnMoKSwKICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5hZHZhbmNlQ2F0ZWdvcmllcy5pbmRleCcsICRkYXRhKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZSgpCiAgICB7CiAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICd0aXRsZScgPT4gJ05ldyBBZHZhbmNlIGNhdGVnb3J5JywKICAgICAgICBdOwoKICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmFkdmFuY2VDYXRlZ29yaWVzLmNyZWF0ZScsICRkYXRhKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gc3RvcmUoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkcmVxdWVzdC0+dmFsaWRhdGUoWwogICAgICAgICAgICAnY29kZScgPT4gJ3JlcXVpcmVkfHVuaXF1ZTphZHZhbmNlX2NhdGVnb3JpZXMnLAogICAgICAgICAgICAnbmFtZScgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ2NoYXJ0X29mX2FjY291bnRfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgXSk7CgogICAgICAgIHRyeXsKICAgICAgICAgICAgQWR2YW5jZUNhdGVnb3J5OjpjcmVhdGUoJHJlcXVlc3QtPmFsbCgpKTsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdEJhY2tXaXRoU3VjY2VzcygiQWR2YW5jZSBjYXRlZ29yeSBoYXMgYmVlbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSIsICdhY2NvdW50aW5nLmFkdmFuY2UtY2F0ZWdvcmllcy5jcmVhdGUnKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHNob3coJGlkKQogICAgewogICAgICAgIAogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBlZGl0KCRpZCkKICAgIHsKICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgJ3RpdGxlJyA9PiAnRWRpdCBBZHZhbmNlIGNhdGVnb3J5JywKICAgICAgICAgICAgJ2FkdmFuY2VDYXRlZ29yeScgPT4gQWR2YW5jZUNhdGVnb3J5OjpmaW5kT3JGYWlsKCRpZCkKICAgICAgICBdOwoKICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmFkdmFuY2VDYXRlZ29yaWVzLmVkaXQnLCAkZGF0YSk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHVwZGF0ZShSZXF1ZXN0ICRyZXF1ZXN0LCAkaWQpCiAgICB7CiAgICAgICAgJHJlcXVlc3QtPnZhbGlkYXRlKFsKICAgICAgICAgICAgJ2NvZGUnID0+ICdyZXF1aXJlZHx1bmlxdWU6YWR2YW5jZV9jYXRlZ29yaWVzLGNvZGUsJy4kaWQsCiAgICAgICAgICAgICduYW1lJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnY2hhcnRfb2ZfYWNjb3VudF9pZCcgPT4gJ3JlcXVpcmVkJywKICAgICAgICBdKTsKCiAgICAgICAgdHJ5ewogICAgICAgICAgICBBZHZhbmNlQ2F0ZWdvcnk6OmZpbmQoJGlkKS0+ZmlsbCgkcmVxdWVzdC0+YWxsKCkpLT5zYXZlKCk7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+cmVkaXJlY3RCYWNrV2l0aFN1Y2Nlc3MoIkFkdmFuY2UgY2F0ZWdvcnkgaGFzIGJlZW4gdXBkYXRlZCBzdWNjZXNzZnVsbHkiLCAnYWNjb3VudGluZy5hZHZhbmNlLWNhdGVnb3JpZXMuaW5kZXgnKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGRlc3Ryb3koJGlkKQogICAgewogICAgICAgIHRyeXsKICAgICAgICAgICAgQWR2YW5jZUNhdGVnb3J5OjpmaW5kKCRpZCktPmRlbGV0ZSgpOwogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAiQWR2YW5jZSBjYXRlZ29yeSBoYXMgYmVlbiBEZWxldGVkISIKICAgICAgICAgICAgXSk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkdGgtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICBdKTsKICAgICAgICB9CiAgICB9Cn0K