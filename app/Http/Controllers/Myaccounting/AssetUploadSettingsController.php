<?php
bolt_decrypt( __FILE__ , 'LUvbW0'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ29tcGFueTsKdXNlIERCOwoKY2xhc3MgQXNzZXRVcGxvYWRTZXR0aW5nc0NvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyCnsKICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICAgICAndGl0bGUnID0+ICdBc3NldCBVcGxvYWQgU2V0dGluZ3MnLAogICAgICAgICAgICAgICAgJ2FsbCcgPT4gZ2V0QWxsR3JvdXBBbmRMZWRnZXJzKGZhbHNlLCB0cnVlKSwKICAgICAgICAgICAgICAgICdjb21wYW5pZXMnID0+IENvbXBhbnk6OmhhcygncHJvZml0Q2VudHJlcy5jb3N0Q2VudHJlcycpCiAgICAgICAgICAgICAgICAtPndoZXJlSGFzKCd1c2VycycsIGZ1bmN0aW9uKCRxdWVyeSl7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+d2hlcmUoJ3VzZXJfaWQnLCBhdXRoKCktPnVzZXIoKS0+aWQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+Z2V0KCksCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMuZml4ZWRBc3NldHMuYXNzZXRVcGxvYWRTZXR0aW5ncycsICRkYXRhKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHN0b3JlKFJlcXVlc3QgJHJlcXVlc3QpCiAgICB7CiAgICAgICAgJHJlcXVlc3QtPnZhbGlkYXRlKFsKICAgICAgICAgICAgLy8gJ2Fzc2V0X2Nvc3RfbGVkZ2VyX2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAvLyAnYXNzZXRfY29zdF9sZWRnZXJfaWQuKicgPT4gJ3JlcXVpcmVkJywKCiAgICAgICAgICAgICdiYWxhbmNlX3VwbG9hZF9jbGVhcmluZ19sZWRnZXJfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdiYWxhbmNlX3VwbG9hZF9jbGVhcmluZ19sZWRnZXJfaWQuKicgPT4gJ3JlcXVpcmVkJywKCiAgICAgICAgICAgIC8vICdhY2N1bXVsYXRlZF9kZXByZWNpYXRpb25fbGVkZ2VyX2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAvLyAnYWNjdW11bGF0ZWRfZGVwcmVjaWF0aW9uX2xlZGdlcl9pZC4qJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAKICAgICAgICAgICAgLy8gJ2RlcHJlY2lhdGlvbl9leHBlbnNlX2xlZGdlcl9pZCcgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgLy8gJ2RlcHJlY2lhdGlvbl9leHBlbnNlX2xlZGdlcl9pZC4qJyA9PiAncmVxdWlyZWQnLAogICAgICAgIF0pOwoKICAgICAgICBEQjo6YmVnaW5UcmFuc2FjdGlvbigpOwogICAgICAgIHRyeXsKICAgICAgICAgICAgJGNvbXBhbmllcyA9IENvbXBhbnk6OmhhcygncHJvZml0Q2VudHJlcy5jb3N0Q2VudHJlcycpCiAgICAgICAgICAgIC0+d2hlcmVIYXMoJ3VzZXJzJywgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPndoZXJlKCd1c2VyX2lkJywgYXV0aCgpLT51c2VyKCktPmlkKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLT5nZXQoKTsKICAgICAgICAgICAgaWYoaXNzZXQoJGNvbXBhbmllc1swXSkpewogICAgICAgICAgICAgICAgZm9yZWFjaCgkY29tcGFuaWVzIGFzICRjb21wYW55KXsKICAgICAgICAgICAgICAgICAgICAvLyAkY29tcGFueS0+YXNzZXRfY29zdF9sZWRnZXJfaWQgPSAkcmVxdWVzdC0+YXNzZXRfY29zdF9sZWRnZXJfaWRbJGNvbXBhbnktPmlkXTsKICAgICAgICAgICAgICAgICAgICAkY29tcGFueS0+YmFsYW5jZV91cGxvYWRfY2xlYXJpbmdfbGVkZ2VyX2lkID0gJHJlcXVlc3QtPmJhbGFuY2VfdXBsb2FkX2NsZWFyaW5nX2xlZGdlcl9pZFskY29tcGFueS0+aWRdOwogICAgICAgICAgICAgICAgICAgIC8vICRjb21wYW55LT5hY2N1bXVsYXRlZF9kZXByZWNpYXRpb25fbGVkZ2VyX2lkID0gJHJlcXVlc3QtPmFjY3VtdWxhdGVkX2RlcHJlY2lhdGlvbl9sZWRnZXJfaWRbJGNvbXBhbnktPmlkXTsKICAgICAgICAgICAgICAgICAgICAvLyAkY29tcGFueS0+ZGVwcmVjaWF0aW9uX2V4cGVuc2VfbGVkZ2VyX2lkID0gJHJlcXVlc3QtPmRlcHJlY2lhdGlvbl9leHBlbnNlX2xlZGdlcl9pZFskY29tcGFueS0+aWRdOwogICAgICAgICAgICAgICAgICAgICRjb21wYW55LT5zYXZlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aFN1Y2Nlc3MoIkFzc2V0IFVwbG9hZCBTZXR0aW5ncyBoYXZlIGJlZW4gVXBkYXRlZC4iKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgREI6OnJvbGxiYWNrKCk7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQp9Cg==