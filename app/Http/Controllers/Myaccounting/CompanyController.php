<?php
bolt_decrypt( __FILE__ , '0xCfkD'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQ29tcGFueTsKCnVzZSBBcHAsREI7CnVzZSBJbGx1bWluYXRlXFN1cHBvcnRcRmFjYWRlc1xBdXRoOwp1c2UgRGF0YVRhYmxlczsKCmNsYXNzIENvbXBhbnlDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CgogICAgLyoqCiAgICAgKiBTZXQgZ2xvYmFsIGRhdGEgdGFibGUgaGVhZGVycy4KICAgICAqCiAgICAgKiBAcmV0dXJuIGhlYWRlckNvbHVtbnMKICAgICAqLwogICAgIHB1YmxpYyBmdW5jdGlvbiBoZWFkZXJDb2x1bW5zKCR2YWx1ZT0nJykKICAgICB7CiAgICAgICAgJHJvd3MgPSAgYXJyYXkoCiAgICAgICAgICAgIFsnU0wnLCAnU0wnXSwKICAgICAgICAgICAgWydjb2RlJywgJ2NvZGUnLF0sCiAgICAgICAgICAgIFsnbmFtZScsICduYW1lJ10sCiAgICAgICAgICAgIFsnb3duZXJfbmFtZScsICdvd25lcl9uYW1lJywgJ3RleHQtbGVmdCddLAogICAgICAgICAgICBbJ3Bob25lJywgJ3Bob25lJywgJ3RleHQtY2VudGVyJ10sIAogICAgICAgICAgICBbJ2VtYWlsJywgJ2VtYWlsJywgJ3RleHQtY2VudGVyJ10sCiAgICAgICAgICAgIFsnYWRkcmVzcycsICdhZGRyZXNzJywgJ3RleHQtbGVmdCddLCAKICAgICAgICAgICAgWydsb2dvJywgJ2xvZ28nLCAndGV4dC1sZWZ0J10sIAogICAgICAgICAgICBbJ2Jhbm5lcicsICdiYW5uZXInLCAndGV4dC1sZWZ0J10sIAogICAgICAgICAgICBbJ2FjdGlvbnMnLCAnYWN0aW9ucycsICd0ZXh0LWNlbnRlciddLAogICAgICAgICk7CiAgICAgICAgcmV0dXJuICRyb3dzOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgJHRpdGxlID0gJ0xpc3Qgb2YgQ29tcGFuaWVzJzsKICAgICAgICB0cnkgewoKICAgICAgICAgICAgJGNvbXBhbmllcz1Db21wYW55Ojp3aGVuKCFkYXRhdGFibGVPcmRlcmluZygpLCBmdW5jdGlvbigkcXVlcnkpewogICAgICAgICAgICAgICAgcmV0dXJuICRxdWVyeS0+b3JkZXJieSgnaWQnLCAnZGVzYycpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICRvcHRpb25zPVsKICAgICAgICAgICAgICAgICdjb21wYW55LXByb2ZpbGUnPT5hdXRoKCktPnVzZXIoKS0+aGFzUGVybWlzc2lvblRvKCdjb21wYW55LXByb2ZpbGUnKSwKICAgICAgICAgICAgICAgICdjb21wYW55LWVkaXQnPT5hdXRoKCktPnVzZXIoKS0+aGFzUGVybWlzc2lvblRvKCdjb21wYW55LWVkaXQnKSwKICAgICAgICAgICAgICAgICdjb21wYW55LWRlbGV0ZSc9PmF1dGgoKS0+dXNlcigpLT5oYXNQZXJtaXNzaW9uVG8oJ2NvbXBhbnktZGVsZXRlJyksCiAgICAgICAgICAgIF07CgogICAgICAgICAgICBpZiAocmVxdWVzdCgpLT5hamF4KCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBEYXRhdGFibGVzOjpvZigkY29tcGFuaWVzKQogICAgICAgICAgICAgICAgLT5hZGRJbmRleENvbHVtbigpCiAgICAgICAgICAgICAgICAtPmVkaXRDb2x1bW4oJ2xvZ28nLCBmdW5jdGlvbigkY29tcGFueSl7CiAgICAgICAgICAgICAgICAgICAgaWYoIWVtcHR5KCRjb21wYW55LT5sb2dvKSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnPGltZyBzcmM9IicuYXNzZXQoJGNvbXBhbnktPmxvZ28pLiciIHN0eWxlPSJtYXgtaGVpZ2h0OiAyNXB4Ij4nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmVkaXRDb2x1bW4oJ2Jhbm5lcicsIGZ1bmN0aW9uKCRjb21wYW55KXsKICAgICAgICAgICAgICAgICAgICBpZighZW1wdHkoJGNvbXBhbnktPmJhbm5lcikpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxpbWcgc3JjPSInLmFzc2V0KCRjb21wYW55LT5iYW5uZXIpLiciIHN0eWxlPSJtYXgtaGVpZ2h0OiAyNXB4Ij4nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPmFkZENvbHVtbignYWN0aW9ucycsIGZ1bmN0aW9uKCRjb21wYW55KSB1c2UoJG9wdGlvbnMpewogICAgICAgICAgICAgICAgICAgICRhY3Rpb25zPScnOwoKICAgICAgICAgICAgICAgICAgICBpZigkb3B0aW9uc1snY29tcGFueS1wcm9maWxlJ10pewogICAgICAgICAgICAgICAgICAgICAgICAkYWN0aW9ucy49JzxhIGNsYXNzPSJidG4gYnRuLXhzIGJ0bi1zdWNjZXNzIiBocmVmPSInLnVybCgnYWNjb3VudGluZy9jb21wYW5pZXMvJy4kY29tcGFueS0+aWQpLiciPjxpIGNsYXNzPSJsYXIgbGEtYWRkcmVzcy1jYXJkIj48L2k+PC9hPic7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKCRvcHRpb25zWydjb21wYW55LWVkaXQnXSl7CiAgICAgICAgICAgICAgICAgICAgICAgICRhY3Rpb25zLj0nPGEgY2xhc3M9ImJ0biBidG4teHMgYnRuLXByaW1hcnkgbWwtMSIgaHJlZj0iJy51cmwoJ2FjY291bnRpbmcvY29tcGFuaWVzLycuJGNvbXBhbnktPmlkLicvZWRpdCcpLiciPjxpIGNsYXNzPSJsYSBsYS1lZGl0Ij48L2k+PC9hPic7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZigkb3B0aW9uc1snY29tcGFueS1kZWxldGUnXSl7CiAgICAgICAgICAgICAgICAgICAgICAgICRhY3Rpb25zLj0nPGEgY2xhc3M9ImJ0biBidG4teHMgYnRuLWRhbmdlciBkZWxldGVCdG4gbWwtMSIgb25jbGljaz0iZGVsZXRlQnRuKCQodGhpcykpIiBkYXRhLXNyYz0iJy4gcm91dGUoJ2FjY291bnRpbmcuY29tcGFuaWVzLmRlc3Ryb3knLCAkY29tcGFueS0+aWQpLiciPjxpIGNsYXNzPSJsYSBsYS10cmFzaCI+PC9pPjwvYT4nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGFjdGlvbnM7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5yYXdDb2x1bW5zKFsnbG9nbycsJ2Jhbm5lcicsJ2FjdGlvbnMnXSkKICAgICAgICAgICAgICAgIC0+bWFrZSh0cnVlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICAgICAndGl0bGUnID0+ICR0aXRsZSwKICAgICAgICAgICAgICAgICdoZWFkZXJDb2x1bW5zJyA9PiAkdGhpcy0+aGVhZGVyQ29sdW1ucygpLAogICAgICAgICAgICBdOwogICAgICAgICAgICByZXR1cm4gdmlldygnYWNjb3VudGluZy5iYWNrZW5kLnBhZ2VzLmNvbXBhbmllcy5pbmRleCcsICRkYXRhKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZSgpCiAgICB7CiAgICAgICAgJGRhdGEgPSBbCiAgICAgICAgICAgICd0aXRsZScgPT4gJ05ldyBDb21wYW55JywKICAgICAgICAgICAgJ2NvZGUnID0+IHVuaXF1ZUNvZGVXaXRob3V0UHJlZml4KDIsJ2NvbXBhbmllcycsJ2NvZGUnKQogICAgICAgIF07CgogICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMuY29tcGFuaWVzLmNyZWF0ZScsICRkYXRhKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gc3RvcmUoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkcmVxdWVzdC0+dmFsaWRhdGUoWwogICAgICAgICAgICAnY29kZScgPT4gJ3JlcXVpcmVkfHVuaXF1ZTpjb21wYW5pZXMnLAogICAgICAgICAgICAnbmFtZScgPT4gJ3JlcXVpcmVkfHVuaXF1ZTpjb21wYW5pZXMnLAogICAgICAgICAgICAnb3duZXJfbmFtZScgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ3Bob25lJyA9PiBbJ3JlcXVpcmVkJywgJ3N0cmluZycsICdtYXg6MTQnLCAncmVnZXg6L14oWzAtOVxzXC1cK1woXCldKikkLyddLAogICAgICAgICAgICAnZW1haWwnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdhZGRyZXNzJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnbG9nb19maWxlJyA9PiBbJ3JlcXVpcmVkJywnbWltZXM6anBlZyxqcGcscG5nLGdpZicsICdtYXg6MzA3MiddLAogICAgICAgICAgICAnYmFubmVyX2ZpbGUnID0+IFsncmVxdWlyZWQnLCdtaW1lczpqcGVnLGpwZyxwbmcsZ2lmJywgJ21heDozMDcyJ10sCiAgICAgICAgXSk7CgogICAgICAgIERCOjpiZWdpblRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJ5ewogICAgICAgICAgICAkY29tcGFueSA9IENvbXBhbnk6OmNyZWF0ZSgkcmVxdWVzdC0+YWxsKCkpOwogICAgICAgICAgICBpZigkcmVxdWVzdC0+aGFzRmlsZSgnbG9nb19maWxlJykpewogICAgICAgICAgICAgICAgJGNvbXBhbnktPmxvZ28gPSAkdGhpcy0+ZmlsZVVwbG9hZCgkcmVxdWVzdC0+ZmlsZSgnbG9nb19maWxlJyksICd1cGxvYWQvY29tcGFueS9sb2dvJyk7CiAgICAgICAgICAgICAgICAkY29tcGFueS0+c2F2ZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkcmVxdWVzdC0+aGFzRmlsZSgnYmFubmVyX2ZpbGUnKSl7CiAgICAgICAgICAgICAgICAkY29tcGFueS0+YmFubmVyID0gJHRoaXMtPmZpbGVVcGxvYWQoJHJlcXVlc3QtPmZpbGUoJ2Jhbm5lcl9maWxlJyksICd1cGxvYWQvY29tcGFueS9iYW5uZXInKTsKICAgICAgICAgICAgICAgICRjb21wYW55LT5zYXZlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdEJhY2tXaXRoU3VjY2VzcygiQ29tcGFueSBoYXMgYmVlbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSIsICdhY2NvdW50aW5nLmNvbXBhbmllcy5jcmVhdGUnKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgREI6OnJvbGxiYWNrKCk7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+YmFja1dpdGhFcnJvcigkdGgtPmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBzaG93KCRpZCkKICAgIHsKICAgICAgICAkY29tcGFueSA9IENvbXBhbnk6OmZpbmRPckZhaWwoJGlkKTsKICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgJ3RpdGxlJyA9PiAnQ29tcGFueSBQcm9maWxlIC0gIycuJGNvbXBhbnktPm5hbWUsCiAgICAgICAgICAgICdjb21wYW55JyA9PiAkY29tcGFueQogICAgICAgIF07CgogICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMuY29tcGFuaWVzLnByb2ZpbGUnLCAkZGF0YSk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGVkaXQoJGlkKQogICAgewogICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAndGl0bGUnID0+ICdFZGl0IENvbXBhbnknLAogICAgICAgICAgICAnY29tcGFueScgPT4gQ29tcGFueTo6ZmluZE9yRmFpbCgkaWQpCiAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy5jb21wYW5pZXMuZWRpdCcsICRkYXRhKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gdXBkYXRlKFJlcXVlc3QgJHJlcXVlc3QsICRpZCkKICAgIHsKICAgICAgICAkcmVxdWVzdC0+dmFsaWRhdGUoWwogICAgICAgICAgICAnY29kZScgPT4gJ3JlcXVpcmVkfHVuaXF1ZTpjb21wYW5pZXMsY29kZSwnLiRpZCwKICAgICAgICAgICAgJ25hbWUnID0+ICdyZXF1aXJlZHx1bmlxdWU6Y29tcGFuaWVzLG5hbWUsJy4kaWQsCiAgICAgICAgICAgICdvd25lcl9uYW1lJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAncGhvbmUnID0+IFsncmVxdWlyZWQnLCAnc3RyaW5nJywgJ21heDoxNCcsICdyZWdleDovXihbMC05XHNcLVwrXChcKV0qKSQvJ10sCiAgICAgICAgICAgICdlbWFpbCcgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ2FkZHJlc3MnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgXSk7CgogICAgICAgIGlmKCRyZXF1ZXN0LT5oYXNGaWxlKCdsb2dvX2ZpbGUnKSl7CiAgICAgICAgICAgICRyZXF1ZXN0LT52YWxpZGF0ZShbCiAgICAgICAgICAgICAgICAnbG9nb19maWxlJyA9PiBbJ3JlcXVpcmVkJywnbWltZXM6anBlZyxqcGcscG5nLGdpZicsICdtYXg6MzA3MiddLAogICAgICAgICAgICBdKTsKICAgICAgICB9CgogICAgICAgIGlmKCRyZXF1ZXN0LT5oYXNGaWxlKCdiYW5uZXJfZmlsZScpKXsKICAgICAgICAgICAgJHJlcXVlc3QtPnZhbGlkYXRlKFsKICAgICAgICAgICAgICAgICdiYW5uZXJfZmlsZScgPT4gWydyZXF1aXJlZCcsJ21pbWVzOmpwZWcsanBnLHBuZyxnaWYnLCAnbWF4OjMwNzInXSwKICAgICAgICAgICAgXSk7CiAgICAgICAgfQoKICAgICAgICBEQjo6YmVnaW5UcmFuc2FjdGlvbigpOwogICAgICAgIHRyeXsKICAgICAgICAgICAgJGNvbXBhbnkgPSBDb21wYW55OjpmaW5kKCRpZCk7CiAgICAgICAgICAgICRjb21wYW55LT5maWxsKCRyZXF1ZXN0LT5hbGwoKSk7CiAgICAgICAgICAgICRjb21wYW55LT5zYXZlKCk7CgogICAgICAgICAgICBpZigkcmVxdWVzdC0+aGFzRmlsZSgnbG9nb19maWxlJykpewogICAgICAgICAgICAgICAgaWYoIWVtcHR5KCRjb21wYW55LT5sb2dvKSAmJiBmaWxlX2V4aXN0cyhwdWJsaWNfcGF0aCgkY29tcGFueS0+bG9nbykpKXsKICAgICAgICAgICAgICAgICAgICB1bmxpbmsocHVibGljX3BhdGgoJGNvbXBhbnktPmxvZ28pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRjb21wYW55LT5sb2dvID0gJHRoaXMtPmZpbGVVcGxvYWQoJHJlcXVlc3QtPmZpbGUoJ2xvZ29fZmlsZScpLCAndXBsb2FkL2NvbXBhbnkvbG9nbycpOwogICAgICAgICAgICAgICAgJGNvbXBhbnktPnNhdmUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJHJlcXVlc3QtPmhhc0ZpbGUoJ2Jhbm5lcl9maWxlJykpewogICAgICAgICAgICAgICAgaWYoIWVtcHR5KCRjb21wYW55LT5iYW5uZXIpICYmIGZpbGVfZXhpc3RzKHB1YmxpY19wYXRoKCRjb21wYW55LT5iYW5uZXIpKSl7CiAgICAgICAgICAgICAgICAgICAgdW5saW5rKHB1YmxpY19wYXRoKCRjb21wYW55LT5iYW5uZXIpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRjb21wYW55LT5iYW5uZXIgPSAkdGhpcy0+ZmlsZVVwbG9hZCgkcmVxdWVzdC0+ZmlsZSgnYmFubmVyX2ZpbGUnKSwgJ3VwbG9hZC9jb21wYW55L2Jhbm5lcicpOwogICAgICAgICAgICAgICAgJGNvbXBhbnktPnNhdmUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgREI6OmNvbW1pdCgpOwogICAgICAgICAgICByZXR1cm4gJHRoaXMtPnJlZGlyZWN0QmFja1dpdGhTdWNjZXNzKCJDb21wYW55IGhhcyBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IiwgJ2FjY291bnRpbmcuY29tcGFuaWVzLmluZGV4Jyk7CiAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgIERCOjpyb2xsYmFjaygpOwogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZGVzdHJveSgkaWQpCiAgICB7CiAgICAgICAgREI6OmJlZ2luVHJhbnNhY3Rpb24oKTsKICAgICAgICB0cnl7CiAgICAgICAgICAgICRjb21wYW55ID0gQ29tcGFueTo6ZmluZCgkaWQpOwogICAgICAgICAgICBpZighZW1wdHkoJGNvbXBhbnktPmxvZ28pICYmIGZpbGVfZXhpc3RzKHB1YmxpY19wYXRoKCRjb21wYW55LT5sb2dvKSkpewogICAgICAgICAgICAgICAgdW5saW5rKHB1YmxpY19wYXRoKCRjb21wYW55LT5sb2dvKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCFlbXB0eSgkY29tcGFueS0+YmFubmVyKSAmJiBmaWxlX2V4aXN0cyhwdWJsaWNfcGF0aCgkY29tcGFueS0+YmFubmVyKSkpewogICAgICAgICAgICAgICAgdW5saW5rKHB1YmxpY19wYXRoKCRjb21wYW55LT5iYW5uZXIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkZGVsZXRlID0gQ29tcGFueTo6ZmluZCgkaWQpLT5kZWxldGUoKTsKCiAgICAgICAgICAgIERCOjpjb21taXQoKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IHRydWUsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gIkNvbXBhbnkgaGFzIGJlZW4gRGVsZXRlZCEiCiAgICAgICAgICAgIF0pOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICBEQjo6cm9sbGJhY2soKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICR0aC0+Z2V0TWVzc2FnZSgpCiAgICAgICAgICAgIF0pOwogICAgICAgIH0KICAgIH0KfQo=