<?php
bolt_decrypt( __FILE__ , 'HhGq5c'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcTXlhY2NvdW50aW5nOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xUYWc7CnVzZSBBcHAsREI7CnVzZSBJbGx1bWluYXRlXFN1cHBvcnRcRmFjYWRlc1xBdXRoOwp1c2UgRGF0YVRhYmxlczsKCmNsYXNzIFRhZ3NDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICAvKioKICAgICAqIFNldCBnbG9iYWwgZGF0YSB0YWJsZSBoZWFkZXJzLgogICAgICoKICAgICAqIEByZXR1cm4gaGVhZGVyQ29sdW1ucwogICAgICovCiAgICAgcHVibGljIGZ1bmN0aW9uIGhlYWRlckNvbHVtbnMoJHZhbHVlPScnKQogICAgIHsKICAgICAgICAkcm93cyA9ICBhcnJheSgKICAgICAgICAgICAgWydTTCcsICdTTCddLAogICAgICAgICAgICBbJ3RpdGxlJywgJ3RpdGxlJyxdLAogICAgICAgICAgICBbJ2NvbG9yJywgJ2NvbG9yJ10sCiAgICAgICAgICAgIFsnYmFja2dyb3VuZCcsICdiYWNrZ3JvdW5kJywgJ3RleHQtbGVmdCddLAogICAgICAgICAgICBbJ2FjdGlvbnMnLCAnYWN0aW9ucycsICd0ZXh0LWNlbnRlciddLAogICAgICAgICk7CiAgICAgICAgcmV0dXJuICRyb3dzOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBpbmRleCgpCiAgICB7CiAgICAgICAgJHRpdGxlID0gJ1RhZ3MnOwogICAgICAgIHRyeSB7CgogICAgICAgICAgICAkdGFncyA9IFRhZzo6d2hlbighZGF0YXRhYmxlT3JkZXJpbmcoKSwgZnVuY3Rpb24oJHF1ZXJ5KXsKICAgICAgICAgICAgICAgIHJldHVybiAkcXVlcnktPm9yZGVyYnkoJ2lkJywgJ2Rlc2MnKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAkb3B0aW9ucz1bCiAgICAgICAgICAgICAgICAndGFnLWVkaXQnPT5hdXRoKCktPnVzZXIoKS0+aGFzUGVybWlzc2lvblRvKCd0YWctZWRpdCcpLAogICAgICAgICAgICAgICAgJ3RhZy1kZWxldGUnPT5hdXRoKCktPnVzZXIoKS0+aGFzUGVybWlzc2lvblRvKCd0YWctZGVsZXRlJyksCiAgICAgICAgICAgIF07CgogICAgICAgICAgICBpZiAocmVxdWVzdCgpLT5hamF4KCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBEYXRhdGFibGVzOjpvZigkdGFncykKICAgICAgICAgICAgICAgIC0+YWRkSW5kZXhDb2x1bW4oKQogICAgICAgICAgICAgICAgLT5lZGl0Q29sdW1uKCdjb2xvcicsIGZ1bmN0aW9uKCR0YWcpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAnPHNwYW4gc3R5bGU9ImJhY2tncm91bmQ6ICcuJHRhZy0+YmFja2dyb3VuZCAuJztjb2xvcjogJy4gJHRhZy0+Y29sb3IuJyI+Jy4gJHRhZy0+Y29sb3IuJzwvc3Bhbj4nOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC0+ZWRpdENvbHVtbignYmFja2dyb3VuZCcsIGZ1bmN0aW9uKCR0YWcpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAnPHNwYW4gc3R5bGU9ImJhY2tncm91bmQ6ICcuJHRhZy0+YmFja2dyb3VuZCAuJztjb2xvcjogJy4gJHRhZy0+Y29sb3IuJyI+Jy4gJHRhZy0+YmFja2dyb3VuZC4nPC9zcGFuPic7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLT5hZGRDb2x1bW4oJ2FjdGlvbnMnLCBmdW5jdGlvbigkdGFnKSB1c2UoJG9wdGlvbnMpewogICAgICAgICAgICAgICAgICAgICRhY3Rpb25zPScnOwoKICAgICAgICAgICAgICAgICAgICBpZigkb3B0aW9uc1sndGFnLWVkaXQnXSl7CiAgICAgICAgICAgICAgICAgICAgICAgICRhY3Rpb25zLj0nPGEgY2xhc3M9ImJ0biBidG4teHMgYnRuLXByaW1hcnkiIGhyZWY9IicudXJsKCdhY2NvdW50aW5nL3RhZ3MvJy4kdGFnLT5pZC4nL2VkaXQnKSAuJyI+PGkgY2xhc3M9ImxhIGxhLWVkaXQiPjwvaT48L2E+JzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoJG9wdGlvbnNbJ3RhZy1kZWxldGUnXSl7CiAgICAgICAgICAgICAgICAgICAgICAgICRhY3Rpb25zLj0nPGEgY2xhc3M9ImJ0biBidG4teHMgYnRuLWRhbmdlciBkZWxldGVCdG4gbWwtMiIgb25jbGljaz0iZGVsZXRlQnRuKCQodGhpcykpIiBkYXRhLXNyYz0iJy5yb3V0ZSgnYWNjb3VudGluZy50YWdzLmRlc3Ryb3knLCAkdGFnLT5pZCkuJyI+PGkgY2xhc3M9ImxhIGxhLXRyYXNoIj48L2k+PC9hPic7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiAkYWN0aW9uczsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAtPnJhd0NvbHVtbnMoWydjb2xvcicsJ2JhY2tncm91bmQnLCdhY3Rpb25zJ10pCiAgICAgICAgICAgICAgICAtPm1ha2UodHJ1ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRkYXRhID0gWwogICAgICAgICAgICAgICAgJ3RpdGxlJyA9PiAkdGl0bGUsCiAgICAgICAgICAgICAgICAnaGVhZGVyQ29sdW1ucycgPT4gJHRoaXMtPmhlYWRlckNvbHVtbnMoKSwKICAgICAgICAgICAgXTsKCiAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy50YWdzLmluZGV4JywgJGRhdGEpOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gY3JlYXRlKCkKICAgIHsKICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgJ3RpdGxlJyA9PiAnTmV3IFRhZycsCiAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuIHZpZXcoJ2FjY291bnRpbmcuYmFja2VuZC5wYWdlcy50YWdzLmNyZWF0ZScsICRkYXRhKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gc3RvcmUoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkcmVxdWVzdC0+dmFsaWRhdGUoWwogICAgICAgICAgICAndGl0bGUnID0+ICdyZXF1aXJlZHx1bmlxdWU6dGFncycsCiAgICAgICAgICAgICdjb2xvcicgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ2JhY2tncm91bmQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgXSk7CgogICAgICAgIHRyeXsKICAgICAgICAgICAgVGFnOjpjcmVhdGUoJHJlcXVlc3QtPmFsbCgpKTsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdEJhY2tXaXRoU3VjY2VzcygiVGFnIGhhcyBiZWVuIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IiwgJ2FjY291bnRpbmcudGFncy5jcmVhdGUnKTsKICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5iYWNrV2l0aEVycm9yKCR0aC0+Z2V0TWVzc2FnZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHNob3coJGlkKQogICAgewogICAgICAgIAogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBlZGl0KCRpZCkKICAgIHsKICAgICAgICAkZGF0YSA9IFsKICAgICAgICAgICAgJ3RpdGxlJyA9PiAnRWRpdCBUYWcnLAogICAgICAgICAgICAndGFnJyA9PiBUYWc6OmZpbmRPckZhaWwoJGlkKQogICAgICAgIF07CgogICAgICAgIHJldHVybiB2aWV3KCdhY2NvdW50aW5nLmJhY2tlbmQucGFnZXMudGFncy5lZGl0JywgJGRhdGEpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiB1cGRhdGUoUmVxdWVzdCAkcmVxdWVzdCwgJGlkKQogICAgewogICAgICAgICRyZXF1ZXN0LT52YWxpZGF0ZShbCiAgICAgICAgICAgICd0aXRsZScgPT4gJ3JlcXVpcmVkfHVuaXF1ZTp0YWdzLHRpdGxlLCcuJGlkLAogICAgICAgICAgICAnY29sb3InID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdiYWNrZ3JvdW5kJyA9PiAncmVxdWlyZWQnLAogICAgICAgIF0pOwoKICAgICAgICB0cnl7CiAgICAgICAgICAgIFRhZzo6ZmluZCgkaWQpLT5maWxsKCRyZXF1ZXN0LT5hbGwoKSktPnNhdmUoKTsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdEJhY2tXaXRoU3VjY2VzcygiVGFnIGhhcyBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IiwgJ2FjY291bnRpbmcudGFncy5pbmRleCcpOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmJhY2tXaXRoRXJyb3IoJHRoLT5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZGVzdHJveSgkaWQpCiAgICB7CiAgICAgICAgdHJ5ewogICAgICAgICAgICBUYWc6OmZpbmQoJGlkKS0+ZGVsZXRlKCk7CiAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICJUYWcgaGFzIGJlZW4gRGVsZXRlZCEiCiAgICAgICAgICAgIF0pOwogICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgXSk7CiAgICAgICAgfQogICAgfQp9Cg==