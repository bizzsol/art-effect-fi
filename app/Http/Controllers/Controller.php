<?php
bolt_decrypt( __FILE__ , 'RzOHf7'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnM7Cgp1c2UgSWxsdW1pbmF0ZVxGb3VuZGF0aW9uXEF1dGhcQWNjZXNzXEF1dGhvcml6ZXNSZXF1ZXN0czsKdXNlIElsbHVtaW5hdGVcRm91bmRhdGlvblxCdXNcRGlzcGF0Y2hlc0pvYnM7CnVzZSBJbGx1bWluYXRlXEZvdW5kYXRpb25cVmFsaWRhdGlvblxWYWxpZGF0ZXNSZXF1ZXN0czsKdXNlIElsbHVtaW5hdGVcUm91dGluZ1xDb250cm9sbGVyIGFzIEJhc2VDb250cm9sbGVyOwoKdXNlIEFwcFxNb2RlbHNcVXNlckxvZzsKdXNlIEltYWdlOwp1c2UgSWxsdW1pbmF0ZVxQYWdpbmF0aW9uXExlbmd0aEF3YXJlUGFnaW5hdG9yOwp1c2UgSWxsdW1pbmF0ZVxQYWdpbmF0aW9uXFBhZ2luYXRvcjsKdXNlIElsbHVtaW5hdGVcU3VwcG9ydFxDb2xsZWN0aW9uOwoKY2xhc3MgQ29udHJvbGxlciBleHRlbmRzIEJhc2VDb250cm9sbGVyCnsKICAgIHVzZSBBdXRob3JpemVzUmVxdWVzdHMsIERpc3BhdGNoZXNKb2JzLCBWYWxpZGF0ZXNSZXF1ZXN0czsKCiAgICAjIFdyaXRlIEV2ZXJ5IEV2ZW50cyBpbiBMb2cgRmlsZQogICAgcHVibGljIGZ1bmN0aW9uIGxvZ0ZpbGVXcml0ZSgkbWVzc2FnZSwgJGV2ZW50X2lkKQogICAgewogICAgICAgICRsb2dfbWVzc2FnZSA9IGRhdGUoIlktbS1kIEg6aTpzIikgLiAiIFwiIiAuIEF1dGgoKS0+dXNlcigpLT5hc3NvY2lhdGVfaWQgLiAiXCIgIiAuICRtZXNzYWdlIC4gIiAiIC4gJGV2ZW50X2lkIC4gUEhQX0VPTDsKICAgICAgICAkbG9nX21lc3NhZ2UgLj0gZmlsZV9nZXRfY29udGVudHMoImFzc2V0cy9sb2cudHh0Iik7CiAgICAgICAgZmlsZV9wdXRfY29udGVudHMoImFzc2V0cy9sb2cudHh0IiwgJGxvZ19tZXNzYWdlKTsKCiAgICAgICAgJGFzc29jaWF0ZV9pZCA9IEF1dGgoKS0+dXNlcigpLT5hc3NvY2lhdGVfaWQ7CiAgICAgICAgJGxvZ3MgPSBVc2VyTG9nOjp3aGVyZSgnbG9nX2FzX2lkJywgJGFzc29jaWF0ZV9pZCktPm9yZGVyQnkoJ3VwZGF0ZWRfYXQnLCAnQVNDJyktPmdldCgpOwogICAgICAgIGlmIChjb3VudCgkbG9ncykgPCAzKSB7CiAgICAgICAgICAgICR1c2VyX2xvZyA9IG5ldyBVc2VyTG9nOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICR1c2VyX2xvZyA9ICRsb2dzLT5maXJzdCgpOwogICAgICAgICAgICAkdXNlcl9sb2ctPmlkID0gJGxvZ3MtPmZpcnN0KCktPmlkOwogICAgICAgIH0KICAgICAgICAkdXNlcl9sb2ctPmxvZ19hc19pZCA9ICRhc3NvY2lhdGVfaWQ7CiAgICAgICAgJHVzZXJfbG9nLT5sb2dfbWVzc2FnZSA9ICRtZXNzYWdlOwogICAgICAgICR1c2VyX2xvZy0+bG9nX3RhYmxlID0gJyc7CiAgICAgICAgJHVzZXJfbG9nLT5sb2dfcm93X25vID0gJGV2ZW50X2lkOwogICAgICAgICR1c2VyX2xvZy0+c2F2ZSgpOwoKICAgIH0KCiAgICAvLyB3cml0ZSBldmVyeSBldmVudHMgaW4gbG9nIGZpbGUgcHJvY2VzcyBxdWV1ZSBwcm9jZWR1CiAgICBwdWJsaWMgZnVuY3Rpb24gbG9nRmlsZVdyaXRlSm9icygkbWVzc2FnZSwgJGV2ZW50X2lkKQogICAgewogICAgICAgICRmaWxlUGF0aCA9IHVybCgnL2Fzc2V0c1xsb2cudHh0Jyk7CiAgICAgICAgJGpvYiA9IChuZXcgUHJvY2Vzc0xvZ0ZpbGUoYXV0aCgpLT51c2VyKCktPmFzc29jaWF0ZV9pZCwgJG1lc3NhZ2UsICRldmVudF9pZCwgJGZpbGVQYXRoKSkKICAgICAgICAgICAgLT5kZWxheShDYXJib246Om5vdygpLT5hZGRTZWNvbmRzKDEwKSk7CiAgICAgICAgZGlzcGF0Y2goJGpvYik7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHF1b3RlUmVwbGFjZUh0bWxFbnRyeSgkZGF0YSkKICAgIHsKICAgICAgICBpZiAoc3RycG9zKCRkYXRhLCAiJyIpICE9PSBGQUxTRSkgewogICAgICAgICAgICByZXR1cm4gc3RyX3JlcGxhY2UoIiciLCAiJiMzOTsiLCAkZGF0YSk7CiAgICAgICAgfSBlbHNlaWYgKHN0cnBvcygkZGF0YSwgJyInKSAhPT0gRkFMU0UpIHsKICAgICAgICAgICAgcmV0dXJuIHN0cl9yZXBsYWNlKCciJywgIiYjMzQ7IiwgJGRhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAkZGF0YTsKICAgICAgICB9CgoKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0VGFibGVOYW1lVW5pdCgkdW5pdCkKICAgIHsKICAgICAgICBpZiAoJHVuaXQgPT0gMSB8fCAkdW5pdCA9PSA0IHx8ICR1bml0ID09IDUgfHwgJHVuaXQgPT0gOSkgewogICAgICAgICAgICAkdGFibGVOYW1lID0gImhyX2F0dGVuZGFuY2VfbWJtIEFTIGEiOwogICAgICAgIH0gZWxzZSBpZiAoJHVuaXQgPT0gMikgewogICAgICAgICAgICAkdGFibGVOYW1lID0gImhyX2F0dGVuZGFuY2VfY2VpbCBBUyBhIjsKICAgICAgICB9IGVsc2UgaWYgKCR1bml0ID09IDMpIHsKICAgICAgICAgICAgJHRhYmxlTmFtZSA9ICJocl9hdHRlbmRhbmNlX2FxbCBBUyBhIjsKICAgICAgICB9IGVsc2UgaWYgKCR1bml0ID09IDYpIHsKICAgICAgICAgICAgJHRhYmxlTmFtZSA9ICJocl9hdHRlbmRhbmNlX2hvIEFTIGEiOwogICAgICAgIH0gZWxzZSBpZiAoJHVuaXQgPT0gOCkgewogICAgICAgICAgICAkdGFibGVOYW1lID0gImhyX2F0dGVuZGFuY2VfY2V3IEFTIGEiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICR0YWJsZU5hbWUgPSAiaHJfYXR0ZW5kYW5jZV9tYm0gQVMgYSI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJHRhYmxlTmFtZTsKCiAgICB9CgoKICAgIC8vRnJvbSBCaXp6IHNvbHV0aW9uCiAgICBwdWJsaWMgZnVuY3Rpb24gYmFja1dpdGhFcnJvcigkbWVzc2FnZSkKICAgIHsKICAgICAgICAkbm90aWZpY2F0aW9uID0gWwogICAgICAgICAgICAnbWVzc2FnZScgPT4gJG1lc3NhZ2UsCiAgICAgICAgICAgICdhbGVydC10eXBlJyA9PiAnZXJyb3InCiAgICAgICAgXTsKICAgICAgICByZXR1cm4gYmFjaygpLT53aXRoKCRub3RpZmljYXRpb24pOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBiYWNrV2l0aFN1Y2Nlc3MoJG1lc3NhZ2UpCiAgICB7CiAgICAgICAgJG5vdGlmaWNhdGlvbiA9IFsKICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICRtZXNzYWdlLAogICAgICAgICAgICAnYWxlcnQtdHlwZScgPT4gJ3N1Y2Nlc3MnCiAgICAgICAgXTsKICAgICAgICByZXR1cm4gYmFjaygpLT53aXRoKCRub3RpZmljYXRpb24pOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBiYWNrV2l0aFdhcm5pbmcoJG1lc3NhZ2UpCiAgICB7CiAgICAgICAgJG5vdGlmaWNhdGlvbiA9IFsKICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICRtZXNzYWdlLAogICAgICAgICAgICAnYWxlcnQtdHlwZScgPT4gJ3dhcm5pbmcnCiAgICAgICAgXTsKICAgICAgICByZXR1cm4gYmFjaygpLT53aXRoKCRub3RpZmljYXRpb24pOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiByZWRpcmVjdEJhY2tXaXRoV2FybmluZygkbWVzc2FnZSwgJHJvdXRlKQogICAgewogICAgICAgICRub3RpZmljYXRpb24gPSBbCiAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkbWVzc2FnZSwKICAgICAgICAgICAgJ2FsZXJ0LXR5cGUnID0+ICd3YXJuaW5nJwogICAgICAgIF07CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KCktPnJvdXRlKCRyb3V0ZSktPndpdGgoJG5vdGlmaWNhdGlvbik7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHJlZGlyZWN0QmFja1dpdGhFcnJvcigkbWVzc2FnZSwgJHJvdXRlKQogICAgewogICAgICAgICRub3RpZmljYXRpb24gPSBbCiAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkbWVzc2FnZSwKICAgICAgICAgICAgJ2FsZXJ0LXR5cGUnID0+ICdlcnJvcicKICAgICAgICBdOwogICAgICAgIHJldHVybiByZWRpcmVjdCgpLT5yb3V0ZSgkcm91dGUpLT53aXRoKCRub3RpZmljYXRpb24pOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiByZWRpcmVjdEJhY2tXaXRoU3VjY2VzcygkbWVzc2FnZSwgJHJvdXRlKQogICAgewogICAgICAgICRub3RpZmljYXRpb24gPSBbCiAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkbWVzc2FnZSwKICAgICAgICAgICAgJ2FsZXJ0LXR5cGUnID0+ICdzdWNjZXNzJwogICAgICAgIF07CiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KCktPnJvdXRlKCRyb3V0ZSktPndpdGgoJG5vdGlmaWNhdGlvbik7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHVybFJlZGlyZWN0QmFjaygkbWVzc2FnZSwgJHVybCwgJGFsZXJ0VHlwZSkKICAgIHsKICAgICAgICAkbm90aWZpY2F0aW9uID0gWwogICAgICAgICAgICAnbWVzc2FnZScgPT4gJG1lc3NhZ2UsCiAgICAgICAgICAgICdhbGVydC10eXBlJyA9PiAkYWxlcnRUeXBlCiAgICAgICAgXTsKICAgICAgICByZXR1cm4gcmVkaXJlY3QoJHVybCktPndpdGgoJG5vdGlmaWNhdGlvbik7CiAgICB9CgogICAgZnVuY3Rpb24gcGhvdG9VcGxvYWQoJHBob3RvRGF0YSwgJGZvbGRlck5hbWUsICR3aWR0aCA9IG51bGwsICRoZWlnaHQgPSBudWxsKQogICAgewoKICAgICAgICAkcGhvdG9PcmdOYW1lID0gJHBob3RvRGF0YS0+Z2V0Q2xpZW50T3JpZ2luYWxOYW1lKCk7CiAgICAgICAgJHBob3RvVHlwZSA9ICRwaG90b0RhdGEtPmdldENsaWVudE9yaWdpbmFsRXh0ZW5zaW9uKCk7CgogICAgICAgIC8vJGZpbGVUeXBlID0gJHBob3RvRGF0YS0+Z2V0Q2xpZW50T3JpZ2luYWxOYW1lKCk7CiAgICAgICAgJGZpbGVOYW1lID0gc3Vic3RyKCRwaG90b09yZ05hbWUsIDAsIC00KSAuIGRhdGUoJ2QtbS1ZLWktcycpIC4gJy4nIC4gJHBob3RvVHlwZTsKICAgICAgICAkcGF0aDIgPSAkZm9sZGVyTmFtZSAuIGRhdGUoJy9ZL20vZC8nKTsKICAgICAgICAvL3JldHVybiAkcGF0aDI7CiAgICAgICAgaWYgKCFpc19kaXIocHVibGljX3BhdGgoJHBhdGgyKSkpIHsKICAgICAgICAgICAgbWtkaXIocHVibGljX3BhdGgoJHBhdGgyKSwgMDc3NywgdHJ1ZSk7CiAgICAgICAgfQoKCiAgICAgICAgJHBob3RvRGF0YS0+bW92ZShwdWJsaWNfcGF0aCgkcGF0aDIpLCAkZmlsZU5hbWUpOwoKICAgICAgICBpZiAoJHdpZHRoICE9IG51bGwgJiYgJGhlaWdodCAhPSBudWxsKSB7IC8vIHdpZHRoICYgaGVpZ2h0IG1lbnRpb24tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICRpbWcgPSBcSW1hZ2U6Om1ha2UocHVibGljX3BhdGgoJHBhdGgyIC4gJGZpbGVOYW1lKSk7CiAgICAgICAgICAgICRpbWctPmVuY29kZSgnd2VicCcsIDc1KS0+cmVzaXplKCR3aWR0aCwgJGhlaWdodCk7CiAgICAgICAgICAgICRpbWctPnNhdmUocHVibGljX3BhdGgoJHBhdGgyIC4gJGZpbGVOYW1lKSk7CiAgICAgICAgICAgIHJldHVybiAkcGhvdG9VcGxvYWRlZFBhdGggPSAkcGF0aDIgLiAkZmlsZU5hbWU7CgogICAgICAgIH0gZWxzZWlmICgkd2lkdGggIT0gbnVsbCkgeyAvLyBvbmx5IHdpZHRoIG1lbnRpb24tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICAkaW1nID0gXEltYWdlOjptYWtlKHB1YmxpY19wYXRoKCRwYXRoMiAuICRmaWxlTmFtZSkpOwogICAgICAgICAgICAkaW1nLT5lbmNvZGUoJ3dlYnAnLCA3NSktPnJlc2l6ZSgkd2lkdGgsIG51bGwsIGZ1bmN0aW9uICgkY29uc3RyYWludCkgewogICAgICAgICAgICAgICAgJGNvbnN0cmFpbnQtPmFzcGVjdFJhdGlvKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkaW1nLT5zYXZlKHB1YmxpY19wYXRoKCRwYXRoMiAuICRmaWxlTmFtZSkpOwoKICAgICAgICAgICAgcmV0dXJuICRwaG90b1VwbG9hZGVkUGF0aCA9ICRwYXRoMiAuICRmaWxlTmFtZTsKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJGltZyA9IFxJbWFnZTo6bWFrZShwdWJsaWNfcGF0aCgkcGF0aDIgLiAkZmlsZU5hbWUpKTsKICAgICAgICAgICAgJGltZy0+c2F2ZShwdWJsaWNfcGF0aCgkcGF0aDIgLiAkZmlsZU5hbWUpKTsKICAgICAgICAgICAgcmV0dXJuICRwaG90b1VwbG9hZGVkUGF0aCA9ICRwYXRoMiAuICRmaWxlTmFtZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZmlsZUluZm8oJGZpbGUpCiAgICB7CiAgICAgICAgaWYgKGlzc2V0KCRmaWxlKSkgewogICAgICAgICAgICByZXR1cm4gYXJyYXkoCiAgICAgICAgICAgICAgICAnbmFtZScgPT4gJGZpbGUtPmdldENsaWVudE9yaWdpbmFsTmFtZSgpLAogICAgICAgICAgICAgICAgJ3R5cGUnID0+ICRmaWxlLT5nZXRDbGllbnRNaW1lVHlwZSgpLAogICAgICAgICAgICAgICAgJ3NpemUnID0+ICRmaWxlLT5nZXRTaXplKCksCiAgICAgICAgICAgICAgICAnd2lkdGgnID0+IGlzc2V0KGdldGltYWdlc2l6ZSgkZmlsZSlbMF0pID8gZ2V0aW1hZ2VzaXplKCRmaWxlKVswXSA6IDAsCiAgICAgICAgICAgICAgICAnaGVpZ2h0JyA9PiBpc3NldChnZXRpbWFnZXNpemUoJGZpbGUpWzFdKSA/IGdldGltYWdlc2l6ZSgkZmlsZSlbMV0gOiAwLAogICAgICAgICAgICAgICAgJ2V4dGVuc2lvbicgPT4gJGZpbGUtPmdldENsaWVudE9yaWdpbmFsRXh0ZW5zaW9uKCksCiAgICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGFycmF5KAogICAgICAgICAgICAgICAgJ25hbWUnID0+ICcnLAogICAgICAgICAgICAgICAgJ3R5cGUnID0+ICcnLAogICAgICAgICAgICAgICAgJ3NpemUnID0+ICcnLAogICAgICAgICAgICAgICAgJ3dpZHRoJyA9PiAnJywKICAgICAgICAgICAgICAgICdoZWlnaHQnID0+ICcnLAogICAgICAgICAgICAgICAgJ2V4dGVuc2lvbicgPT4gJycsCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZpbGVVcGxvYWQoJGZpbGVkYXRhLCAkZm9sZGVyTmFtZSwgJHJlc2l6ZSA9IGZhbHNlLCAkd2lkdGggPSAxOTIsICRoZWlnaHQgPSBudWxsKQogICAgewogICAgICAgICR0eXBlID0gJGZpbGVkYXRhLT5nZXRDbGllbnRPcmlnaW5hbEV4dGVuc2lvbigpOwogICAgICAgICRmaWxlbmFtZSA9IHJhbmQoMSwgMTAwMCkgLiBkYXRlKCdkbXloaXMnKSAuICIuIiAuICR0eXBlOwogICAgICAgICRmaWxlcGF0aCA9ICRmb2xkZXJOYW1lIC4gZGF0ZSgnL1kvbS9kLycpOwogICAgICAgIGlmICghZmlsZV9leGlzdHMocHVibGljX3BhdGgoJGZpbGVwYXRoKSkpIHsKICAgICAgICAgICAgbWtkaXIocHVibGljX3BhdGgoJGZpbGVwYXRoKSwgMDc3NywgdHJ1ZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoJHJlc2l6ZSkgewogICAgICAgICAgICAkaW1hZ2UgPSBcSW1hZ2U6Om1ha2UoJGZpbGVkYXRhLT5wYXRoKCkpOwogICAgICAgICAgICAkaW1hZ2UtPnJlc2l6ZSgkd2lkdGgsICRoZWlnaHQsIGZ1bmN0aW9uICgkY29uc3RyYWludCkgewogICAgICAgICAgICAgICAgJGNvbnN0cmFpbnQtPmFzcGVjdFJhdGlvKCk7CiAgICAgICAgICAgIH0pLT5zYXZlKHB1YmxpY19wYXRoKCRmaWxlcGF0aCkgLiAnLycgLiAkZmlsZW5hbWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRmaWxlZGF0YS0+bW92ZShwdWJsaWNfcGF0aCgkZmlsZXBhdGgpLCAkZmlsZW5hbWUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICgkZmlsZXBhdGggLiAkZmlsZW5hbWUpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBwYWdpbmF0ZSgkaXRlbXMsICRwZXJQYWdlLCAkcGFnZSA9IG51bGwsICRvcHRpb25zID0gW10pCiAgICB7CiAgICAgICAgJHBhZ2UgPSAkcGFnZSA/OiAoUGFnaW5hdG9yOjpyZXNvbHZlQ3VycmVudFBhZ2UoKSA/OiAxKTsKICAgICAgICAkaXRlbXMgPSAkaXRlbXMgaW5zdGFuY2VvZiBDb2xsZWN0aW9uID8gJGl0ZW1zIDogQ29sbGVjdGlvbjo6bWFrZSgkaXRlbXMpOwogICAgICAgIHJldHVybiBuZXcgTGVuZ3RoQXdhcmVQYWdpbmF0b3IoJGl0ZW1zLT5mb3JQYWdlKCRwYWdlLCAkcGVyUGFnZSksICRpdGVtcy0+Y291bnQoKSwgJHBlclBhZ2UsICRwYWdlLCAkb3B0aW9ucyk7CiAgICB9CgogICAgZnVuY3Rpb24gZm9ybWF0Qnl0ZXMoJHNpemUsICRwcmVjaXNpb24gPSAyKXsKICAgICAgICAkYmFzZSA9IGxvZygkc2l6ZSwgMTAyNCk7CiAgICAgICAgJHN1ZmZpeGVzID0gYXJyYXkoJycsICdLQicsICdNQicsICdHQicsICdUQicpOyAgIAoKICAgICAgICByZXR1cm4gcm91bmQocG93KDEwMjQsICRiYXNlIC0gZmxvb3IoJGJhc2UpKSwgJHByZWNpc2lvbikgLicgJy4gJHN1ZmZpeGVzW2Zsb29yKCRiYXNlKV07CiAgICB9IAoKICAgIHB1YmxpYyBmdW5jdGlvbiBmaWxlRGVsZXRlKCRwYXRoKQogICAgewogICAgICAgIGlmICghZW1wdHkoJHBhdGgpICYmIGZpbGVfZXhpc3RzKHB1YmxpY19wYXRoKCRwYXRoKSkpIHsKICAgICAgICAgICAgcmV0dXJuIHVubGluayhwdWJsaWNfcGF0aCgkcGF0aCkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn0K