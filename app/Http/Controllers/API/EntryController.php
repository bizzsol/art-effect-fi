<?php
bolt_decrypt( __FILE__ , 'RK0mlZ'); return 0;
##!!!##CgpuYW1lc3BhY2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcQVBJOwoKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKdXNlIERCOwoKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xBY2NvdW50Q2xhc3M7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcQWNjb3VudEdyb3VwOwp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXENoYXJ0T2ZBY2NvdW50OwoKdXNlIFxBcHBcTW9kZWxzXFBtc01vZGVsc1xBY2NvdW50c1xDb21wYW55Owp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXENvc3RDZW50cmU7CnVzZSBcQXBwXE1vZGVsc1xQbXNNb2RlbHNcQWNjb3VudHNcRW50cnlUeXBlOwp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEVudHJ5Owp1c2UgXEFwcFxNb2RlbHNcUG1zTW9kZWxzXEFjY291bnRzXEVudHJ5bG9nOwoKY2xhc3MgRW50cnlDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICAvKioKICAgICAqIFNhdmUgRW50cnkKICAgICAqIAogICAgICogR2V0IExpc3Qgb2YgU2F2ZSBFbnRyeS4KICAgICAqIAogICAgICogQHF1ZXJ5UGFyYW0gdG9rZW4gc3RyaW5nIHJlcXVpcmVkIEF1dGhlbnRpY2F0aW9uIFRva2VuIExpc3Qgd291bGQgYmUgcHJvdmlkZWQgYnkgQklaWlNPTCBFeGFtcGxlOiBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5emFiY2RlZgogICAgICogCiAgICAgKiBAYm9keVBhcmFtIGNvbXBhbnlfaWQgaW50ZWdlciByZXF1aXJlZCBDb21wYW55IElEIEV4YW1wbGU6IDUKICAgICAqIEBib2R5UGFyYW0gZW50cnlfdHlwZV9pZCBpbnRlZ2VyIHJlcXVpcmVkIEVudHJ5IFR5cGUgSUQgRXhhbXBsZTogNQogICAgICogQGJvZHlQYXJhbSBudW1iZXIgdGV4dCBSZWZlcmVuY2UgRXhhbXBsZTogMTIzNDU2NzgKICAgICAqIEBib2R5UGFyYW0gZGF0ZXRpbWUgZGF0ZXRpbWUgcmVxdWlyZWQgRGF0ZSAmIFRpbWUgRXhhbXBsZTogMjAyNC0wMy0yNyAxMDowMDowMAogICAgICogQGJvZHlQYXJhbSBleGNoYW5nZV9yYXRlX2lkIGludGVnZXIgcmVxdWlyZWQgRXhjaGFuZ2UgUmF0ZSBJRCBFeGFtcGxlOiAxCiAgICAgKiBAYm9keVBhcmFtIG5vdGVzIHRleHQgcmVxdWlyZWQgTm90ZXMgRXhhbXBsZTogTG9yZW0gSW1zdW0gRG9sbGVyIHNpdCBlbWV0Li4uCiAgICAgKiBAYm9keVBhcmFtIGl0ZW1zIHRleHQgcmVxdWlyZWQgR0wgSXRlbXMgRXhhbXBsZTogCiAgICAgKiBpdGVtc1swXVtjb3N0X2NlbnRyZV9pZF0gPT4gMTAwNwogICAgICogaXRlbXNbMF1bY2hhcnRfb2ZfYWNjb3VudF9pZF0gPT4gMTM2MwogICAgICogaXRlbXNbMF1bZGViaXRdID0+IDEwMDAKICAgICAqIGl0ZW1zWzBdW2NyZWRpdF0gPT4gMAogICAgICogaXRlbXNbMF1bbmFycmF0aW9uXSA9PiBCYW5rIERlYml0CiAgICAgKiBpdGVtc1sxXVtjb3N0X2NlbnRyZV9pZF0gPT4gMTAwNwogICAgICogaXRlbXNbMV1bY2hhcnRfb2ZfYWNjb3VudF9pZF0gPT4gMTY2NAogICAgICogaXRlbXNbMV1bZGViaXRdID0+IDAKICAgICAqIGl0ZW1zWzFdW2NyZWRpdF0gPT4gMTAwMAogICAgICogaXRlbXNbMV1bbmFycmF0aW9uXSA9PiBSZWNlaXZhYmxlIENyZWRpdAogICAgICogaXRlbXNbMV1bZGViaXRdID0+IDAKICAgICAqIEBib2R5UGFyYW0gbG9nc1twcm9kdWN0XSB0ZXh0IGtleSA9PiB2YWx1ZSBFeGFtcGxlOiA1MDAwCiAgICAgKiAKICAgICAqIEByZXNwb25zZSB7CiAgICAgKiAgICAgICAic3VjY2VzcyI6IHRydWUsCiAgICAgKiAgICAgICAic3RhdHVzIjogdHJ1ZSwKICAgICAqICAgICAgICJzdGF0dXNfY29kZSI6IDIwMCwKICAgICAqICAgICAgICJkYXRhIjogewogICAgICogICAgICAgICAgICJjb2RlIjogIkpOTC0yNDAxMDEtMDAwMiIsCiAgICAgKiAgICAgICAgICAgImZpc2NhbF95ZWFyX2lkIjogNSwKICAgICAqICAgICAgICAgICAiZW50cnlfdHlwZV9pZCI6IDUsCiAgICAgKiAgICAgICAgICAgInRhZ19pZCI6IDEsCiAgICAgKiAgICAgICAgICAgIm51bWJlciI6ICIxMjM0NTY3OCIsCiAgICAgKiAgICAgICAgICAgImRhdGUiOiAiMjAyNC0wMS0wMSIsCiAgICAgKiAgICAgICAgICAgInRpbWUiOiAiMTA6MDA6MDAiLAogICAgICogICAgICAgICAgICJleGNoYW5nZV9yYXRlX2lkIjogIjMiLAogICAgICogICAgICAgICAgICJkZWJpdCI6IDEwMDAsCiAgICAgKiAgICAgICAgICAgImNyZWRpdCI6IDEwMDAsCiAgICAgKiAgICAgICAgICAgImlzX2FkdmFuY2UiOiAwLAogICAgICogICAgICAgICAgICJhZHZhbmNlX2NhdGVnb3J5X2lkIjogMCwKICAgICAqICAgICAgICAgICAibm90ZXMiOiAiTG9yZW0gSW1zdW0gRG9sbGVyIHNpdCBlbWV0Li4uIiwKICAgICAqICAgICAgICAgICAiaXNfbWFudWFsIjogMCwKICAgICAqICAgICAgICAgICAiY3JlYXRlZF9ieSI6IDEsCiAgICAgKiAgICAgICAgICAgInVwZGF0ZWRfYXQiOiAiMjAyNC0wMS0yOVQxMDo0MTowOS4wMDAwMDBaIiwKICAgICAqICAgICAgICAgICAiY3JlYXRlZF9hdCI6ICIyMDI0LTAxLTI5VDEwOjQxOjA5LjAwMDAwMFoiLAogICAgICogICAgICAgICAgICJpZCI6IDEyLAogICAgICogICAgICAgICAgICJwcmVwYXJlZF9ieSI6IDEsCiAgICAgKiAgICAgICAgICAgInJldmlld2VkX2J5IjogMSwKICAgICAqICAgICAgICAgICAiYXNzZXNzZWRfYnkiOiAxLAogICAgICogICAgICAgICAgICJhcHByb3ZlZF9ieSI6IDEsCiAgICAgKiAgICAgICAgICAgImlzX3Jldmlld2VkIjogImFwcHJvdmVkIiwKICAgICAqICAgICAgICAgICAiaXNfYXNzZXNzZWQiOiAiYXBwcm92ZWQiLAogICAgICogICAgICAgICAgICJpc19hcHByb3ZlZCI6ICJhcHByb3ZlZCIsCiAgICAgKiAgICAgICAgICAgInVwZGF0ZWRfYnkiOiAxCiAgICAgKiAgICAgICB9CiAgICAgKiAgIH0KICAgICAqIAogICAgICogQGdyb3VwIFNhdmUgRW50cnkKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZW50cnkoUmVxdWVzdCAkcmVxdWVzdCl7CiAgICAgICAgJHZhbGlkYXRvciA9IFxWYWxpZGF0b3I6Om1ha2UoJHJlcXVlc3QtPmFsbCgpLCBbCiAgICAgICAgICAgICdlbnRyeV90eXBlX2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnZGF0ZXRpbWUnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdub3RlcycgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ2l0ZW1zJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnaXRlbXMuKicgPT4gJ3JlcXVpcmVkJywKICAgICAgICBdKTsKCiAgICAgICAgaWYgKCR2YWxpZGF0b3ItPnBhc3NlcygpKSB7CiAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICRlbnRyeSA9IHNhdmVMZWRnZXJFbnRyaWVzKCRyZXF1ZXN0LT5lbnRyeV90eXBlX2lkLCAkcmVxdWVzdC0+ZGF0ZXRpbWUsIGlzc2V0KCRyZXF1ZXN0LT50YWdfaWQpID8gJHJlcXVlc3QtPnRhZ19pZCA6IDEsICRyZXF1ZXN0LT5udW1iZXIsICRyZXF1ZXN0LT5ub3RlcywgJHJlcXVlc3QtPml0ZW1zLCBpc3NldCgkcmVxdWVzdC0+ZXhjaGFuZ2VfcmF0ZV9pZCkgPyAkcmVxdWVzdC0+ZXhjaGFuZ2VfcmF0ZV9pZCA6IDMsIGlzc2V0KCRyZXF1ZXN0LT5pc19hZHZhbmNlKSA/ICRyZXF1ZXN0LT5pc19hZHZhbmNlIDogMCwgaXNzZXQoJHJlcXVlc3QtPmFkdmFuY2VfY2F0ZWdvcnlfaWQpID8gJHJlcXVlc3QtPmFkdmFuY2VfY2F0ZWdvcnlfaWQgOiAwLCAwLCBpc3NldCgkcmVxdWVzdC0+Y29tcGFueV9pZCkgPyAkcmVxdWVzdC0+Y29tcGFueV9pZCA6IDAsICRyZXF1ZXN0LT5maXNjYWxZZWFyKTsKCiAgICAgICAgICAgICAgICBpZihpc3NldCgkZW50cnlbJ2VudHJ5J10pICYmIChpc3NldCgkcmVxdWVzdC0+bG9ncykgJiYgaXNfYXJyYXkoJHJlcXVlc3QtPmxvZ3MpICYmIGNvdW50KCRyZXF1ZXN0LT5sb2dzKSkpewogICAgICAgICAgICAgICAgICAgICRsb2dzID0gW107CiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkcmVxdWVzdC0+bG9ncyBhcyAka2V5ID0+ICR2YWx1ZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5X3B1c2goJGxvZ3MsIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlbnRyeV9pZCcgPT4gJGVudHJ5WydlbnRyeSddLT5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdrZXknID0+ICRrZXksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFsdWUnID0+ICR2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBFbnRyeWxvZzo6aW5zZXJ0KCRsb2dzKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+ICRlbnRyeVsnc3VjY2VzcyddLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXMnID0+ICRlbnRyeVsnc3VjY2VzcyddLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gJGVudHJ5WydzdWNjZXNzJ10gPyAyMDAgOiA1MDAsCiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnID0+IGlzc2V0KCRlbnRyeVsnZW50cnknXSkgPyAkZW50cnkgOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gaXNzZXQoJGVudHJ5WydtZXNzYWdlJ10pID8gJGVudHJ5WydtZXNzYWdlJ10gOiBmYWxzZSwKICAgICAgICAgICAgICAgIF0sICRlbnRyeVsnc3VjY2VzcyddID8gMjAwIDogNTAwKTsKICAgICAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXMnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gNTAwLAogICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkdGgtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICAgICAgXSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICdzdGF0dXMnID0+IGZhbHNlLAogICAgICAgICAgICAnc3RhdHVzX2NvZGUnID0+IDQyMiwKICAgICAgICAgICAgJ21lc3NhZ2UnID0+IGltcGxvZGUoJywgJywgJHZhbGlkYXRvci0+ZXJyb3JzKCktPmFsbCgpKQogICAgICAgIF0sIDQyMik7CiAgICB9CgogICAgLyoqCiAgICAgKiBTYXZlIFN1cHBsaWVyIExlZGdlcgogICAgICogCiAgICAgKiBHZXQgTGlzdCBvZiBTYXZlIFN1cHBsaWVyIExlZGdlci4KICAgICAqIAogICAgICogQHF1ZXJ5UGFyYW0gdG9rZW4gc3RyaW5nIHJlcXVpcmVkIEF1dGhlbnRpY2F0aW9uIFRva2VuIExpc3Qgd291bGQgYmUgcHJvdmlkZWQgYnkgQklaWlNPTCBFeGFtcGxlOiBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5emFiY2RlZgogICAgICogQGJvZHlQYXJhbSBzdXBwbGllcl9pZCBpbnRlZ2VyIHJlcXVpcmVkIFN1cHBsaWVyIElEIEV4YW1wbGU6IDIKICAgICAqIEBib2R5UGFyYW0gZGF0ZSBkYXRlIHJlcXVpcmVkIERhdGUgRXhhbXBsZTogMjAyNC0wMS0wMQogICAgICogQGJvZHlQYXJhbSBkZWJpdCBpbnRlZ2VyIHJlcXVpcmVkIERlYml0IEFtb3VudCBFeGFtcGxlOiAxMDAKICAgICAqIEBib2R5UGFyYW0gY3JlZGl0IGludGVnZXIgcmVxdWlyZWQgQ3JlZGl0IEFtb3VudCBFeGFtcGxlOiAxMDAKICAgICAqIEBib2R5UGFyYW0gcGF5bWVudF90eXBlIHRleHQgIFBheW1lbnQgVHlwZSAoJ2FzaCwgY2hlcXVlLCBiYW5rLXRyYW5zZmVyLCBvdGhlcnMtZ2wpIEV4YW1wbGU6IGNhc2gKICAgICAqIEBib2R5UGFyYW0gcGF5bWVudF9kZXRhaWxzIHRleHQgIFBheW1lbnQgRGV0YWlscyBFeGFtcGxlOiBIZWxsbyBXb3JsZAogICAgICogQGJvZHlQYXJhbSBub3RlcyB0ZXh0IE5vdGVzIEV4YW1wbGU6IEhlbGxvIFdvcmxkCiAgICAgKiBAYm9keVBhcmFtIGJhbmtfYWNjb3VudF9pZCBpbnRlZ2VyIEJhbmsgQWNjb3VudCBJRCBFeGFtcGxlOiAwCiAgICAgKiBAYm9keVBhcmFtIHN1cHBsaWVyX3BheW1lbnRfaWQgaW50ZWdlciBTdXBwbGllciBQYXltZW50IElEIEV4YW1wbGU6IDAKICAgICAqIEBib2R5UGFyYW0gZXhjaGFuZ2VfcmF0ZV9pZCBpbnRlZ2VyIHJlcXVpcmVkIEV4Y2hhbmdlIFJhdGUgSUQgRXhhbXBsZTogMQogICAgICogCiAgICAgKiBAZ3JvdXAgU2F2ZSBTdXBwbGllciBMZWRnZXIKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2F2ZVN1cHBsaWVyTGVkZ2VyKFJlcXVlc3QgJHJlcXVlc3QpewogICAgICAgICR2YWxpZGF0b3IgPSBcVmFsaWRhdG9yOjptYWtlKCRyZXF1ZXN0LT5hbGwoKSwgWwogICAgICAgICAgICAnc3VwcGxpZXJfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdkYXRlJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnZGViaXQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdjcmVkaXQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgXSk7CgogICAgICAgIGlmICgkdmFsaWRhdG9yLT5wYXNzZXMoKSkgewogICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IHRydWUsCiAgICAgICAgICAgICAgICAgICAgJ3N0YXR1cycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAnc3RhdHVzX2NvZGUnID0+IDIwMCwKICAgICAgICAgICAgICAgICAgICAnZGF0YScgPT4gc2F2ZVN1cHBsaWVyTGVkZ2VyKCRyZXF1ZXN0LT5zdXBwbGllcl9pZCwgJHJlcXVlc3QtPmRhdGUsICRyZXF1ZXN0LT5kZWJpdCwgJHJlcXVlc3QtPmNyZWRpdCwgJHJlcXVlc3QtPnBheW1lbnRfdHlwZSwgJHJlcXVlc3QtPnBheW1lbnRfZGV0YWlscywgJHJlcXVlc3QtPm5vdGVzLCAkcmVxdWVzdC0+YmFua19hY2NvdW50X2lkLCAkcmVxdWVzdC0+c3VwcGxpZXJfcGF5bWVudF9pZCwgJHJlcXVlc3QtPmV4Y2hhbmdlX3JhdGVfaWQsIGlzc2V0KCRyZXF1ZXN0LT5lbnRyeV9pZCkgPyAkcmVxdWVzdC0+ZW50cnlfaWQgOiBudWxsKSwKICAgICAgICAgICAgICAgIF0sIDIwMCk7CiAgICAgICAgICAgIH1jYXRjaCAoXFRocm93YWJsZSAkdGgpewogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJyA9PiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAnc3RhdHVzX2NvZGUnID0+IDUwMCwKICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZScgPT4gJHRoLT5nZXRNZXNzYWdlKCkKICAgICAgICAgICAgICAgIF0sIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAnc3RhdHVzJyA9PiBmYWxzZSwKICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiA0MjIsCiAgICAgICAgICAgICdtZXNzYWdlJyA9PiBpbXBsb2RlKCcsICcsICR2YWxpZGF0b3ItPmVycm9ycygpLT5hbGwoKSkKICAgICAgICBdLCA0MjIpOwogICAgfQoKICAgIC8qKgogICAgICogU2F2ZSBDaGVxdWUKICAgICAqIAogICAgICogR2V0IExpc3Qgb2YgU2F2ZSBDaGVxdWUuCiAgICAgKiAKICAgICAqIEBxdWVyeVBhcmFtIHRva2VuIHN0cmluZyByZXF1aXJlZCBBdXRoZW50aWNhdGlvbiBUb2tlbiBMaXN0IHdvdWxkIGJlIHByb3ZpZGVkIGJ5IEJJWlpTT0wgRXhhbXBsZTogYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXphYmNkZWYKICAgICAqIEBib2R5UGFyYW0gYmFua19hY2NvdW50X2lkIGludGVnZXIgcmVxdWlyZWQgQmFuayBBY2NvdW50IElEICBFeGFtcGxlOiAxMgogICAgICogQGJvZHlQYXJhbSBlbnRyeV9pZCBpbnRlZ2VyIHJlcXVpcmVkIEVudHJ5IElEICBFeGFtcGxlOiAxCiAgICAgKiBAYm9keVBhcmFtIHN1cHBsaWVyX2xlZGdlcl9pZCBpbnRlZ2VyIFN1cHBsaWVyIExlZGdlciBJRCAgRXhhbXBsZTogMAogICAgICogQGJvZHlQYXJhbSBkYXRldGltZSBkYXRldGltZSBEYXRlIGFuZCBUaW1lICBFeGFtcGxlOiAyMDI0LTAxLTAxIDEwOjAwOjAwCiAgICAgKiBAYm9keVBhcmFtIHNvdXJjZSBpbnRlZ2VyIFNvdXJjZSAgRXhhbXBsZTogMTIKICAgICAqIEBib2R5UGFyYW0gdHlwZSBpbnRlZ2VyIFR5cGUgIEV4YW1wbGU6IDEyCiAgICAgKiBAYm9keVBhcmFtIGNoZXF1ZV9udW1iZXIgc3RyaW5nIENoZXF1ZSBOdW1iZXIgIEV4YW1wbGU6IDEwMDAKICAgICAqIEBib2R5UGFyYW0gZGViaXRfY3JlZGl0IHN0cmluZyBEZWJpdC9DcmVkaXQgKEQgZm9yIERlYml0IGFuZCBDIGZvciBDcmVkaXQpICBFeGFtcGxlOiBECiAgICAgKiBAYm9keVBhcmFtIGFtb3VudCBudW1iZXIgYW1vdW50ICBFeGFtcGxlOiAxMDAKICAgICAqIEBib2R5UGFyYW0gbmFycmF0aW9uIHRleHQgbmFycmF0aW9uICBFeGFtcGxlOiBIZWxsbyBXb3JsZAogICAgICogCiAgICAgKiBAZ3JvdXAgU2F2ZSBDaGVxdWUKICAgICAqIEByZXR1cm4gXElsbHVtaW5hdGVcSHR0cFxSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2F2ZUNoZXF1ZShSZXF1ZXN0ICRyZXF1ZXN0KXsKICAgICAgICAkdmFsaWRhdG9yID0gXFZhbGlkYXRvcjo6bWFrZSgkcmVxdWVzdC0+YWxsKCksIFsKICAgICAgICAgICAgJ2JhbmtfYWNjb3VudF9pZCcgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgJ2VudHJ5X2lkJyA9PiAncmVxdWlyZWQnLAogICAgICAgIF0pOwoKICAgICAgICBpZiAoJHZhbGlkYXRvci0+cGFzc2VzKCkpIHsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJyA9PiB0cnVlLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXMnID0+IHRydWUsCiAgICAgICAgICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiAyMDAsCiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnID0+IHNhdmVDaGVxdWUoJHJlcXVlc3QtPmJhbmtfYWNjb3VudF9pZCwgJHJlcXVlc3QtPmVudHJ5X2lkLCAkcmVxdWVzdC0+c3VwcGxpZXJfbGVkZ2VyX2lkLCAkcmVxdWVzdC0+ZGF0ZXRpbWUsICRyZXF1ZXN0LT5zb3VyY2UsICRyZXF1ZXN0LT50eXBlLCAkcmVxdWVzdC0+Y2hlcXVlX251bWJlciwgJHJlcXVlc3QtPmRlYml0X2NyZWRpdCwgJHJlcXVlc3QtPmFtb3VudCwgJHJlcXVlc3QtPm5hcnJhdGlvbiksCiAgICAgICAgICAgICAgICBdLCAyMDApOwogICAgICAgICAgICB9Y2F0Y2ggKFxUaHJvd2FibGUgJHRoKXsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKFsKICAgICAgICAgICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgJ3N0YXR1cycgPT4gZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgJ3N0YXR1c19jb2RlJyA9PiA1MDAsCiAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnID0+ICR0aC0+Z2V0TWVzc2FnZSgpCiAgICAgICAgICAgICAgICBdLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICdzdWNjZXNzJyA9PiBmYWxzZSwKICAgICAgICAgICAgJ3N0YXR1cycgPT4gZmFsc2UsCiAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gNDIyLAogICAgICAgICAgICAnbWVzc2FnZScgPT4gaW1wbG9kZSgnLCAnLCAkdmFsaWRhdG9yLT5lcnJvcnMoKS0+YWxsKCkpCiAgICAgICAgXSwgNDIyKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gc2F2ZUN1c3RvbWVyTGVkZ2VyKFJlcXVlc3QgJHJlcXVlc3QpewogICAgICAgICR2YWxpZGF0b3IgPSBcVmFsaWRhdG9yOjptYWtlKCRyZXF1ZXN0LT5hbGwoKSwgWwogICAgICAgICAgICAnY3VzdG9tZXJfaWQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdkYXRlJyA9PiAncmVxdWlyZWQnLAogICAgICAgICAgICAnZGViaXQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgICAgICdjcmVkaXQnID0+ICdyZXF1aXJlZCcsCiAgICAgICAgXSk7CgogICAgICAgIGlmICgkdmFsaWRhdG9yLT5wYXNzZXMoKSkgewogICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IHRydWUsCiAgICAgICAgICAgICAgICAgICAgJ3N0YXR1cycgPT4gdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAnc3RhdHVzX2NvZGUnID0+IDIwMCwKICAgICAgICAgICAgICAgICAgICAnZGF0YScgPT4gc2F2ZUN1c3RvbWVyTGVkZ2VyKCRyZXF1ZXN0LT5jdXN0b21lcl9pZCwgJHJlcXVlc3QtPmRhdGUsICRyZXF1ZXN0LT5kZWJpdCwgJHJlcXVlc3QtPmNyZWRpdCwgJHJlcXVlc3QtPnBheW1lbnRfdHlwZSwgJHJlcXVlc3QtPnBheW1lbnRfZGV0YWlscywgJHJlcXVlc3QtPm5vdGVzLCAkcmVxdWVzdC0+YmFua19hY2NvdW50X2lkLCAkcmVxdWVzdC0+Y3VzdG9tZXJfcGF5bWVudF9pZCwgJHJlcXVlc3QtPmV4Y2hhbmdlX3JhdGVfaWQpLAogICAgICAgICAgICAgICAgXSwgMjAwKTsKICAgICAgICAgICAgfWNhdGNoIChcVGhyb3dhYmxlICR0aCl7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbihbCiAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXMnID0+IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICdzdGF0dXNfY29kZScgPT4gNTAwLAogICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJyA9PiAkdGgtPmdldE1lc3NhZ2UoKQogICAgICAgICAgICAgICAgXSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oWwogICAgICAgICAgICAnc3VjY2VzcycgPT4gZmFsc2UsCiAgICAgICAgICAgICdzdGF0dXMnID0+IGZhbHNlLAogICAgICAgICAgICAnc3RhdHVzX2NvZGUnID0+IDQyMiwKICAgICAgICAgICAgJ21lc3NhZ2UnID0+IGltcGxvZGUoJywgJywgJHZhbGlkYXRvci0+ZXJyb3JzKCktPmFsbCgpKQogICAgICAgIF0sIDQyMik7CiAgICB9Cn0K